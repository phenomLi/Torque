!function(Q,U){if("object"==typeof exports&&"object"==typeof module)module.exports=U();else if("function"==typeof define&&define.amd)define([],U);else{var B=U();for(var F in B)("object"==typeof exports?exports:Q)[F]=B[F]}}(window,(function(){return function(Q){var U={};function B(F){if(U[F])return U[F].exports;var I=U[F]={i:F,l:!1,exports:{}};return Q[F].call(I.exports,I,I.exports,B),I.l=!0,I.exports}return B.m=Q,B.c=U,B.d=function(Q,U,F){B.o(Q,U)||Object.defineProperty(Q,U,{enumerable:!0,get:F})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,U){if(1&U&&(Q=B(Q)),8&U)return Q;if(4&U&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var F=Object.create(null);if(B.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:Q}),2&U&&"string"!=typeof Q)for(var I in Q)B.d(F,I,function(U){return Q[U]}.bind(null,I));return F},B.n=function(Q){var U=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(U,"a",U),U},B.o=function(Q,U){return Object.prototype.hasOwnProperty.call(Q,U)},B.p="",B(B.s=14)}([function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports._tempVector4 = exports._tempVector3 = exports._tempVector2 = exports._tempVector1 = exports.Vector = void 0;\r\n// 二维向量 {x, y}\r\nclass Vector {\r\n    constructor(x, y) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        if (x !== undefined && y !== undefined) {\r\n            this.set(x, y);\r\n        }\r\n    }\r\n    //-------------操作----------------\r\n    /**\r\n     * 设置值\r\n     * @param x\r\n     * @param y\r\n     */\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * 相加\r\n     * @param v\r\n     */\r\n    add(v, out) {\r\n        out = out || new Vector();\r\n        out.x = this.x + v.x;\r\n        out.y = this.y + v.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 相减\r\n     * @param v\r\n     */\r\n    sub(v, out) {\r\n        out = out || new Vector();\r\n        out.x = this.x - v.x;\r\n        out.y = this.y - v.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 点积\r\n     * @param v\r\n     */\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    /**\r\n     * 叉积\r\n     * @param v\r\n     */\r\n    cro(v) {\r\n        return this.x * v.y - v.x * this.y;\r\n    }\r\n    /**\r\n     * 与标量进行叉积\r\n     * @param n\r\n     */\r\n    croNum(n, out) {\r\n        out = out || new Vector();\r\n        out.x = -n * this.y;\r\n        out.y = n * this.x;\r\n        return out;\r\n    }\r\n    /**\r\n     * 投影\r\n     * @param v\r\n     */\r\n    pro(v) {\r\n        return this.dot(v) / v.len();\r\n    }\r\n    /**\r\n     * 法向\r\n     */\r\n    nor(out) {\r\n        out = out || new Vector();\r\n        out.x = this.y;\r\n        out.y = -this.x;\r\n        return out;\r\n    }\r\n    /**\r\n     * 求模\r\n     */\r\n    len() {\r\n        return Math.hypot(this.x, this.y);\r\n    }\r\n    /**\r\n     * 平方模（节省求平方根操作）\r\n     */\r\n    len_s() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    /**\r\n     * 单位化\r\n     */\r\n    nol() {\r\n        let len = this.len();\r\n        if (len === 0) {\r\n            return new Vector();\r\n        }\r\n        this.x = this.x / len;\r\n        this.y = this.y / len;\r\n        return this;\r\n    }\r\n    /**\r\n     * 缩放\r\n     * @param n\r\n     */\r\n    scl(n, out) {\r\n        out = out || new Vector();\r\n        out.x = n * this.x;\r\n        out.y = n * this.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 反向\r\n     */\r\n    inv(out) {\r\n        out = out || new Vector();\r\n        out.x = -this.x;\r\n        out.y = -this.y;\r\n        return out;\r\n    }\r\n    /**\r\n     * 判断两向量是否相等\r\n     * @param v\r\n     */\r\n    eql(v) {\r\n        return this.x === v.x && this.y === v.y;\r\n    }\r\n    /**\r\n     * 求两向量夹角(弧度制)\r\n     * @param v\r\n     */\r\n    ang(v) {\r\n        return Math.acos(this.dot(v) / (this.len() * v.len()));\r\n    }\r\n    /**\r\n     * 克隆向量\r\n     */\r\n    col() {\r\n        return new Vector(this.x, this.y);\r\n    }\r\n    /**\r\n     * 绕某点旋转向量\r\n     * @param radian 角度（弧度制）\r\n     * @param point 绕的点\r\n     */\r\n    rot(radian, point, out) {\r\n        out = out || new Vector();\r\n        let cos = Math.cos(radian), sin = Math.sin(radian), dx = this.x - point.x, dy = this.y - point.y;\r\n        out.x = point.x + (dx * cos - dy * sin);\r\n        out.y = point.y + (dx * sin + dy * cos);\r\n        return out;\r\n    }\r\n    /**\r\n     * 求一个向量（点）按照direction方向，延长len长度后的坐标\r\n     * @param direction\r\n     * @param len\r\n     */\r\n    loc(direction, len, out) {\r\n        out = out || new Vector();\r\n        direction = direction.nol();\r\n        out.x = this.x + direction.x * len;\r\n        out.y = this.y + direction.y * len;\r\n        return out;\r\n    }\r\n}\r\nexports.Vector = Vector;\r\n;\r\nexports._tempVector1 = new Vector();\r\nexports._tempVector2 = new Vector();\r\nexports._tempVector3 = new Vector();\r\nexports._tempVector4 = new Vector();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWF0aC92ZWN0b3IudHM/ZGQxMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxjQUFjO0FBQ2QsTUFBYSxNQUFNO0lBSWYsWUFBWSxDQUFVLEVBQUUsQ0FBVTtRQUM5QixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRVgsSUFBRyxDQUFDLEtBQUssU0FBUyxJQUFJLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFDbkMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEI7SUFDTCxDQUFDO0lBRUQsaUNBQWlDO0lBRWpDOzs7O09BSUc7SUFDSCxHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVM7UUFDcEIsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWCxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNmLENBQUM7SUFFRDs7O09BR0c7SUFDSCxHQUFHLENBQUMsQ0FBUyxFQUFFLEdBQVk7UUFDdkIsR0FBRyxHQUFHLEdBQUcsSUFBSSxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBRTFCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXJCLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQUVEOzs7T0FHRztJQUNILEdBQUcsQ0FBQyxDQUFTLEVBQUUsR0FBWTtRQUN2QixHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksTUFBTSxFQUFFLENBQUM7UUFFMUIsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckIsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJ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QUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFFeEMsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILEdBQUcsQ0FBQyxTQUFpQixFQUFFLEdBQVcsRUFBRSxHQUFZO1FBQzVDLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUUxQixTQUFTLEdBQUcsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzVCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUNuQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFFbkMsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0NBQ0o7QUFoTkQsd0JBZ05DO0FBQUEsQ0FBQztBQUdXLG9CQUFZLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUM1QixvQkFBWSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFDNUIsb0JBQVksR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO0FBQzVCLG9CQUFZLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4vLyDkuoznu7TlkJHph48ge3gsIHl9XHJcbmV4cG9ydCBjbGFzcyBWZWN0b3Ige1xyXG4gICAgcHVibGljIHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeD86IG51bWJlciwgeT86IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IDA7XHJcbiAgICAgICAgdGhpcy55ID0gMDtcclxuXHJcbiAgICAgICAgaWYoeCAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldCh4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0t5pON5L2cLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5YC8XHJcbiAgICAgKiBAcGFyYW0geCBcclxuICAgICAqIEBwYXJhbSB5IFxyXG4gICAgICovXHJcbiAgICBzZXQoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnm7jliqBcclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBhZGQodjogVmVjdG9yLCBvdXQ/OiBWZWN0b3IpOiBWZWN0b3Ige1xyXG4gICAgICAgIG91dCA9IG91dCB8fCBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb3V0LnggPSB0aGlzLnggKyB2Lng7XHJcbiAgICAgICAgb3V0LnkgPSB0aGlzLnkgKyB2Lnk7XHJcblxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnm7jlh49cclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBzdWIodjogVmVjdG9yLCBvdXQ/OiBWZWN0b3IpOiBWZWN0b3Ige1xyXG4gICAgICAgIG91dCA9IG91dCB8fCBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICBcclxuICAgICAgICBvdXQueCA9IHRoaXMueCAtIHYueDtcclxuICAgICAgICBvdXQueSA9IHRoaXMueSAtIHYueTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeCueenr1xyXG4gICAgICogQHBhcmFtIHYgXHJcbiAgICAgKi9cclxuICAgIGRvdCh2OiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlj4nnp69cclxuICAgICAqIEBwYXJhbSB2IFxyXG4gICAgICovXHJcbiAgICBjcm8odjogVmVjdG9yKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdi55IC0gdi54ICogdGhpcy55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiO5qCH6YeP6L+b6KGM5Y+J56evXHJcbiAgICAgKiBAcGFyYW0gblxyXG4gICAgICovXHJcbiAgICBjcm9OdW0objogbnVtYmVyLCBvdXQ/OiBWZWN0b3IpOiBWZWN0b3Ige1xyXG4gICAgICAgIG91dCA9IG91dCB8fCBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb3V0LnggPSAtbiAqIHRoaXMueTtcclxuICAgICAgICBvdXQueSA9IG4gKiB0aGlzLng7XHJcblxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaKleW9sVxyXG4gICAgICogQHBhcmFtIHYgXHJcbiAgICAgKi9cclxuICAgIHBybyh2OiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvdCh2KSAvIHYubGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDms5XlkJFcclxuICAgICAqL1xyXG4gICAgbm9yKG91dD86IFZlY3Rvcik6IFZlY3RvciB7XHJcbiAgICAgICAgb3V0ID0gb3V0IHx8IG5ldyBWZWN0b3IoKTtcclxuICAgICAgICBcclxuICAgICAgICBvdXQueCA9IHRoaXMueTtcclxuICAgICAgICBvdXQueSA9IC10aGlzLng7XHJcblxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmsYLmqKFcclxuICAgICAqL1xyXG4gICAgbGVuKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguaHlwb3QodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bmz5pa55qih77yI6IqC55yB5rGC5bmz5pa55qC55pON5L2c77yJXHJcbiAgICAgKi9cclxuICAgIGxlbl9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWNleS9jeWMllxyXG4gICAgICovXHJcbiAgICBub2woKTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgbGVuID0gdGhpcy5sZW4oKTtcclxuXHJcbiAgICAgICAgaWYobGVuID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnggPSB0aGlzLnggLyBsZW47XHJcbiAgICAgICAgdGhpcy55ID0gdGhpcy55IC8gbGVuO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe8qeaUvlxyXG4gICAgICogQHBhcmFtIG5cclxuICAgICAqL1xyXG4gICAgc2NsKG46IG51bWJlciwgb3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIG91dC54ID0gbiAqIHRoaXMueDtcclxuICAgICAgICBvdXQueSA9IG4gKiB0aGlzLnk7XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWPjeWQkVxyXG4gICAgICovXHJcbiAgICBpbnYob3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIG91dC54ID0gLXRoaXMueDtcclxuICAgICAgICBvdXQueSA9IC10aGlzLnk7XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreS4pOWQkemHj+aYr+WQpuebuOetiVxyXG4gICAgICogQHBhcmFtIHYgXHJcbiAgICAgKi9cclxuICAgIGVxbCh2OiBWZWN0b3IpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ID09PSB2LnggJiYgdGhpcy55ID09PSB2Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmsYLkuKTlkJHph4/lpLnop5Io5byn5bqm5Yi2KVxyXG4gICAgICogQHBhcmFtIHYgXHJcbiAgICAgKi9cclxuICAgIGFuZyh2OiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmFjb3ModGhpcy5kb3QodikgLyAodGhpcy5sZW4oKSAqIHYubGVuKCkpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFi+mahuWQkemHj1xyXG4gICAgICovXHJcbiAgICBjb2woKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu5Xmn5Dngrnml4vovazlkJHph49cclxuICAgICAqIEBwYXJhbSByYWRpYW4g6KeS5bqm77yI5byn5bqm5Yi277yJXHJcbiAgICAgKiBAcGFyYW0gcG9pbnQg57uV55qE54K5XHJcbiAgICAgKi9cclxuICAgIHJvdChyYWRpYW46IG51bWJlciwgcG9pbnQ6IFZlY3Rvciwgb3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG5cclxuICAgICAgICBsZXQgY29zID0gTWF0aC5jb3MocmFkaWFuKSxcclxuICAgICAgICAgICAgc2luID0gTWF0aC5zaW4ocmFkaWFuKSxcclxuICAgICAgICAgICAgZHggPSB0aGlzLnggLSBwb2ludC54LFxyXG4gICAgICAgICAgICBkeSA9IHRoaXMueSAtIHBvaW50Lnk7XHJcblxyXG4gICAgICAgIG91dC54ID0gcG9pbnQueCArIChkeCAqIGNvcyAtIGR5ICogc2luKTtcclxuICAgICAgICBvdXQueSA9IHBvaW50LnkgKyAoZHggKiBzaW4gKyBkeSAqIGNvcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguS4gOS4quWQkemHj++8iOeCue+8ieaMieeFp2RpcmVjdGlvbuaWueWQke+8jOW7tumVv2xlbumVv+W6puWQjueahOWdkOagh1xyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvblxyXG4gICAgICogQHBhcmFtIGxlbiBcclxuICAgICAqL1xyXG4gICAgbG9jKGRpcmVjdGlvbjogVmVjdG9yLCBsZW46IG51bWJlciwgb3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IFZlY3RvcigpO1xyXG5cclxuICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24ubm9sKCk7XHJcbiAgICAgICAgb3V0LnggPSB0aGlzLnggKyBkaXJlY3Rpb24ueCAqIGxlbjtcclxuICAgICAgICBvdXQueSA9IHRoaXMueSArIGRpcmVjdGlvbi55ICogbGVuO1xyXG5cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBfdGVtcFZlY3RvcjEgPSBuZXcgVmVjdG9yKCk7XHJcbmV4cG9ydCBjb25zdCBfdGVtcFZlY3RvcjIgPSBuZXcgVmVjdG9yKCk7XHJcbmV4cG9ydCBjb25zdCBfdGVtcFZlY3RvcjMgPSBuZXcgVmVjdG9yKCk7XHJcbmV4cG9ydCBjb25zdCBfdGVtcFZlY3RvcjQgPSBuZXcgVmVjdG9yKCk7XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Util = void 0;\r\n// 常用工具函数\r\nexports.Util = {\r\n    _id: 0,\r\n    /**\r\n     * 生成一个id（整数类型）\r\n     */\r\n    id() {\r\n        return this._id++;\r\n    },\r\n    /**\r\n     * 根据两个id生成一个复合id（字符串类型）: 'id1.id2'\r\n     * @param id1\r\n     * @param id2\r\n     */\r\n    compositeId(id1, id2) {\r\n        if (id1 < id2) {\r\n            return id1 + '.' + id2;\r\n        }\r\n        else {\r\n            return id2 + '.' + id1;\r\n        }\r\n    },\r\n    /**\r\n     * 对象合并\r\n     * @param originOpt 源对象\r\n     * @param destOpt 目标对象\r\n     */\r\n    merge(originOpt, destOpt) {\r\n        if (!originOpt || !destOpt)\r\n            return;\r\n        for (let key in destOpt) {\r\n            if (typeof destOpt[key] === 'object' &&\r\n                !Array.isArray(destOpt[key]) &&\r\n                originOpt[key] !== null &&\r\n                originOpt[key] !== undefined) {\r\n                this.merge(originOpt[key], destOpt[key]);\r\n            }\r\n            else {\r\n                if ((destOpt[key] !== null || destOpt[key] !== undefined) && originOpt[key] !== undefined) {\r\n                    originOpt[key] = destOpt[key];\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 对象扩展\r\n     * @param originOpt 源对象\r\n     * @param extendOpt 扩展对象\r\n     */\r\n    extend(originOpt, extendOpt) {\r\n        if (!originOpt || !extendOpt)\r\n            return;\r\n        for (let key in extendOpt) {\r\n            if (typeof extendOpt[key] === 'object' &&\r\n                !Array.isArray(extendOpt[key]) &&\r\n                originOpt[key] !== null &&\r\n                originOpt[key] !== undefined) {\r\n                this.extend(originOpt[key], extendOpt[key]);\r\n            }\r\n            else {\r\n                if (extendOpt[key] !== null || extendOpt[key] !== undefined)\r\n                    originOpt[key] = extendOpt[key];\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 从列表移除某个元素\r\n     * @param list 列表\r\n     * @param item 要移除的元素\r\n     */\r\n    remove(list, item) {\r\n        list.splice(list.findIndex(i => i['id'] === item['id']), 1);\r\n    },\r\n    /**\r\n     * 角度转弧度\r\n     * @param angle 角度\r\n     */\r\n    angle2Radian(angle) {\r\n        return (angle / 180) * Math.PI;\r\n    },\r\n    /**\r\n     * 弧度转角度\r\n     * @param radian 弧度\r\n     */\r\n    radian2Angle(radian) {\r\n        return radian / Math.PI * 180;\r\n    },\r\n    /**\r\n     * 返回页面加载完毕开始到当前的时间（微秒级，performance api）\r\n     */\r\n    now() {\r\n        return window.performance.now();\r\n    },\r\n    /**\r\n     * 直接插入排序\r\n     * @param list 要排序的列表\r\n     * @param fn 比较函数\r\n     */\r\n    insertSort(list, fn) {\r\n        let len = list.length, i, j, temp;\r\n        for (i = 1; i < len; i++) {\r\n            temp = list[i];\r\n            for (j = i - 1; j >= 0 && fn(list[j], temp) > 0; j--) {\r\n                list[j + 1] = list[j];\r\n            }\r\n            list[j + 1] = temp;\r\n        }\r\n    },\r\n    /**\r\n     * 对给定的value，收窄在min和max范围内\r\n     * @param value\r\n     * @param min\r\n     * @param max\r\n     */\r\n    clamp(value, min, max) {\r\n        if (value < min)\r\n            return min;\r\n        if (value > max)\r\n            return max;\r\n        return value;\r\n    },\r\n    /**\r\n     * 返回一个数的正负号\r\n     * @param value\r\n     */\r\n    sign(value) {\r\n        return value < 0 ? -1 : 1;\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWwudHM/ZTg1YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFPQSxTQUFTO0FBQ0ksWUFBSSxHQUFHO0lBQ2hCLEdBQUcsRUFBRSxDQUFDO0lBRU47O09BRUc7SUFDSCxFQUFFO1FBQ0UsT0FBTyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxXQUFXLENBQUMsR0FBVyxFQUFFLEdBQVc7UUFDaEMsSUFBSSxHQUFHLEdBQUcsR0FBRyxFQUFFO1lBQ1gsT0FBTyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztTQUMxQjthQUFNO1lBQ0gsT0FBTyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztTQUMxQjtJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsS0FBSyxDQUFDLFNBQWlCLEVBQUUsT0FBZTtRQUNwQyxJQUFHLENBQUMsU0FBUyxJQUFJLENBQUMsT0FBTztZQUFFLE9BQU87UUFFbEMsS0FBSSxJQUFJLEdBQUcsSUFBSSxPQUFPLEVBQUU7WUFDcEIsSUFDSSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRO2dCQUNoQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM1QixTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSTtnQkFDdkIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVMsRUFDOUI7Z0JBQ0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDNUM7aUJBQ0k7Z0JBQ0QsSUFBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUMsS0FB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RztJQUNILElBQUksQ0FBQyxLQUFhO1FBQ2QsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlCLENBQUM7Q0FDSiIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG50eXBlIE9wdGlvbiA9IHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxufTtcclxuXHJcblxyXG4vLyDluLjnlKjlt6Xlhbflh73mlbBcclxuZXhwb3J0IGNvbnN0IFV0aWwgPSB7XHJcbiAgICBfaWQ6IDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/miJDkuIDkuKppZO+8iOaVtOaVsOexu+Wei++8iVxyXG4gICAgICovXHJcbiAgICBpZCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZCsrO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruS4pOS4qmlk55Sf5oiQ5LiA5Liq5aSN5ZCIaWTvvIjlrZfnrKbkuLLnsbvlnovvvIk6ICdpZDEuaWQyJ1xyXG4gICAgICogQHBhcmFtIGlkMSBcclxuICAgICAqIEBwYXJhbSBpZDIgXHJcbiAgICAgKi9cclxuICAgIGNvbXBvc2l0ZUlkKGlkMTogbnVtYmVyLCBpZDI6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGlkMSA8IGlkMikge1xyXG4gICAgICAgICAgICByZXR1cm4gaWQxICsgJy4nICsgaWQyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZDIgKyAnLicgKyBpZDE7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvueixoeWQiOW5tlxyXG4gICAgICogQHBhcmFtIG9yaWdpbk9wdCDmupDlr7nosaFcclxuICAgICAqIEBwYXJhbSBkZXN0T3B0IOebruagh+WvueixoVxyXG4gICAgICovXHJcbiAgICBtZXJnZShvcmlnaW5PcHQ6IE9wdGlvbiwgZGVzdE9wdDogT3B0aW9uKSB7XHJcbiAgICAgICAgaWYoIW9yaWdpbk9wdCB8fCAhZGVzdE9wdCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IobGV0IGtleSBpbiBkZXN0T3B0KSB7XHJcbiAgICAgICAgICAgIGlmKFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIGRlc3RPcHRba2V5XSA9PT0gJ29iamVjdCcgJiYgXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheShkZXN0T3B0W2tleV0pICYmIFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luT3B0W2tleV0gIT09IG51bGwgJiYgXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXJnZShvcmlnaW5PcHRba2V5XSwgZGVzdE9wdFtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKChkZXN0T3B0W2tleV0gIT09IG51bGwgfHwgZGVzdE9wdFtrZXldICE9PSB1bmRlZmluZWQpICYmIG9yaWdpbk9wdFtrZXldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSA9IGRlc3RPcHRba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7nosaHmianlsZVcclxuICAgICAqIEBwYXJhbSBvcmlnaW5PcHQg5rqQ5a+56LGhXHJcbiAgICAgKiBAcGFyYW0gZXh0ZW5kT3B0IOaJqeWxleWvueixoVxyXG4gICAgICovXHJcbiAgICBleHRlbmQob3JpZ2luT3B0OiBPcHRpb24sIGV4dGVuZE9wdDogT3B0aW9uKSB7XHJcbiAgICAgICAgaWYoIW9yaWdpbk9wdCB8fCAhZXh0ZW5kT3B0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvcihsZXQga2V5IGluIGV4dGVuZE9wdCkge1xyXG4gICAgICAgICAgICBpZihcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBleHRlbmRPcHRba2V5XSA9PT0gJ29iamVjdCcgJiYgXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheShleHRlbmRPcHRba2V5XSkgJiYgXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSAhPT0gbnVsbCAmJiBcclxuICAgICAgICAgICAgICAgIG9yaWdpbk9wdFtrZXldICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4dGVuZChvcmlnaW5PcHRba2V5XSwgZXh0ZW5kT3B0W2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoZXh0ZW5kT3B0W2tleV0gIT09IG51bGwgfHwgZXh0ZW5kT3B0W2tleV0gIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5PcHRba2V5XSA9IGV4dGVuZE9wdFtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOS7juWIl+ihqOenu+mZpOafkOS4quWFg+e0oFxyXG4gICAgICogQHBhcmFtIGxpc3Qg5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gaXRlbSDopoHnp7vpmaTnmoTlhYPntKBcclxuICAgICAqL1xyXG4gICAgcmVtb3ZlPFQ+KGxpc3Q6IFRbXSwgaXRlbTogVCkge1xyXG4gICAgICAgIGxpc3Quc3BsaWNlKGxpc3QuZmluZEluZGV4KGkgPT4gaVsnaWQnXSA9PT0gaXRlbVsnaWQnXSksIDEpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDop5LluqbovazlvKfluqZcclxuICAgICAqIEBwYXJhbSBhbmdsZSDop5LluqZcclxuICAgICAqL1xyXG4gICAgYW5nbGUyUmFkaWFuKGFuZ2xlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAoYW5nbGUvMTgwKSpNYXRoLlBJO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOW8p+W6pui9rOinkuW6plxyXG4gICAgICogQHBhcmFtIHJhZGlhbiDlvKfluqZcclxuICAgICAqL1xyXG4gICAgcmFkaWFuMkFuZ2xlKHJhZGlhbjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gcmFkaWFuL01hdGguUEkqMTgwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOi/lOWbnumhtemdouWKoOi9veWujOavleW8gOWni+WIsOW9k+WJjeeahOaXtumXtO+8iOW+ruenkue6p++8jHBlcmZvcm1hbmNlIGFwae+8iVxyXG4gICAgICovXHJcbiAgICBub3coKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOebtOaOpeaPkuWFpeaOkuW6j1xyXG4gICAgICogQHBhcmFtIGxpc3Qg6KaB5o6S5bqP55qE5YiX6KGoXHJcbiAgICAgKiBAcGFyYW0gZm4g5q+U6L6D5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIGluc2VydFNvcnQ8VD4obGlzdDogVFtdLCBmbjogKHByZXY6IFQsIGN1cjogVCkgPT4gbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGxlbiA9IGxpc3QubGVuZ3RoLFxyXG4gICAgICAgICAgICBpLCBqLCB0ZW1wO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDE7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB0ZW1wID0gbGlzdFtpXTtcclxuICAgICAgICAgICAgZm9yKGogPSBpIC0gMTsgaiA+PSAwICYmIGZuKGxpc3Rbal0sIHRlbXApID4gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0W2ogKyAxXSA9IGxpc3Rbal07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGlzdFtqICsgMV0gPSB0ZW1wO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7nnu5nlrprnmoR2YWx1Ze+8jOaUtueqhOWcqG1pbuWSjG1heOiMg+WbtOWGhVxyXG4gICAgICogQHBhcmFtIHZhbHVlIFxyXG4gICAgICogQHBhcmFtIG1pbiBcclxuICAgICAqIEBwYXJhbSBtYXggXHJcbiAgICAgKi9cclxuICAgIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHZhbHVlIDwgbWluKVxyXG4gICAgICAgICAgICByZXR1cm4gbWluO1xyXG4gICAgICAgIGlmICh2YWx1ZSA+IG1heClcclxuICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+U5Zue5LiA5Liq5pWw55qE5q2j6LSf5Y+3XHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgXHJcbiAgICAgKi9cclxuICAgIHNpZ24odmFsdWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgMCA/IC0xIDogMTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){"use strict";eval('\r\n/**\r\n * 刚体基类：所有刚体继承自Body\r\n */\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Body = exports.bodyType = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst util_1 = __webpack_require__(1);\r\n/**\r\n * 刚体类型\r\n * 圆形：0\r\n * 多边形：1\r\n * 复合体：2\r\n */\r\nvar bodyType;\r\n(function (bodyType) {\r\n    bodyType[bodyType["circle"] = 0] = "circle";\r\n    bodyType[bodyType["polygon"] = 1] = "polygon";\r\n    bodyType[bodyType["composite"] = 2] = "composite";\r\n})(bodyType = exports.bodyType || (exports.bodyType = {}));\r\n;\r\nclass Body {\r\n    constructor(opt, type) {\r\n        this.id = util_1.Util.id();\r\n        this.stringId = this.id.toString();\r\n        this.type = type;\r\n        this.engine = null;\r\n        this.data = null;\r\n        this.origin = new vector_1.Vector(0, 0);\r\n        this.position = new vector_1.Vector(0, 0);\r\n        this.rotation = 0;\r\n        this.velocity = new vector_1.Vector(0, 0);\r\n        this.angularVelocity = 0;\r\n        this.motion = 0;\r\n        this.mass = 10;\r\n        this.area = 0;\r\n        this.density = 1;\r\n        this.inertia = 0;\r\n        this.invInertia = 0;\r\n        this.force = new vector_1.Vector(0, 0);\r\n        this.torque = 0;\r\n        this.friction = 0.2;\r\n        this.restitution = 0.9;\r\n        this.static = false;\r\n        this.kinetic = false;\r\n        this.ignoreGravity = false;\r\n        this.sleeping = false;\r\n        this.sleepCounter = 0;\r\n        this.mask = 0;\r\n        this.bound = null;\r\n        this.jointed = false;\r\n        this.contactBodies = {};\r\n        this.parent = null;\r\n        this.parts = [this];\r\n        this.methods = {\r\n            beforeAppend: (body) => { },\r\n            afterAppend: (body) => { },\r\n            beforeRemove: (body) => { },\r\n            afterRemove: (body) => { },\r\n            sleepStart: (body) => { },\r\n            sleepEnd: (body) => { },\r\n            onCollide: (body) => { }\r\n        };\r\n        util_1.Util.extend(this, opt);\r\n        this.beforeInitializeProperties(opt);\r\n        this.area = this.getArea();\r\n        this.density = this.getDensity();\r\n        this.invMass = this.getInvMass();\r\n        this.position = this.getCentroid();\r\n        this.rotateCenter = this.position;\r\n        this.inertia = this.getInertia();\r\n        this.invInertia = this.getInvInertia();\r\n        this.axes = this.getAxes();\r\n        this.bound = this.getBound();\r\n        this.motion = this.velocity.len() ** 2 + this.angularVelocity ** 2;\r\n        this.afterInitializeProperties(opt);\r\n        // 用户一开始便设置了旋转的情况\r\n        if (this.rotation) {\r\n            this.rotate(this.rotation);\r\n        }\r\n        // 设置渲染函数\r\n        this.setRender(() => { });\r\n    }\r\n    /**\r\n     * 初始化属性前\r\n     */\r\n    beforeInitializeProperties(opt) { }\r\n    /**\r\n     * 初始化属性后\r\n     * @param opt\r\n     */\r\n    afterInitializeProperties(opt) { }\r\n    // ------------------------------------------- getter---------------------------------------\r\n    /**\r\n     * 计算质量倒数\r\n     */\r\n    getInvMass() {\r\n        return (this.mass === 0 || this.static || this.kinetic) ? 0 : 1 / this.mass;\r\n    }\r\n    /**\r\n     * 计算转动惯量倒数\r\n     */\r\n    getInvInertia() {\r\n        return (this.inertia === 0 || this.static || this.kinetic) ? 0 : 1 / this.inertia;\r\n    }\r\n    /**\r\n     * 计算密度\r\n     */\r\n    getDensity() {\r\n        return this.mass / this.area;\r\n    }\r\n    /**\r\n     * 计算面积\r\n     * @override\r\n     */\r\n    getArea() {\r\n        return 1;\r\n    }\r\n    /**\r\n     * 计算质心\r\n     * @override\r\n     */\r\n    getCentroid() {\r\n        return null;\r\n    }\r\n    /**\r\n     * 计算转动惯量\r\n     * @override\r\n     * @param position 转动中心\r\n     */\r\n    getInertia(position) {\r\n        return 1;\r\n    }\r\n    /**\r\n     * 获取轴\r\n     */\r\n    getAxes() {\r\n        return [];\r\n    }\r\n    /**\r\n     * 获取包围盒\r\n     */\r\n    getBound() {\r\n        return null;\r\n    }\r\n    /**\r\n     * 获取刚体类型\r\n     */\r\n    getBodyType() {\r\n        if (this.type === 0) {\r\n            return \'circle\';\r\n        }\r\n        else if (this.type === 1) {\r\n            return \'polygon\';\r\n        }\r\n        else {\r\n            return \'composite\';\r\n        }\r\n    }\r\n    /**\r\n     * 获取复合刚体的子刚体\r\n     */\r\n    getChildren() {\r\n        return this.parts[0] !== this ? this.parts : null;\r\n    }\r\n    // ------------------------------------------- setter ---------------------------------------\r\n    /**\r\n     * 设置线速度\r\n     * @param x\r\n     * @param y\r\n     */\r\n    setVelocity(x, y) {\r\n        this.velocity.x = x;\r\n        this.velocity.y = y;\r\n    }\r\n    /**\r\n     * 设置角速度\r\n     * @param angularVelocity\r\n     */\r\n    setAngularVelocity(angularVelocity) {\r\n        this.angularVelocity = angularVelocity;\r\n    }\r\n    /**\r\n     * 设置位置\r\n     * @param x\r\n     * @param y\r\n     */\r\n    setPosition(x, y) {\r\n        let dx = x - this.position.x, dy = y - this.position.y;\r\n        this.position.x += dx;\r\n        this.position.y += dy;\r\n        this.translate(dx, dy);\r\n    }\r\n    /**\r\n     * 设置旋转角度\r\n     * @param rotation\r\n     */\r\n    setRotation(rotation) {\r\n        this.rotation = rotation;\r\n        this.rotate(rotation);\r\n    }\r\n    /**\r\n     * 设置碰撞掩码\r\n     * @param mask\r\n     */\r\n    setMask(mask) {\r\n        this.mask = mask;\r\n    }\r\n    /**\r\n     * 设置是否静态\r\n     * @param static\r\n     */\r\n    setStatic(sta) {\r\n        this.static = sta;\r\n    }\r\n    /**\r\n     * 设置是否运动\r\n     * @param kin\r\n     */\r\n    setKinetic(kin) {\r\n        this.kinetic = kin;\r\n    }\r\n    /**\r\n     * 设置用户想要携带的信息数据\r\n     * @param data 数据\r\n     */\r\n    setData(data) {\r\n        if (data !== null && data !== undefined) {\r\n            this.data = data;\r\n        }\r\n    }\r\n    /**\r\n     * 设置渲染函数\r\n     * @param fn\r\n     */\r\n    setRender(fn) {\r\n        if (fn && typeof fn === \'function\')\r\n            this.render = fn;\r\n    }\r\n    /**\r\n     * 是否包含某个顶点\r\n     * @override\r\n     * @param x\r\n     * @param y\r\n     */\r\n    isContains(x, y) {\r\n        return false;\r\n    }\r\n    // ------------------------------------------- 内部方法 ----------------------------------------\r\n    /**\r\n     * 位移刚体\r\n     * @override\r\n     * @param dx\r\n     * @param dy\r\n     */\r\n    translate(dx, dy) { }\r\n    /**\r\n     * 旋转刚体\r\n     * @override\r\n     * @param angle 角度\r\n     */\r\n    rotate(angle) { }\r\n    /**\r\n     * 应用冲量\r\n     * @param impulse 冲量\r\n     * @param offset 作用点（本地坐标系）\r\n     * @param dt 步长\r\n     */\r\n    applyImpulse(impulse, offset) {\r\n        if (this.static || this.kinetic || this.sleeping)\r\n            return;\r\n        this.velocity.x += impulse.x * this.invMass;\r\n        this.velocity.y += impulse.y * this.invMass;\r\n        this.angularVelocity += this.invInertia * offset.cro(impulse);\r\n    }\r\n    /**\r\n     * 应用力\r\n     * @param force 力\r\n     * @param offset 作用点（本地坐标系）\r\n     */\r\n    applyForce(force, offset) {\r\n        if (this.static || this.kinetic)\r\n            return;\r\n        this.force.x += force.x;\r\n        this.force.y += force.y;\r\n        if (offset !== undefined) {\r\n            this.torque += offset.cro(this.force);\r\n        }\r\n    }\r\n    /**\r\n     * 积分受力\r\n     * @param dt\r\n     */\r\n    integrateForces(dt) {\r\n        if (this.static || this.kinetic || this.sleeping) {\r\n            return;\r\n        }\r\n        let airFriction = (1 - this.engine.airFriction / 20);\r\n        this.velocity.x = airFriction * this.velocity.x;\r\n        this.velocity.y = airFriction * this.velocity.y;\r\n        this.angularVelocity = airFriction * this.angularVelocity;\r\n        this.velocity.x += this.force.x * this.invMass * dt;\r\n        this.velocity.y += this.force.y * this.invMass * dt;\r\n        this.angularVelocity += this.torque * this.invInertia * dt;\r\n    }\r\n    /**\r\n     * 积分速度\r\n     * - 使用半隐式欧拉积分\r\n     * @param dt\r\n     */\r\n    integrateVelocities(dt) {\r\n        if (this.static || this.sleeping) {\r\n            return;\r\n        }\r\n        let dx = dt * this.velocity.x, dy = dt * this.velocity.y, dr = dt * this.angularVelocity;\r\n        this.position.x += dx;\r\n        this.position.y += dy;\r\n        this.rotation += dr;\r\n        this.rotation = this.rotation % (Math.PI * 2);\r\n        //位移刚体\r\n        this.translate(dx, dy);\r\n        // 旋转刚体\r\n        if (dr !== 0) {\r\n            this.rotate(dr);\r\n        }\r\n        // 更新标量速度\r\n        let speed = Math.hypot(dx, dy), angularSpeed = Math.abs(dr);\r\n        //更新动量\r\n        this.motion = speed * speed + angularSpeed * angularSpeed;\r\n    }\r\n    /**\r\n     * 请客当前时刻受力\r\n     */\r\n    clearForce() {\r\n        this.force.x = 0;\r\n        this.force.y = 0;\r\n        this.torque = 0;\r\n    }\r\n    // ------------------------------------------------ hook ------------------------------\r\n    /**\r\n     * 绑定沟子事件\r\n     * @param eventName\r\n     * @param fn\r\n     */\r\n    on(eventName, fn) {\r\n        this.methods[eventName] = fn;\r\n    }\r\n    beforeAppend(engine) {\r\n        this.engine = engine;\r\n        if (this.static) {\r\n            this.sleeping = true;\r\n            this.engine.sleeping.sleep(this);\r\n        }\r\n        this.methods.beforeAppend(this);\r\n    }\r\n    afterAppend() { this.methods.afterAppend(this); }\r\n    beforeRemove() {\r\n        let sleeping = this.engine.sleeping, keys = Object.keys(this.contactBodies), body;\r\n        // 在删除一个刚体前，唤醒与之有碰撞的刚体\r\n        for (let i = 0; i < keys.length; i++) {\r\n            body = this.contactBodies[keys[i]];\r\n            body.sleeping && sleeping.wake(body);\r\n        }\r\n        this.methods.beforeRemove(this);\r\n    }\r\n    afterRemove() { this.methods.afterRemove(this); }\r\n    sleepStart() { this.methods.sleepStart(this); }\r\n    sleepEnd() { this.methods.sleepEnd(this); }\r\n    onCollide(target) {\r\n        this.contactBodies[target.stringId] = target;\r\n        // 触发碰撞钩子\r\n        this.methods.onCollide(this);\r\n    }\r\n}\r\nexports.Body = Body;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9ib2R5LnRzPzdkMzUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFFSCx3Q0FBc0Q7QUFFdEQsc0NBQXNDO0FBT3RDOzs7OztHQUtHO0FBQ0gsSUFBWSxRQUlYO0FBSkQsV0FBWSxRQUFRO0lBQ2hCLDJDQUFVO0lBQ1YsNkNBQVc7SUFDWCxpREFBYTtBQUNqQixDQUFDLEVBSlcsUUFBUSxHQUFSLGdCQUFRLEtBQVIsZ0JBQVEsUUFJbkI7QUFBQSxDQUFDO0FBcURGLE1BQWEsSUFBSTtJQTRFYixZQUFZLEdBQVksRUFBRSxJQUFZO1FBQ2xDLElBQUksQ0FBQyxFQUFFLEdBQUcsV0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFD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QUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQy9CLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFDdEMsSUFBVSxDQUFDO1FBRWYsc0JBQXNCO1FBQ3RCLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN4QztRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxXQUFXLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWpELFVBQVUsS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFL0MsUUFBUSxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUUzQyxTQUFTLENBQUMsTUFBWTtRQUNsQixJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDN0MsU0FBUztRQUNULElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pDLENBQUM7Q0FDSjtBQTllRCxvQkE4ZUMiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDliJrkvZPln7rnsbvvvJrmiYDmnInliJrkvZPnu6fmib/oh6pCb2R5XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yLCBfdGVtcFZlY3RvcjEgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgQm91bmQgfSBmcm9tIFwiLi4vY29tbW9uL2JvdW5kXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSBcIi4uL2NvcmUvZW5naW5lXCI7XHJcbmltcG9ydCB7IEF4aXMgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuICog5Yia5L2T57G75Z6LXHJcbiAqIOWchuW9ou+8mjBcclxuICog5aSa6L655b2i77yaMVxyXG4gKiDlpI3lkIjkvZPvvJoyXHJcbiAqL1xyXG5leHBvcnQgZW51bSBib2R5VHlwZSB7XHJcbiAgICBjaXJjbGUgPSAwLFxyXG4gICAgcG9seWdvbiA9IDEsXHJcbiAgICBjb21wb3NpdGUgPSAyXHJcbn07XHJcblxyXG5cclxuXHJcblxyXG4vLyBib2R56YWN572u5o6l5Y+jXHJcbmV4cG9ydCBpbnRlcmZhY2UgQm9keU9wdCB7XHJcbiAgICAvLyDlrprkvY3ljp/ngrlcclxuICAgIG9yaWdpbjogVmVjdG9yO1xyXG4gICAgLy8g5peL6L2s6KeS5bqmXHJcbiAgICByb3RhdGlvbj86IG51bWJlcjtcclxuXHJcbiAgICAvLyDliJ3lp4vpgJ/luqZcclxuICAgIHZlbG9jaXR5PzogVmVjdG9yO1xyXG4gICAgLy8g5Yid5aeL6KeS6YCf5bqmXHJcbiAgICBhbmd1bGFyVmVsb2NpdHk/OiBudW1iZXI7XHJcbiAgICAvLyDotKjph49cclxuICAgIG1hc3M/OiBudW1iZXI7XHJcbiAgICAvLyDliqjmkanmk6bliptcclxuICAgIGR5bmFtaWNGcmljdGlvbj86IG51bWJlcjtcclxuICAgIC8vIOmdmeaRqeaTpuWKm1xyXG4gICAgc3RhdGljRnJpY3Rpb24/OiBudW1iZXI7XHJcbiAgICAvLyDmgaLlpI3ns7vmlbBcclxuICAgIHJlc3RpdHV0aW9uPzogbnVtYmVyO1xyXG4gICAgLy8g57qm5p2fXHJcbiAgICBjb25zdHJhaW50PzogVmVjdG9yO1xyXG4gICAgLy8g5piv5ZCm5Zu65a6aXHJcbiAgICBmaXhlZD86IGJvb2xlYW47XHJcbiAgICAvLyDmkLrluKbnmoTmlbDmja5cclxuICAgIGRhdGE/OiBhbnk7XHJcbiAgICAvLyDnorDmkp7noIFcclxuICAgIG1hc2s/OiBudW1iZXI7XHJcblxyXG4gICAgLy8g5pa55rOVXHJcbiAgICBtZXRob2RzPzoge1xyXG4gICAgICAgIC8vIOaMgui9veWJjVxyXG4gICAgICAgIGJlZm9yZUFwcGVuZDogKGJvZHk6IEJvZHkpID0+IHZvaWQ7XHJcbiAgICAgICAgLy8g5oyC6L295ZCOXHJcbiAgICAgICAgYWZ0ZXJBcHBlbmQ6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgICAgIC8vIOenu+mZpOWJjVxyXG4gICAgICAgIGJlZm9yZVJlbW92ZTogKGJvZHk6IEJvZHkpID0+IHZvaWQ7XHJcbiAgICAgICAgLy8g56e76Zmk5ZCOXHJcbiAgICAgICAgYWZ0ZXJSZW1vdmU6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgICAgIC8vIOW8gOWni+S8keecoFxyXG4gICAgICAgIHNsZWVwU3RhcnQ6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgICAgIC8vIOe7k+adn+S8keecoFxyXG4gICAgICAgIHNsZWVwRW5kOiAoYm9keTogQm9keSkgPT4gdm9pZDtcclxuICAgICAgICAvLyDlj5HnlJ/kuobnorDmkp5cclxuICAgICAgICBvbkNvbGxpZGU6IChib2R5OiBCb2R5KSA9PiB2b2lkO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEJvZHkge1xyXG4gICAgLy8gaWRcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICAvLyDlrZfnrKbkuLLnmoRpZFxyXG4gICAgc3RyaW5nSWQ6IHN0cmluZztcclxuICAgIC8vIOexu+Wei1xyXG4gICAgdHlwZTogbnVtYmVyO1xyXG4gICAgLy8g5byV5pOO5a6e5L6LXHJcbiAgICBlbmdpbmU6IEVuZ2luZTtcclxuICAgIC8vIOaQuuW4pueahOS7u+aEj+S/oeaBr1xyXG4gICAgZGF0YTogYW55O1xyXG4gICAgLy8g5pys5Zyw5Z2Q5qCH5Y6f54K5XHJcbiAgICBvcmlnaW46IFZlY3RvcjtcclxuICAgIC8vIOS9jee9rlxyXG4gICAgcG9zaXRpb246IFZlY3RvcjsgICBcclxuICAgIC8vIOaWueWQkSBcclxuICAgIHJvdGF0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgLy8g6YCf5bqmXHJcbiAgICB2ZWxvY2l0eTogVmVjdG9yO1xyXG4gICAgLy8g6KeS6YCf5bqmXHJcbiAgICBhbmd1bGFyVmVsb2NpdHk6IG51bWJlcjtcclxuICAgIC8vIOWKqOmHj1xyXG4gICAgbW90aW9uOiBudW1iZXI7XHJcblxyXG4gICAgLy8g6LSo6YePXHJcbiAgICBtYXNzOiBudW1iZXI7XHJcbiAgICAvLyDotKjph4/lgJLmlbBcclxuICAgIGludk1hc3M6IG51bWJlcjtcclxuICAgIC8vIOmdouenr1xyXG4gICAgYXJlYTogbnVtYmVyO1xyXG4gICAgLy8g5a+G5bqmXHJcbiAgICBkZW5zaXR5OiBudW1iZXI7XHJcbiAgICAvLyDovazliqjmg6/ph49cclxuICAgIGluZXJ0aWE6IG51bWJlcjtcclxuICAgIC8vIOi9rOWKqOaDr+mHj+WAkuaVsFxyXG4gICAgaW52SW5lcnRpYTogbnVtYmVyO1xyXG4gICAgLy8g5L2c55So5YqbXHJcbiAgICBmb3JjZTogVmVjdG9yO1xyXG4gICAgLy8g5omt55+pXHJcbiAgICB0b3JxdWU6IG51bWJlcjtcclxuICAgIC8vIOaRqeaTpuezu+aVsFxyXG4gICAgZnJpY3Rpb246IG51bWJlcjtcclxuICAgIC8vIOaBouWkjeezu+aVsFxyXG4gICAgcmVzdGl0dXRpb246IG51bWJlcjtcclxuICAgIC8vIOmdmeaAgeeahFxyXG4gICAgc3RhdGljOiBib29sZWFuO1xyXG4gICAgLy8g6L+Q5Yqo55qEXHJcbiAgICBraW5ldGljOiBib29sZWFuO1xyXG4gICAgLy8g5peg6KeG6YeN5YqbXHJcbiAgICBpZ25vcmVHcmF2aXR5OiBib29sZWFuO1xyXG4gICAgLy8g5LyR55ygXHJcbiAgICBzbGVlcGluZzogYm9vbGVhbjtcclxuICAgIC8vIOS8keecoOiuoeaVsOWZqFxyXG4gICAgc2xlZXBDb3VudGVyOiBudW1iZXI7XHJcbiAgICAvLyDnorDmkp7noIFcclxuICAgIG1hc2s6IG51bWJlcjtcclxuICAgIC8vIOi9tFxyXG4gICAgYXhlczogQXhpc1tdO1xyXG4gICAgLy8g5peL6L2s5Lit5b+DXHJcbiAgICByb3RhdGVDZW50ZXI6IFZlY3RvcjtcclxuICAgIC8vIOeItuWbvuW9olxyXG4gICAgcGFyZW50OiBCb2R5O1xyXG4gICAgLy8g5piv5ZCm6KKr5Yqg5YWl5YWz6IqCXHJcbiAgICBqb2ludGVkOiBib29sZWFuO1xyXG4gICAgLy8g5YyF5Zu055uSXHJcbiAgICBib3VuZDogQm91bmQ7XHJcbiAgICAvLyDlrZDlm77lvaJcclxuICAgIHBhcnRzOiBCb2R5W107XHJcbiAgICAvLyDkuI7or6XliJrkvZPnorDmkp7nmoTliJrkvZPliJfooahcclxuICAgIGNvbnRhY3RCb2RpZXM6IHsgW2tleTogc3RyaW5nXTogQm9keSB9O1xyXG4gICAgLy8g5pa55rOVXHJcbiAgICBtZXRob2RzOiBCb2R5T3B0WydtZXRob2RzJ107XHJcbiAgICAvLyDmuLLmn5Plh73mlbBcclxuICAgIHJlbmRlcjogRnVuY3Rpb247XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBCb2R5T3B0LCB0eXBlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmlkID0gVXRpbC5pZCgpO1xyXG4gICAgICAgIHRoaXMuc3RyaW5nSWQgPSB0aGlzLmlkLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmVuZ2luZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9yaWdpbiA9IG5ldyBWZWN0b3IoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWN0b3IoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSAwO1xyXG4gICAgICAgIHRoaXMubW90aW9uID0gMDtcclxuICAgICAgICB0aGlzLm1hc3MgPSAxMDtcclxuICAgICAgICB0aGlzLmFyZWEgPSAwO1xyXG4gICAgICAgIHRoaXMuZGVuc2l0eSA9IDE7XHJcbiAgICAgICAgdGhpcy5pbmVydGlhID0gMDtcclxuICAgICAgICB0aGlzLmludkluZXJ0aWEgPSAwO1xyXG4gICAgICAgIHRoaXMuZm9yY2UgPSBuZXcgVmVjdG9yKDAsIDApO1xyXG4gICAgICAgIHRoaXMudG9ycXVlID0gMDtcclxuICAgICAgICB0aGlzLmZyaWN0aW9uID0gMC4yO1xyXG4gICAgICAgIHRoaXMucmVzdGl0dXRpb24gPSAwLjk7XHJcbiAgICAgICAgdGhpcy5zdGF0aWMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmtpbmV0aWMgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuaWdub3JlR3Jhdml0eSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2xlZXBpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNsZWVwQ291bnRlciA9IDA7XHJcbiAgICAgICAgdGhpcy5tYXNrID0gMDtcclxuICAgICAgICB0aGlzLmJvdW5kID0gbnVsbDtcclxuICAgICAgICB0aGlzLmpvaW50ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnRhY3RCb2RpZXMgPSB7fTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wYXJ0cyA9IFt0aGlzXTtcclxuXHJcbiAgICAgICAgdGhpcy5tZXRob2RzID0ge1xyXG4gICAgICAgICAgICBiZWZvcmVBcHBlbmQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgYWZ0ZXJBcHBlbmQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgYmVmb3JlUmVtb3ZlOiAoYm9keTogQm9keSkgPT4ge30sXHJcbiAgICAgICAgICAgIGFmdGVyUmVtb3ZlOiAoYm9keTogQm9keSkgPT4ge30sXHJcbiAgICAgICAgICAgIHNsZWVwU3RhcnQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgc2xlZXBFbmQ6IChib2R5OiBCb2R5KSA9PiB7fSxcclxuICAgICAgICAgICAgb25Db2xsaWRlOiAoYm9keTogQm9keSkgPT4ge31cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFV0aWwuZXh0ZW5kKHRoaXMsIG9wdCk7XHJcblxyXG4gICAgICAgIHRoaXMuYmVmb3JlSW5pdGlhbGl6ZVByb3BlcnRpZXMob3B0KTtcclxuICAgICAgICB0aGlzLmFyZWEgPSB0aGlzLmdldEFyZWEoKTtcclxuICAgICAgICB0aGlzLmRlbnNpdHkgPSB0aGlzLmdldERlbnNpdHkoKTtcclxuICAgICAgICB0aGlzLmludk1hc3MgPSB0aGlzLmdldEludk1hc3MoKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5nZXRDZW50cm9pZCgpO1xyXG4gICAgICAgIHRoaXMucm90YXRlQ2VudGVyID0gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmluZXJ0aWEgPSB0aGlzLmdldEluZXJ0aWEoKTtcclxuICAgICAgICB0aGlzLmludkluZXJ0aWEgPSB0aGlzLmdldEludkluZXJ0aWEoKTtcclxuICAgICAgICB0aGlzLmF4ZXMgPSB0aGlzLmdldEF4ZXMoKTtcclxuICAgICAgICB0aGlzLmJvdW5kID0gdGhpcy5nZXRCb3VuZCgpO1xyXG4gICAgICAgIHRoaXMubW90aW9uID0gdGhpcy52ZWxvY2l0eS5sZW4oKSAqKiAyICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkgKiogMjtcclxuICAgICAgICB0aGlzLmFmdGVySW5pdGlhbGl6ZVByb3BlcnRpZXMob3B0KTtcclxuXHJcbiAgICAgICAgLy8g55So5oi35LiA5byA5aeL5L6/6K6+572u5LqG5peL6L2s55qE5oOF5Ya1XHJcbiAgICAgICAgaWYodGhpcy5yb3RhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiuvue9rua4suafk+WHveaVsFxyXG4gICAgICAgIHRoaXMuc2V0UmVuZGVyKCgpID0+IHt9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMluWxnuaAp+WJjVxyXG4gICAgICovXHJcbiAgICBiZWZvcmVJbml0aWFsaXplUHJvcGVydGllcyhvcHQ6IGFueSkge31cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIneWni+WMluWxnuaAp+WQjlxyXG4gICAgICogQHBhcmFtIG9wdCBcclxuICAgICAqL1xyXG4gICAgYWZ0ZXJJbml0aWFsaXplUHJvcGVydGllcyhvcHQ6IGFueSkge31cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGdldHRlci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X6LSo6YeP5YCS5pWwXHJcbiAgICAgKi9cclxuICAgIGdldEludk1hc3MoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubWFzcyA9PT0gMCB8fCB0aGlzLnN0YXRpYyB8fCB0aGlzLmtpbmV0aWMpPyAwOiAxIC8gdGhpcy5tYXNzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X6L2s5Yqo5oOv6YeP5YCS5pWwXHJcbiAgICAgKi9cclxuICAgIGdldEludkluZXJ0aWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuaW5lcnRpYSA9PT0gMCB8fCB0aGlzLnN0YXRpYyB8fCB0aGlzLmtpbmV0aWMpPyAwOiAxIC8gdGhpcy5pbmVydGlhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5a+G5bqmXHJcbiAgICAgKi9cclxuICAgIGdldERlbnNpdHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXNzIC8gdGhpcy5hcmVhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X6Z2i56evXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgZ2V0QXJlYSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X6LSo5b+DXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgZ2V0Q2VudHJvaWQoKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+i9rOWKqOaDr+mHj1xyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb24g6L2s5Yqo5Lit5b+DXHJcbiAgICAgKi9cclxuICAgIGdldEluZXJ0aWEocG9zaXRpb24/OiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6L20XHJcbiAgICAgKi9cclxuICAgIGdldEF4ZXMoKTogQXhpc1tdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bljIXlm7Tnm5JcclxuICAgICAqL1xyXG4gICAgZ2V0Qm91bmQoKTogQm91bmQge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5Yia5L2T57G75Z6LXHJcbiAgICAgKi9cclxuICAgIGdldEJvZHlUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYodGhpcy50eXBlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnY2lyY2xlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLnR5cGUgPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdwb2x5Z29uJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnY29tcG9zaXRlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blpI3lkIjliJrkvZPnmoTlrZDliJrkvZNcclxuICAgICAqL1xyXG4gICAgZ2V0Q2hpbGRyZW4oKTogQm9keVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0c1swXSAhPT0gdGhpcz8gdGhpcy5wYXJ0czogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHNldHRlciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7nur/pgJ/luqZcclxuICAgICAqIEBwYXJhbSB4IFxyXG4gICAgICogQHBhcmFtIHkgXHJcbiAgICAgKi9cclxuICAgIHNldFZlbG9jaXR5KHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eS54ID0geDtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u6KeS6YCf5bqmXHJcbiAgICAgKiBAcGFyYW0gYW5ndWxhclZlbG9jaXR5IFxyXG4gICAgICovXHJcbiAgICBzZXRBbmd1bGFyVmVsb2NpdHkoYW5ndWxhclZlbG9jaXR5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IGFuZ3VsYXJWZWxvY2l0eTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruS9jee9rlxyXG4gICAgICogQHBhcmFtIHggXHJcbiAgICAgKiBAcGFyYW0geSBcclxuICAgICAqL1xyXG4gICAgc2V0UG9zaXRpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgZHggPSB4IC0gdGhpcy5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgICBkeSA9IHkgLSB0aGlzLnBvc2l0aW9uLnk7XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueCArPSBkeDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gZHk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlKGR4LCBkeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7ml4vovazop5LluqZcclxuICAgICAqIEBwYXJhbSByb3RhdGlvbiBcclxuICAgICAqL1xyXG4gICAgc2V0Um90YXRpb24ocm90YXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcclxuICAgICAgICB0aGlzLnJvdGF0ZShyb3RhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7norDmkp7mjqnnoIFcclxuICAgICAqIEBwYXJhbSBtYXNrIFxyXG4gICAgICovXHJcbiAgICBzZXRNYXNrKG1hc2s6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubWFzayA9IG1hc2s7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7mmK/lkKbpnZnmgIEgXHJcbiAgICAgKiBAcGFyYW0gc3RhdGljIFxyXG4gICAgICovXHJcbiAgICBzZXRTdGF0aWMoc3RhOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0aWMgPSBzdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7mmK/lkKbov5DliqhcclxuICAgICAqIEBwYXJhbSBraW5cclxuICAgICAqL1xyXG4gICAgc2V0S2luZXRpYyhraW46IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmtpbmV0aWMgPSBraW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7nlKjmiLfmg7PopoHmkLrluKbnmoTkv6Hmga/mlbDmja5cclxuICAgICAqIEBwYXJhbSBkYXRhIOaVsOaNrlxyXG4gICAgICovXHJcbiAgICBzZXREYXRhKGRhdGE6IGFueSkge1xyXG4gICAgICAgIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5riy5p+T5Ye95pWwXHJcbiAgICAgKiBAcGFyYW0gZm4gXHJcbiAgICAgKi9cclxuICAgIHNldFJlbmRlcihmbjogKGJvZHk6IEJvZHksIGR0OiBudW1iZXIsIHRpbWVTdGFtcDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYoZm4gJiYgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB0aGlzLnJlbmRlciA9IGZuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCm5YyF5ZCr5p+Q5Liq6aG254K5XHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqIEBwYXJhbSB4IFxyXG4gICAgICogQHBhcmFtIHkgXHJcbiAgICAgKi9cclxuICAgIGlzQ29udGFpbnMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSDlhoXpg6jmlrnms5UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L2N56e75Yia5L2TXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqIEBwYXJhbSBkeFxyXG4gICAgICogQHBhcmFtIGR5XHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZShkeDogbnVtYmVyLCBkeTogbnVtYmVyKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5peL6L2s5Yia5L2TXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqIEBwYXJhbSBhbmdsZSDop5LluqZcclxuICAgICAqL1xyXG4gICAgcm90YXRlKGFuZ2xlOiBudW1iZXIpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlupTnlKjlhrLph49cclxuICAgICAqIEBwYXJhbSBpbXB1bHNlIOWGsumHj1xyXG4gICAgICogQHBhcmFtIG9mZnNldCDkvZznlKjngrnvvIjmnKzlnLDlnZDmoIfns7vvvIlcclxuICAgICAqIEBwYXJhbSBkdCDmraXplb9cclxuICAgICAqL1xyXG4gICAgYXBwbHlJbXB1bHNlKGltcHVsc2U6IFZlY3Rvciwgb2Zmc2V0OiBWZWN0b3IpIHtcclxuICAgICAgICBpZih0aGlzLnN0YXRpYyB8fCB0aGlzLmtpbmV0aWMgfHwgdGhpcy5zbGVlcGluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnggKz0gaW1wdWxzZS54ICogdGhpcy5pbnZNYXNzO1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkueSArPSBpbXB1bHNlLnkgKiB0aGlzLmludk1hc3M7XHJcbiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgKz0gdGhpcy5pbnZJbmVydGlhICogb2Zmc2V0LmNybyhpbXB1bHNlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlupTnlKjliptcclxuICAgICAqIEBwYXJhbSBmb3JjZSDliptcclxuICAgICAqIEBwYXJhbSBvZmZzZXQg5L2c55So54K577yI5pys5Zyw5Z2Q5qCH57O777yJXHJcbiAgICAgKi9cclxuICAgIGFwcGx5Rm9yY2UoZm9yY2U6IFZlY3Rvciwgb2Zmc2V0PzogVmVjdG9yKSB7XHJcbiAgICAgICAgaWYodGhpcy5zdGF0aWMgfHwgdGhpcy5raW5ldGljKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuZm9yY2UueCArPSBmb3JjZS54O1xyXG4gICAgICAgIHRoaXMuZm9yY2UueSArPSBmb3JjZS55O1xyXG5cclxuICAgICAgICBpZihvZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvcnF1ZSArPSBvZmZzZXQuY3JvKHRoaXMuZm9yY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDnp6/liIblj5fliptcclxuICAgICAqIEBwYXJhbSBkdCBcclxuICAgICAqL1xyXG4gICAgaW50ZWdyYXRlRm9yY2VzKGR0OiBudW1iZXIpIHtcclxuICAgICAgICBpZih0aGlzLnN0YXRpYyB8fCB0aGlzLmtpbmV0aWMgfHwgdGhpcy5zbGVlcGluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYWlyRnJpY3Rpb24gPSAoMSAtIHRoaXMuZW5naW5lLmFpckZyaWN0aW9uIC8gMjApO1xyXG5cclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnggPSBhaXJGcmljdGlvbiAqIHRoaXMudmVsb2NpdHkueDtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgPSBhaXJGcmljdGlvbiAqIHRoaXMudmVsb2NpdHkueTtcclxuICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IGFpckZyaWN0aW9uICogdGhpcy5hbmd1bGFyVmVsb2NpdHk7XHJcblxyXG4gICAgICAgIHRoaXMudmVsb2NpdHkueCArPSB0aGlzLmZvcmNlLnggKiB0aGlzLmludk1hc3MgKiBkdDtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKz0gdGhpcy5mb3JjZS55ICogdGhpcy5pbnZNYXNzICogZHQ7XHJcbiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgKz0gdGhpcy50b3JxdWUgKiB0aGlzLmludkluZXJ0aWEgKiBkdDsgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnp6/liIbpgJ/luqZcclxuICAgICAqIC0g5L2/55So5Y2K6ZqQ5byP5qyn5ouJ56ev5YiGXHJcbiAgICAgKiBAcGFyYW0gZHQgXHJcbiAgICAgKi9cclxuICAgIGludGVncmF0ZVZlbG9jaXRpZXMoZHQ6IG51bWJlcikge1xyXG4gICAgICAgIGlmKHRoaXMuc3RhdGljIHx8IHRoaXMuc2xlZXBpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGR4ID0gZHQgKiB0aGlzLnZlbG9jaXR5LngsXHJcbiAgICAgICAgICAgIGR5ID0gZHQgKiB0aGlzLnZlbG9jaXR5LnksXHJcbiAgICAgICAgICAgIGRyID0gZHQgKiB0aGlzLmFuZ3VsYXJWZWxvY2l0eTtcclxuXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IGR4O1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSArPSBkeTtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uICs9IGRyO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uICUgKE1hdGguUEkgKiAyKTtcclxuXHJcbiAgICAgICAgLy/kvY3np7vliJrkvZNcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZShkeCwgZHkpO1xyXG4gICAgICAgIC8vIOaXi+i9rOWImuS9k1xyXG4gICAgICAgIGlmKGRyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlKGRyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOabtOaWsOagh+mHj+mAn+W6plxyXG4gICAgICAgIGxldCBzcGVlZCA9IE1hdGguaHlwb3QoZHgsIGR5KSxcclxuICAgICAgICAgICAgYW5ndWxhclNwZWVkID0gTWF0aC5hYnMoZHIpO1xyXG5cclxuICAgICAgICAvL+abtOaWsOWKqOmHj1xyXG4gICAgICAgIHRoaXMubW90aW9uID0gc3BlZWQgKiBzcGVlZCArIGFuZ3VsYXJTcGVlZCAqIGFuZ3VsYXJTcGVlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOivt+WuouW9k+WJjeaXtuWIu+WPl+WKm1xyXG4gICAgICovXHJcbiAgICBjbGVhckZvcmNlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yY2UueCA9IDA7XHJcbiAgICAgICAgdGhpcy5mb3JjZS55ID0gMDtcclxuICAgICAgICB0aGlzLnRvcnF1ZSA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGhvb2sgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu5Hlrprmsp/lrZDkuovku7ZcclxuICAgICAqIEBwYXJhbSBldmVudE5hbWUgXHJcbiAgICAgKiBAcGFyYW0gZm4gXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50TmFtZTogc3RyaW5nLCBmbjogKGJvZHk6IEJvZHkpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm1ldGhvZHNbZXZlbnROYW1lXSA9IGZuO1xyXG4gICAgfVxyXG5cclxuICAgIGJlZm9yZUFwcGVuZChlbmdpbmU6IEVuZ2luZSkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lID0gZW5naW5lO1xyXG5cclxuICAgICAgICBpZih0aGlzLnN0YXRpYykge1xyXG4gICAgICAgICAgICB0aGlzLnNsZWVwaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5lbmdpbmUuc2xlZXBpbmcuc2xlZXAodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1ldGhvZHMuYmVmb3JlQXBwZW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFmdGVyQXBwZW5kKCkgeyB0aGlzLm1ldGhvZHMuYWZ0ZXJBcHBlbmQodGhpcyk7IH1cclxuXHJcbiAgICBiZWZvcmVSZW1vdmUoKSB7IFxyXG4gICAgICAgIGxldCBzbGVlcGluZyA9IHRoaXMuZW5naW5lLnNsZWVwaW5nLCAgICBcclxuICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuY29udGFjdEJvZGllcyksXHJcbiAgICAgICAgICAgIGJvZHk6IEJvZHk7XHJcblxyXG4gICAgICAgIC8vIOWcqOWIoOmZpOS4gOS4quWImuS9k+WJje+8jOWUpOmGkuS4juS5i+acieeisOaSnueahOWImuS9k1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJvZHkgPSB0aGlzLmNvbnRhY3RCb2RpZXNba2V5c1tpXV07XHJcbiAgICAgICAgICAgIGJvZHkuc2xlZXBpbmcgJiYgc2xlZXBpbmcud2FrZShib2R5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubWV0aG9kcy5iZWZvcmVSZW1vdmUodGhpcyk7IFxyXG4gICAgfVxyXG5cclxuICAgIGFmdGVyUmVtb3ZlKCkgeyB0aGlzLm1ldGhvZHMuYWZ0ZXJSZW1vdmUodGhpcyk7IH1cclxuXHJcbiAgICBzbGVlcFN0YXJ0KCkgeyB0aGlzLm1ldGhvZHMuc2xlZXBTdGFydCh0aGlzKTsgfVxyXG5cclxuICAgIHNsZWVwRW5kKCkgeyB0aGlzLm1ldGhvZHMuc2xlZXBFbmQodGhpcyk7IH1cclxuXHJcbiAgICBvbkNvbGxpZGUodGFyZ2V0OiBCb2R5KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWN0Qm9kaWVzW3RhcmdldC5zdHJpbmdJZF0gPSB0YXJnZXQ7XHJcbiAgICAgICAgLy8g6Kem5Y+R56Kw5pKe6ZKp5a2QXHJcbiAgICAgICAgdGhpcy5tZXRob2RzLm9uQ29sbGlkZSh0aGlzKTtcclxuICAgIH1cclxufSAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Vertices = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst bound_1 = __webpack_require__(5);\r\n// 顶点操作工具\r\nexports.Vertices = {\r\n    /**\r\n     * 获取多边形中心点\r\n     * @param vertexList\r\n     */\r\n    getCenter(vertexList) {\r\n        let range = exports.Vertices.getRange(vertexList), centerX = (range.max.x + range.min.x) / 2, centerY = (range.max.y + range.min.y) / 2;\r\n        return new vector_1.Vector(centerX, centerY);\r\n    },\r\n    /**\r\n     * 获取多边形质心\r\n     * @param vertexList\r\n     */\r\n    getCentroid(vertexList) {\r\n        let area = exports.Vertices.getArea(vertexList), centroid = new vector_1.Vector(0, 0), cross = 0, temp, j;\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            j = (i + 1) % vertexList.length;\r\n            cross = vertexList[i].cro(vertexList[j]);\r\n            temp = vertexList[i].add(vertexList[j]).scl(cross);\r\n            centroid.add(temp, centroid);\r\n        }\r\n        return centroid.scl(1 / (6 * area), centroid);\r\n    },\r\n    /**\r\n     * 获取多边形面积\r\n     * @param vertexList\r\n     */\r\n    getArea(vertexList) {\r\n        let area = 0, j = vertexList.length - 1;\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            area += (vertexList[j].x - vertexList[i].x) * (vertexList[j].y + vertexList[i].y);\r\n            j = i;\r\n        }\r\n        return area / 2;\r\n    },\r\n    /**\r\n     * 获取多边形的转动惯量\r\n     * 公式来自：https://blog.csdn.net/weixin_34194702/article/details/93587529\r\n     * @param vertexList\r\n     * @param mass 质量\r\n     * @param position\r\n     */\r\n    getInertia(vertexList, mass, position) {\r\n        let numerator = 0, denominator = 0, v = vertexList, cur, next, cross;\r\n        for (let n = 0; n < v.length; n++) {\r\n            cur = v[n].sub(position, cur);\r\n            next = v[(n + 1) % v.length].sub(position, next);\r\n            cross = Math.abs(cur.cro(next));\r\n            numerator += cross * (cur.dot(cur) + cur.dot(next) + next.dot(next));\r\n            denominator += cross;\r\n        }\r\n        return (mass / 6) * (numerator / denominator);\r\n    },\r\n    /**\r\n     * 求三角形的转动惯量\r\n     * @param vertexList\r\n     * @param mass\r\n     * 参考：http://www.doc88.com/p-5456260484135.html\r\n     */\r\n    getTriInertia(vertexList, mass) {\r\n        let l1 = vertexList[0].sub(vertexList[1]).len_s(), l2 = vertexList[1].sub(vertexList[2]).len_s(), l3 = vertexList[2].sub(vertexList[0]).len_s();\r\n        return (l1 + l2 + l3) * (mass / 36);\r\n    },\r\n    /**\r\n     * 求顶点围成的所有面的轴\r\n     * @param vertexList\r\n     */\r\n    getAxes(vertexList) {\r\n        let v = vertexList, axis, axes = [], i, j;\r\n        for (i = 0; i < v.length; i++) {\r\n            j = (i + 1) % v.length;\r\n            axis = v[j].sub(v[i]).nor().nol();\r\n            axes.push({\r\n                value: axis,\r\n                opposite: null,\r\n                origin: vertexList,\r\n                supportVertexIndex: null,\r\n                oppositeVertexIndex: null,\r\n                edge: {\r\n                    index: [i, j],\r\n                    start: v[i],\r\n                    end: v[j]\r\n                }\r\n            });\r\n        }\r\n        return axes;\r\n    },\r\n    /**\r\n     * 获取顶点集的范围\r\n     * @param vertexList\r\n     */\r\n    getRange(vertexList) {\r\n        let xList = vertexList.map(v => v.x), yList = vertexList.map(v => v.y);\r\n        return {\r\n            min: new vector_1.Vector(Math.min.apply(Math, xList), Math.min.apply(Math, yList)),\r\n            max: new vector_1.Vector(Math.max.apply(Math, xList), Math.max.apply(Math, yList))\r\n        };\r\n    },\r\n    /**\r\n     * 获取顶点集形成的包围盒\r\n     * @param vertexList\r\n     */\r\n    getBound(vertexList) {\r\n        let range = exports.Vertices.getRange(vertexList);\r\n        return new bound_1.Bound(range.min, range.max);\r\n    },\r\n    /**\r\n     * 使用斜率筛去共线的轴\r\n     * @param axes 要筛选的轴\r\n     */\r\n    uniqueAxes(axes) {\r\n        let axisVector, tmpAxes = [], axesTable = {}, i, gradient;\r\n        for (i = 0; i < axes.length; i++) {\r\n            axisVector = axes[i].value;\r\n            gradient = (axisVector.y === 0) ? Infinity : (axisVector.x / axisVector.y);\r\n            // 限制精度\r\n            gradient = gradient.toFixed(3).toString();\r\n            axesTable[gradient] = axes[i];\r\n        }\r\n        Object.keys(axesTable).map(item => {\r\n            tmpAxes.push(axesTable[item]);\r\n        });\r\n        return tmpAxes;\r\n    },\r\n    /**\r\n     * 旋转顶点\r\n     * @param vertexList 多边形顶点\r\n     * @param radian 弧度\r\n     * @param point 绕点\r\n     */\r\n    rotate(vertexList, radian, point) {\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            vertexList[i].rot(radian, point, vertexList[i]);\r\n        }\r\n    },\r\n    /**\r\n     * 位移顶点\r\n     * @param vertexList 多边形顶点\r\n     * @param dx\r\n     * @param dy\r\n     */\r\n    translate(vertexList, dx, dy) {\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            vertexList[i].x += dx;\r\n            vertexList[i].y += dy;\r\n        }\r\n    },\r\n    /**\r\n     * 将凹多边形分解为多个子凸多边形\r\n     * @param vertexList\r\n     */\r\n    split(vertexList) {\r\n        // 将拆分出来的多边形保存到这个数组\r\n        let parts = [], vertexListA, vertexListB, xAxis, vTest, vDiv, dividePointA, dividePointB, len = vertexList.length, i, j, cur, next, next2, next3, flag = false;\r\n        i++;\r\n        for (i = 0; i < len; i++) {\r\n            cur = i;\r\n            next = (i + 1) % len;\r\n            next2 = (i + 2) % len;\r\n            next3 = (i + 3) % len;\r\n            xAxis = vertexList[next].sub(vertexList[cur]);\r\n            vTest = vertexList[next2].sub(vertexList[cur]);\r\n            j = next3;\r\n            do {\r\n                vDiv = vertexList[j].sub(vertexList[cur]);\r\n                if (xAxis.cro(vDiv) * xAxis.cro(vTest) < 0) {\r\n                    flag = true;\r\n                    break;\r\n                }\r\n                j = (j + 1) % len;\r\n            } while (j !== i);\r\n            if (flag)\r\n                break;\r\n        }\r\n        // 获取两个分割点\r\n        dividePointA = vertexList[next],\r\n            dividePointB = vertexList[j];\r\n        if (j > next2) {\r\n            vertexListB = vertexList.splice(next2, j - next2);\r\n        }\r\n        else {\r\n            vertexListB = [];\r\n            vertexListB.push(...vertexList.splice(next2, len - (next2 - 1)));\r\n            vertexListB.push(...vertexList.splice(0, j));\r\n        }\r\n        // 拆分为两个多边形vertexListA和vertexListB\r\n        vertexListA = vertexList;\r\n        vertexListB.unshift(dividePointA);\r\n        vertexListB.push(dividePointB);\r\n        vertexListA = exports.Vertices.filterCollinearVertex(vertexListA);\r\n        vertexListB = exports.Vertices.filterCollinearVertex(vertexListB);\r\n        // 检测拆分出来的两个多边形是否是凹多边形，若果是，继续递归拆分\r\n        if (vertexListA.length > 3 && exports.Vertices.isConcave(vertexListA)) {\r\n            parts.push(...exports.Vertices.split(vertexListA));\r\n        }\r\n        else {\r\n            parts.push(vertexListA);\r\n        }\r\n        if (vertexListB.length > 3 && exports.Vertices.isConcave(vertexListB)) {\r\n            parts.push(...exports.Vertices.split(vertexListB));\r\n        }\r\n        else {\r\n            parts.push(vertexListB);\r\n        }\r\n        return parts;\r\n    },\r\n    /**\r\n     * 判断是否包含顶点（射线法）\r\n     * 参考：https://www.cnblogs.com/anningwang/p/7581545.html\r\n     * @param vertexList\r\n     * @param point 检测的顶点\r\n     */\r\n    isContains(vertexList, point) {\r\n        let v = vertexList, cur, next, len = vertexList.length;\r\n        for (let i = 0; i < len; i++) {\r\n            cur = v[i], next = v[(i + 1) % len];\r\n            if ((point.x - cur.x) * (next.y - cur.y) + (point.y - cur.y) * (cur.x - next.x) >= 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    /**\r\n     * 判断是否为凹多边形\r\n     * @param vertexList\r\n     */\r\n    isConcave(vertexList) {\r\n        let v = vertexList, \r\n        // 上两向量间的叉积\r\n        prevCor, \r\n        // 当前两向量的叉积\r\n        curCor, \r\n        // 上一顶点到当前顶点的向量\r\n        prev2Cur, \r\n        // 当前顶点到下一顶点的向量\r\n        cur2Next, len = v.length, i, j, k;\r\n        for (i = 1; i < len; i++) {\r\n            j = i - 1;\r\n            k = (i + 1) % len;\r\n            prev2Cur = v[i].sub(v[j]);\r\n            cur2Next = v[k].sub(v[i]);\r\n            // 计算向量叉积\r\n            curCor = prev2Cur.cro(cur2Next) >= 0 ? 1 : -1;\r\n            if (prevCor !== undefined && prevCor !== curCor) {\r\n                return true;\r\n            }\r\n            prevCor = curCor;\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * 转换到世界坐标\r\n     * @param point 参考点\r\n     * @param vertexList\r\n     */\r\n    transform2World(point, vertexList) {\r\n        return vertexList.map(v => v.add(point));\r\n    },\r\n    /**\r\n     * 转换到本地坐标\r\n     * @param point 参考点\r\n     * @param vertexList\r\n     */\r\n    transform2Local(point, vertexList) {\r\n        return vertexList.map(v => v.sub(point));\r\n    },\r\n    /**\r\n     * 求多边形在某个轴的投影\r\n     * @param vertexList\r\n     * @param axis 投影轴\r\n     */\r\n    projection(vertexList, axis) {\r\n        let projection, minProjection = Infinity, maxProjection = -Infinity;\r\n        for (let i = 0; i < vertexList.length; i++) {\r\n            projection = vertexList[i].dot(axis);\r\n            if (projection < minProjection) {\r\n                minProjection = projection;\r\n            }\r\n            if (projection > maxProjection) {\r\n                maxProjection = projection;\r\n            }\r\n        }\r\n        return {\r\n            min: minProjection,\r\n            max: maxProjection\r\n        };\r\n    },\r\n    /**\r\n     * 计算顶点集中离给定点最近的顶点\r\n     * @param point 给定点\r\n     * @param vertexList 顶点集\r\n     */\r\n    getClosestVertex(point, vertexList) {\r\n        let v = vertexList, i, min = Infinity, length, index, len = v.length;\r\n        for (i = 0; i < len; i++) {\r\n            length = v[i].sub(point).len();\r\n            if (length < min) {\r\n                min = length;\r\n                index = i;\r\n            }\r\n        }\r\n        return vertexList[index];\r\n    },\r\n    /**\r\n     * 寻找顶点集中所有凹点\r\n     * @param vertexList\r\n     */\r\n    findCaves(vertexList) {\r\n        let caves = [], v = vertexList, prevVertex, curVertex, nextVertex, len = v.length, i;\r\n        for (i = 1; i < len; i++) {\r\n            prevVertex = v[i - 1];\r\n            curVertex = v[i];\r\n            nextVertex = v[(i + 1) % len];\r\n            // 利用叉乘判断\r\n            if (curVertex.sub(prevVertex).cro(nextVertex.sub(curVertex)) < 0) {\r\n                caves.push(curVertex);\r\n            }\r\n        }\r\n        return caves;\r\n    },\r\n    /**\r\n     * 过滤共线的顶点\r\n     * @param vertexList\r\n     */\r\n    filterCollinearVertex(vertexList) {\r\n        let vertex, next, next2, len = vertexList.length, vNext, vNext2, removeIndex = [], i;\r\n        for (i = 0; i < len; i++) {\r\n            vertex = vertexList[i];\r\n            next = vertexList[(i + 1) % len];\r\n            next2 = vertexList[(i + 2) % len];\r\n            vNext = next.sub(vertex, vector_1._tempVector1);\r\n            vNext2 = next2.sub(vertex, vector_1._tempVector2);\r\n            if (vNext.cro(vNext2) === 0) {\r\n                removeIndex.push((i + 1) % len);\r\n            }\r\n        }\r\n        for (i = 0; i < removeIndex.length; i++) {\r\n            vertexList.splice(removeIndex[i] - i, 1);\r\n        }\r\n        return vertexList;\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3ZlcnRpY2VzLnRzP2IwNWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0NBQW9FO0FBQ3BFLHVDQUFnQztBQXdCaEMsU0FBUztBQUNJLGdCQUFRLEdBQUc7SUFFcEI7OztPQUdHO0lBQ0gsU0FBUyxDQUFDLFVBQXNCO1FBQzVCLElBQUksS0FBSyxHQUFHLGdCQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUNyQyxPQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFDekMsT0FBTyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFOUMsT0FBTyxJQUFJLGVBQU0sQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILFdBQVcsQ0FBQyxVQUFzQjtRQUM5QixJQUFJLElBQUksR0FBRyxnQkFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFDbkMsUUFBUSxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDM0IsS0FBSyxHQUFHLENBQUMsRUFDVCxJQUFJLEVBQ0osQ0FBQyxDQUFDO1FBRU4sS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDeEMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUM7WUFDaEMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekMsSUFB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Q0FBQztRQUVOLEtBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3JCLE1BQU0sR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkIsSUFBSSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUNqQyxLQUFLLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBRWxDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxxQkFBWSxDQUFDLENBQUM7WUFDdkMsTUFBTSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLHFCQUFZLENBQUMsQ0FBQztZQUV6QyxJQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN4QixXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2FBQ25DO1NBQ0o7UUFFRCxLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDcEMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzVDO1FBRUQsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztDQUNKIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IsIF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IyIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEJvdW5kIH0gZnJvbSBcIi4vYm91bmRcIjtcclxuaW1wb3J0IHsgQ2lyY2xlIH0gZnJvbSBcIi4uL2JvZHkvY2lyY2xlXCI7XHJcblxyXG5cclxuLy8g6aG254K55YiX6KGo57G75Z6LXHJcbmV4cG9ydCB0eXBlIFZlcnRleExpc3QgPSBBcnJheTxWZWN0b3I+O1xyXG4vLyDovrnnsbvlnotcclxuZXhwb3J0IHR5cGUgRWRnZSA9IHtcclxuICAgIGluZGV4OiBbbnVtYmVyLCBudW1iZXJdO1xyXG4gICAgc3RhcnQ6IFZlY3RvcjtcclxuICAgIGVuZDogVmVjdG9yO1xyXG59O1xyXG4vLyDovrnms5XlkJHph4/vvIjovbTvvInnsbvlnotcclxuZXhwb3J0IHR5cGUgQXhpcyA9IHtcclxuICAgIHZhbHVlOiBWZWN0b3I7XHJcbiAgICBzdXBwb3J0VmVydGV4SW5kZXg6IG51bWJlcjtcclxuICAgIG9wcG9zaXRlVmVydGV4SW5kZXg6IG51bWJlcjtcclxuICAgIG9wcG9zaXRlOiBWZXJ0ZXhMaXN0IHwgQ2lyY2xlO1xyXG4gICAgb3JpZ2luOiBWZXJ0ZXhMaXN0O1xyXG4gICAgZWRnZTogRWRnZTtcclxufTtcclxuXHJcblxyXG5cclxuLy8g6aG254K55pON5L2c5bel5YW3XHJcbmV4cG9ydCBjb25zdCBWZXJ0aWNlcyA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWkmui+ueW9ouS4reW/g+eCuVxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldENlbnRlcih2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgcmFuZ2UgPSBWZXJ0aWNlcy5nZXRSYW5nZSh2ZXJ0ZXhMaXN0KSxcclxuICAgICAgICAgICAgY2VudGVyWCA9IChyYW5nZS5tYXgueCArIHJhbmdlLm1pbi54KSAvIDIsXHJcbiAgICAgICAgICAgIGNlbnRlclkgPSAocmFuZ2UubWF4LnkgKyByYW5nZS5taW4ueSkgLyAyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKGNlbnRlclgsIGNlbnRlclkpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWkmui+ueW9oui0qOW/g1xyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldENlbnRyb2lkKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBWZWN0b3Ige1xyXG4gICAgICAgIGxldCBhcmVhID0gVmVydGljZXMuZ2V0QXJlYSh2ZXJ0ZXhMaXN0KSxcclxuICAgICAgICAgICAgY2VudHJvaWQgPSBuZXcgVmVjdG9yKDAsIDApLFxyXG4gICAgICAgICAgICBjcm9zcyA9IDAsXHJcbiAgICAgICAgICAgIHRlbXAsXHJcbiAgICAgICAgICAgIGo7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGV4TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBqID0gKGkgKyAxKSAlIHZlcnRleExpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgICBjcm9zcyA9IHZlcnRleExpc3RbaV0uY3JvKHZlcnRleExpc3Rbal0pO1xyXG4gICAgICAgICAgICB0ZW1wID0gdmVydGV4TGlzdFtpXS5hZGQodmVydGV4TGlzdFtqXSkuc2NsKGNyb3NzKTtcclxuICAgICAgICAgICAgY2VudHJvaWQuYWRkKHRlbXAsIGNlbnRyb2lkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjZW50cm9pZC5zY2woMSAvICg2ICogYXJlYSksIGNlbnRyb2lkKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blpJrovrnlvaLpnaLnp69cclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICBnZXRBcmVhKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBhcmVhID0gMCxcclxuICAgICAgICAgICAgaiA9IHZlcnRleExpc3QubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHZlcnRleExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYXJlYSArPSAodmVydGV4TGlzdFtqXS54IC0gdmVydGV4TGlzdFtpXS54KSoodmVydGV4TGlzdFtqXS55ICsgdmVydGV4TGlzdFtpXS55KTtcclxuICAgICAgICAgICAgaiA9IGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXJlYS8yO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWkmui+ueW9oueahOi9rOWKqOaDr+mHj1xyXG4gICAgICog5YWs5byP5p2l6Ieq77yaaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNDE5NDcwMi9hcnRpY2xlL2RldGFpbHMvOTM1ODc1MjlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICogQHBhcmFtIG1hc3Mg6LSo6YePXHJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0SW5lcnRpYSh2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0LCBtYXNzOiBudW1iZXIsIHBvc2l0aW9uOiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBudW1lcmF0b3IgPSAwLFxyXG4gICAgICAgICAgICBkZW5vbWluYXRvciA9IDAsXHJcbiAgICAgICAgICAgIHYgPSB2ZXJ0ZXhMaXN0LFxyXG4gICAgICAgICAgICBjdXIsIG5leHQsXHJcbiAgICAgICAgICAgIGNyb3NzO1xyXG5cclxuICAgICAgICBmb3IobGV0IG4gPSAwOyBuIDwgdi5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICBjdXIgPSB2W25dLnN1Yihwb3NpdGlvbiwgY3VyKTtcclxuICAgICAgICAgICAgbmV4dCA9IHZbKG4gKyAxKSAlIHYubGVuZ3RoXS5zdWIocG9zaXRpb24sIG5leHQpO1xyXG5cclxuICAgICAgICAgICAgY3Jvc3MgPSBNYXRoLmFicyhjdXIuY3JvKG5leHQpKTtcclxuICAgICAgICAgICAgbnVtZXJhdG9yICs9IGNyb3NzICogKGN1ci5kb3QoY3VyKSArIGN1ci5kb3QobmV4dCkgKyBuZXh0LmRvdChuZXh0KSk7XHJcbiAgICAgICAgICAgIGRlbm9taW5hdG9yICs9IGNyb3NzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChtYXNzIC8gNikgKiAobnVtZXJhdG9yIC8gZGVub21pbmF0b3IpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguS4ieinkuW9oueahOi9rOWKqOaDr+mHj1xyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKiBAcGFyYW0gbWFzcyBcclxuICAgICAqIOWPguiAg++8mmh0dHA6Ly93d3cuZG9jODguY29tL3AtNTQ1NjI2MDQ4NDEzNS5odG1sXHJcbiAgICAgKi9cclxuICAgIGdldFRyaUluZXJ0aWEodmVydGV4TGlzdDogVmVydGV4TGlzdCwgbWFzczogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgbDEgPSB2ZXJ0ZXhMaXN0WzBdLnN1Yih2ZXJ0ZXhMaXN0WzFdKS5sZW5fcygpLFxyXG4gICAgICAgICAgICBsMiA9IHZlcnRleExpc3RbMV0uc3ViKHZlcnRleExpc3RbMl0pLmxlbl9zKCksXHJcbiAgICAgICAgICAgIGwzID0gdmVydGV4TGlzdFsyXS5zdWIodmVydGV4TGlzdFswXSkubGVuX3MoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICAobDEgKyBsMiArIGwzKSAqIChtYXNzIC8gMzYpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxgumhtueCueWbtOaIkOeahOaJgOaciemdoueahOi9tFxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldEF4ZXModmVydGV4TGlzdDogVmVydGV4TGlzdCk6IEF4aXNbXSB7XHJcbiAgICAgICAgbGV0IHYgPSB2ZXJ0ZXhMaXN0LFxyXG4gICAgICAgICAgICBheGlzOiBWZWN0b3IsIGF4ZXM6IEF4aXNbXSA9IFtdLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaiA9IChpICsgMSkgJSB2Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBheGlzID0gdltqXS5zdWIodltpXSkubm9yKCkubm9sKCk7XHJcbiAgICAgICAgICAgICAgICBheGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBheGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wcG9zaXRlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogdmVydGV4TGlzdCxcclxuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0VmVydGV4SW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgb3Bwb3NpdGVWZXJ0ZXhJbmRleDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBlZGdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBbaSwgal0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB2W2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IHZbal1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXhlcztcclxuICAgIH0sICBcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlumhtueCuembhueahOiMg+WbtFxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldFJhbmdlKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiB7bWluOiBWZWN0b3IsIG1heDogVmVjdG9yfSB7XHJcbiAgICAgICAgbGV0IHhMaXN0ID0gdmVydGV4TGlzdC5tYXAodiA9PiB2LngpLFxyXG4gICAgICAgICAgICB5TGlzdCA9IHZlcnRleExpc3QubWFwKHYgPT4gdi55KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWluOiBuZXcgVmVjdG9yKE1hdGgubWluLmFwcGx5KE1hdGgsIHhMaXN0KSwgTWF0aC5taW4uYXBwbHkoTWF0aCwgeUxpc3QpKSxcclxuICAgICAgICAgICAgbWF4OiBuZXcgVmVjdG9yKE1hdGgubWF4LmFwcGx5KE1hdGgsIHhMaXN0KSwgTWF0aC5tYXguYXBwbHkoTWF0aCwgeUxpc3QpKVxyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlumhtueCuembhuW9ouaIkOeahOWMheWbtOebklxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGdldEJvdW5kKHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBCb3VuZCB7XHJcbiAgICAgICAgbGV0IHJhbmdlID0gVmVydGljZXMuZ2V0UmFuZ2UodmVydGV4TGlzdCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChyYW5nZS5taW4sIHJhbmdlLm1heCk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS9v+eUqOaWnOeOh+etm+WOu+WFsee6v+eahOi9tFxyXG4gICAgICogQHBhcmFtIGF4ZXMg6KaB562b6YCJ55qE6L20XHJcbiAgICAgKi9cclxuICAgIHVuaXF1ZUF4ZXMoYXhlczogQXhpc1tdKTogQXhpc1tdIHtcclxuICAgICAgICBsZXQgYXhpc1ZlY3RvcjogVmVjdG9yLFxyXG4gICAgICAgICAgICB0bXBBeGVzOiBBeGlzW10gPSBbXSxcclxuICAgICAgICAgICAgYXhlc1RhYmxlID0ge30sXHJcbiAgICAgICAgICAgIGksIGdyYWRpZW50O1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBheGlzVmVjdG9yID0gYXhlc1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgZ3JhZGllbnQgPSAoYXhpc1ZlY3Rvci55ID09PSAwKSA/IEluZmluaXR5IDogKGF4aXNWZWN0b3IueCAvIGF4aXNWZWN0b3IueSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDpmZDliLbnsr7luqZcclxuICAgICAgICAgICAgZ3JhZGllbnQgPSBncmFkaWVudC50b0ZpeGVkKDMpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGF4ZXNUYWJsZVtncmFkaWVudF0gPSBheGVzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgT2JqZWN0LmtleXMoYXhlc1RhYmxlKS5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRtcEF4ZXMucHVzaChheGVzVGFibGVbaXRlbV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdG1wQXhlcztcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5peL6L2s6aG254K5XHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCDlpJrovrnlvaLpobbngrkgXHJcbiAgICAgKiBAcGFyYW0gcmFkaWFuIOW8p+W6plxyXG4gICAgICogQHBhcmFtIHBvaW50IOe7leeCuVxyXG4gICAgICovXHJcbiAgICByb3RhdGUodmVydGV4TGlzdDogVmVydGV4TGlzdCwgcmFkaWFuOiBudW1iZXIsIHBvaW50OiBWZWN0b3IpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdmVydGV4TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhMaXN0W2ldLnJvdChyYWRpYW4sIHBvaW50LCB2ZXJ0ZXhMaXN0W2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9LCAgXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkvY3np7vpobbngrlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IOWkmui+ueW9oumhtueCuVxyXG4gICAgICogQHBhcmFtIGR4XHJcbiAgICAgKiBAcGFyYW0gZHlcclxuICAgICAqL1xyXG4gICAgdHJhbnNsYXRlKHZlcnRleExpc3Q6IFZlcnRleExpc3QsIGR4OiBudW1iZXIsIGR5OiBudW1iZXIpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdmVydGV4TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhMaXN0W2ldLnggKz0gZHg7XHJcbiAgICAgICAgICAgIHZlcnRleExpc3RbaV0ueSArPSBkeTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlsIblh7nlpJrovrnlvaLliIbop6PkuLrlpJrkuKrlrZDlh7jlpJrovrnlvaJcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0XHJcbiAgICAgKi9cclxuICAgIHNwbGl0KHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBWZXJ0ZXhMaXN0W10ge1xyXG4gICAgICAgIC8vIOWwhuaLhuWIhuWHuuadpeeahOWkmui+ueW9ouS/neWtmOWIsOi/meS4quaVsOe7hFxyXG4gICAgICAgIGxldCBwYXJ0czogVmVydGV4TGlzdFtdID0gW10sXHJcbiAgICAgICAgICAgIHZlcnRleExpc3RBOiBWZWN0b3JbXSwgXHJcbiAgICAgICAgICAgIHZlcnRleExpc3RCOiBWZWN0b3JbXSxcclxuICAgICAgICAgICAgeEF4aXM6IFZlY3RvcixcclxuICAgICAgICAgICAgdlRlc3Q6IFZlY3RvcixcclxuICAgICAgICAgICAgdkRpdjogVmVjdG9yLFxyXG4gICAgICAgICAgICBkaXZpZGVQb2ludEE6IFZlY3RvcixcclxuICAgICAgICAgICAgZGl2aWRlUG9pbnRCOiBWZWN0b3IsXHJcbiAgICAgICAgICAgIGxlbiA9IHZlcnRleExpc3QubGVuZ3RoLCBcclxuICAgICAgICAgICAgaSwgaiwgY3VyLCBuZXh0LCBuZXh0MiwgbmV4dDMsXHJcbiAgICAgICAgICAgIGZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaSsrO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDAgOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgY3VyID0gaTtcclxuICAgICAgICAgICAgbmV4dCA9IChpICsgMSkgJSBsZW47XHJcbiAgICAgICAgICAgIG5leHQyID0gKGkgKyAyKSAlIGxlbjtcclxuICAgICAgICAgICAgbmV4dDMgPSAoaSArIDMpICUgbGVuO1xyXG5cclxuICAgICAgICAgICAgeEF4aXMgPSB2ZXJ0ZXhMaXN0W25leHRdLnN1Yih2ZXJ0ZXhMaXN0W2N1cl0pOyBcclxuICAgICAgICAgICAgdlRlc3QgPSB2ZXJ0ZXhMaXN0W25leHQyXS5zdWIodmVydGV4TGlzdFtjdXJdKTtcclxuXHJcbiAgICAgICAgICAgIGogPSBuZXh0MztcclxuXHJcbiAgICAgICAgICAgIGRvIHsgICBcclxuICAgICAgICAgICAgICAgIHZEaXYgPSB2ZXJ0ZXhMaXN0W2pdLnN1Yih2ZXJ0ZXhMaXN0W2N1cl0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHhBeGlzLmNybyh2RGl2KSAqIHhBeGlzLmNybyh2VGVzdCkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaiA9IChqICsgMSkgJSBsZW47XHJcbiAgICAgICAgICAgIH0gd2hpbGUoaiAhPT0gaSk7XHJcblxyXG4gICAgICAgICAgICBpZihmbGFnKSBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiOt+WPluS4pOS4quWIhuWJsueCuVxyXG4gICAgICAgIGRpdmlkZVBvaW50QSA9IHZlcnRleExpc3RbbmV4dF0sXHJcbiAgICAgICAgZGl2aWRlUG9pbnRCID0gdmVydGV4TGlzdFtqXTtcclxuXHJcbiAgICAgICAgaWYoaiA+IG5leHQyKSB7XHJcbiAgICAgICAgICAgIHZlcnRleExpc3RCID0gdmVydGV4TGlzdC5zcGxpY2UobmV4dDIsIGogLSBuZXh0Mik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhMaXN0QiA9IFtdO1xyXG4gICAgICAgICAgICB2ZXJ0ZXhMaXN0Qi5wdXNoKC4uLnZlcnRleExpc3Quc3BsaWNlKG5leHQyLCBsZW4gLSAobmV4dDIgLSAxKSkpO1xyXG4gICAgICAgICAgICB2ZXJ0ZXhMaXN0Qi5wdXNoKC4uLnZlcnRleExpc3Quc3BsaWNlKDAsIGopKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOaLhuWIhuS4uuS4pOS4quWkmui+ueW9onZlcnRleExpc3RB5ZKMdmVydGV4TGlzdEJcclxuICAgICAgICB2ZXJ0ZXhMaXN0QSA9IHZlcnRleExpc3Q7XHJcbiAgICAgICAgdmVydGV4TGlzdEIudW5zaGlmdChkaXZpZGVQb2ludEEpO1xyXG4gICAgICAgIHZlcnRleExpc3RCLnB1c2goZGl2aWRlUG9pbnRCKTtcclxuXHJcbiAgICAgICAgdmVydGV4TGlzdEEgPSBWZXJ0aWNlcy5maWx0ZXJDb2xsaW5lYXJWZXJ0ZXgodmVydGV4TGlzdEEpO1xyXG4gICAgICAgIHZlcnRleExpc3RCID0gVmVydGljZXMuZmlsdGVyQ29sbGluZWFyVmVydGV4KHZlcnRleExpc3RCKTtcclxuXHJcbiAgICAgICAgLy8g5qOA5rWL5ouG5YiG5Ye65p2l55qE5Lik5Liq5aSa6L655b2i5piv5ZCm5piv5Ye55aSa6L655b2i77yM6Iul5p6c5piv77yM57un57ut6YCS5b2S5ouG5YiGXHJcbiAgICAgICAgaWYodmVydGV4TGlzdEEubGVuZ3RoID4gMyAmJiBWZXJ0aWNlcy5pc0NvbmNhdmUodmVydGV4TGlzdEEpKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2goLi4uVmVydGljZXMuc3BsaXQodmVydGV4TGlzdEEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2godmVydGV4TGlzdEEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodmVydGV4TGlzdEIubGVuZ3RoID4gMyAmJiBWZXJ0aWNlcy5pc0NvbmNhdmUodmVydGV4TGlzdEIpKSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2goLi4uVmVydGljZXMuc3BsaXQodmVydGV4TGlzdEIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcnRzLnB1c2godmVydGV4TGlzdEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnRzO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpuWMheWQq+mhtueCue+8iOWwhOe6v+azle+8iVxyXG4gICAgICog5Y+C6ICD77yaaHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYW5uaW5nd2FuZy9wLzc1ODE1NDUuaHRtbFxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKiBAcGFyYW0gcG9pbnQg5qOA5rWL55qE6aG254K5XHJcbiAgICAgKi9cclxuICAgIGlzQ29udGFpbnModmVydGV4TGlzdDogVmVydGV4TGlzdCwgcG9pbnQ6IFZlY3Rvcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCB2ID0gdmVydGV4TGlzdCxcclxuICAgICAgICAgICAgY3VyLCBuZXh0LCBsZW4gPSB2ZXJ0ZXhMaXN0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN1ciA9IHZbaV0sIG5leHQgPSB2WyhpICsgMSkgJSBsZW5dO1xyXG5cclxuICAgICAgICAgICAgaWYoKHBvaW50LnggLSBjdXIueCkgKiAobmV4dC55IC0gY3VyLnkpICsgKHBvaW50LnkgLSBjdXIueSkgKiAoY3VyLnggLSBuZXh0LngpID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIpOaWreaYr+WQpuS4uuWHueWkmui+ueW9olxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIGlzQ29uY2F2ZSh2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IHYgPSB2ZXJ0ZXhMaXN0LFxyXG4gICAgICAgICAgICAvLyDkuIrkuKTlkJHph4/pl7TnmoTlj4nnp69cclxuICAgICAgICAgICAgcHJldkNvciwgXHJcbiAgICAgICAgICAgIC8vIOW9k+WJjeS4pOWQkemHj+eahOWPieenr1xyXG4gICAgICAgICAgICBjdXJDb3IsXHJcbiAgICAgICAgICAgIC8vIOS4iuS4gOmhtueCueWIsOW9k+WJjemhtueCueeahOWQkemHj1xyXG4gICAgICAgICAgICBwcmV2MkN1cixcclxuICAgICAgICAgICAgLy8g5b2T5YmN6aG254K55Yiw5LiL5LiA6aG254K555qE5ZCR6YePXHJcbiAgICAgICAgICAgIGN1cjJOZXh0LFxyXG4gICAgICAgICAgICBsZW4gPSB2Lmxlbmd0aCwgXHJcbiAgICAgICAgICAgIGksIGosIGs7XHJcblxyXG4gICAgICAgIGZvcihpID0gMTsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGogPSBpIC0gMTtcclxuICAgICAgICAgICAgayA9IChpICsgMSklbGVuO1xyXG5cclxuICAgICAgICAgICAgcHJldjJDdXIgPSB2W2ldLnN1Yih2W2pdKTtcclxuICAgICAgICAgICAgY3VyMk5leHQgPSB2W2tdLnN1Yih2W2ldKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOiuoeeul+WQkemHj+WPieenr1xyXG4gICAgICAgICAgICBjdXJDb3IgPSBwcmV2MkN1ci5jcm8oY3VyMk5leHQpID49IDA/IDE6IC0xO1xyXG5cclxuICAgICAgICAgICAgaWYocHJldkNvciAhPT0gdW5kZWZpbmVkICYmIHByZXZDb3IgIT09IGN1ckNvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwcmV2Q29yID0gY3VyQ29yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOi9rOaNouWIsOS4lueVjOWdkOagh1xyXG4gICAgICogQHBhcmFtIHBvaW50IOWPguiAg+eCuVxyXG4gICAgICogQHBhcmFtIHZlcnRleExpc3QgXHJcbiAgICAgKi9cclxuICAgIHRyYW5zZm9ybTJXb3JsZChwb2ludDogVmVjdG9yLCB2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogVmVydGV4TGlzdCB7XHJcbiAgICAgICAgcmV0dXJuIHZlcnRleExpc3QubWFwKHYgPT4gdi5hZGQocG9pbnQpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDovazmjaLliLDmnKzlnLDlnZDmoIdcclxuICAgICAqIEBwYXJhbSBwb2ludCDlj4LogIPngrlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICB0cmFuc2Zvcm0yTG9jYWwocG9pbnQ6IFZlY3RvciwgdmVydGV4TGlzdDogVmVydGV4TGlzdCk6IFZlcnRleExpc3Qge1xyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhMaXN0Lm1hcCh2ID0+IHYuc3ViKHBvaW50KSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC5aSa6L655b2i5Zyo5p+Q5Liq6L2055qE5oqV5b2xXHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqIEBwYXJhbSBheGlzIOaKleW9sei9tFxyXG4gICAgICovXHJcbiAgICBwcm9qZWN0aW9uKHZlcnRleExpc3Q6IFZlcnRleExpc3QsIGF4aXM6IFZlY3Rvcik6IHttaW46IG51bWJlciwgbWF4OiBudW1iZXJ9IHtcclxuICAgICAgICBsZXQgcHJvamVjdGlvbjogbnVtYmVyLFxyXG4gICAgICAgICAgICBtaW5Qcm9qZWN0aW9uOiBudW1iZXIgPSBJbmZpbml0eSxcclxuICAgICAgICAgICAgbWF4UHJvamVjdGlvbjogbnVtYmVyID0gLUluZmluaXR5O1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdmVydGV4TGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBwcm9qZWN0aW9uID0gdmVydGV4TGlzdFtpXS5kb3QoYXhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZihwcm9qZWN0aW9uIDwgbWluUHJvamVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbWluUHJvamVjdGlvbiA9IHByb2plY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKHByb2plY3Rpb24gPiBtYXhQcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBtYXhQcm9qZWN0aW9uID0gcHJvamVjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWluOiBtaW5Qcm9qZWN0aW9uLFxyXG4gICAgICAgICAgICBtYXg6IG1heFByb2plY3Rpb25cclxuICAgICAgICB9OyAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X6aG254K56ZuG5Lit56a757uZ5a6a54K55pyA6L+R55qE6aG254K5XHJcbiAgICAgKiBAcGFyYW0gcG9pbnQg57uZ5a6a54K5XHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCDpobbngrnpm4ZcclxuICAgICAqL1xyXG4gICAgZ2V0Q2xvc2VzdFZlcnRleChwb2ludDogVmVjdG9yLCB2ZXJ0ZXhMaXN0OiBWZXJ0ZXhMaXN0KTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgdiA9IHZlcnRleExpc3QsXHJcbiAgICAgICAgICAgIGksIG1pbiA9IEluZmluaXR5LCBsZW5ndGgsIGluZGV4LFxyXG4gICAgICAgICAgICBsZW4gPSB2Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gdltpXS5zdWIocG9pbnQpLmxlbigpO1xyXG5cclxuICAgICAgICAgICAgaWYobGVuZ3RoIDwgbWluKSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBsZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhMaXN0W2luZGV4XTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7vmib7pobbngrnpm4bkuK3miYDmnInlh7nngrlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICBmaW5kQ2F2ZXModmVydGV4TGlzdDogVmVydGV4TGlzdCk6IFZlY3RvcltdIHtcclxuICAgICAgICBsZXQgY2F2ZXMgPSBbXSxcclxuICAgICAgICAgICAgdiA9IHZlcnRleExpc3QsXHJcbiAgICAgICAgICAgIHByZXZWZXJ0ZXgsXHJcbiAgICAgICAgICAgIGN1clZlcnRleCwgXHJcbiAgICAgICAgICAgIG5leHRWZXJ0ZXgsXHJcbiAgICAgICAgICAgIGxlbiA9IHYubGVuZ3RoLFxyXG4gICAgICAgICAgICBpO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDE7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBwcmV2VmVydGV4ID0gdltpIC0gMV07XHJcbiAgICAgICAgICAgIGN1clZlcnRleCA9IHZbaV07XHJcbiAgICAgICAgICAgIG5leHRWZXJ0ZXggPSB2WyhpICsgMSkgJSBsZW5dO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yip55So5Y+J5LmY5Yik5patXHJcbiAgICAgICAgICAgIGlmKGN1clZlcnRleC5zdWIocHJldlZlcnRleCkuY3JvKG5leHRWZXJ0ZXguc3ViKGN1clZlcnRleCkpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY2F2ZXMucHVzaChjdXJWZXJ0ZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2F2ZXM7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+H5ruk5YWx57q/55qE6aG254K5XHJcbiAgICAgKiBAcGFyYW0gdmVydGV4TGlzdCBcclxuICAgICAqL1xyXG4gICAgZmlsdGVyQ29sbGluZWFyVmVydGV4KHZlcnRleExpc3Q6IFZlcnRleExpc3QpOiBWZXJ0ZXhMaXN0IHtcclxuICAgICAgICBsZXQgdmVydGV4OiBWZWN0b3IsIFxyXG4gICAgICAgICAgICBuZXh0OiBWZWN0b3IsIFxyXG4gICAgICAgICAgICBuZXh0MjogVmVjdG9yLFxyXG4gICAgICAgICAgICBsZW4gPSB2ZXJ0ZXhMaXN0Lmxlbmd0aCxcclxuICAgICAgICAgICAgdk5leHQ6IFZlY3Rvciwgdk5leHQyOiBWZWN0b3IsXHJcbiAgICAgICAgICAgIHJlbW92ZUluZGV4OiBudW1iZXJbXSA9IFtdLFxyXG4gICAgICAgICAgICBpO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXggPSB2ZXJ0ZXhMaXN0W2ldO1xyXG4gICAgICAgICAgICBuZXh0ID0gdmVydGV4TGlzdFsoaSArIDEpICUgbGVuXTtcclxuICAgICAgICAgICAgbmV4dDIgPSB2ZXJ0ZXhMaXN0WyhpICsgMikgJSBsZW5dO1xyXG5cclxuICAgICAgICAgICAgdk5leHQgPSBuZXh0LnN1Yih2ZXJ0ZXgsIF90ZW1wVmVjdG9yMSk7XHJcbiAgICAgICAgICAgIHZOZXh0MiA9IG5leHQyLnN1Yih2ZXJ0ZXgsIF90ZW1wVmVjdG9yMik7XHJcblxyXG4gICAgICAgICAgICBpZih2TmV4dC5jcm8odk5leHQyKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSW5kZXgucHVzaCgoaSArIDEpICUgbGVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgcmVtb3ZlSW5kZXgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmVydGV4TGlzdC5zcGxpY2UocmVtb3ZlSW5kZXhbaV0gLSBpLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhMaXN0O1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports._tempMatrix4 = exports._tempMatrix3 = exports._tempMatrix2 = exports._tempMatrix1 = exports.Matrix = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\n/**\r\n * 2 * 2矩阵\r\n */\r\nclass Matrix {\r\n    constructor(r1, r2) {\r\n        this.r1 = new vector_1.Vector(1, 0);\r\n        this.r2 = new vector_1.Vector(0, 1);\r\n        if (r1 !== undefined && r2 !== undefined) {\r\n            this.set(r1, r2);\r\n        }\r\n    }\r\n    /**\r\n     * 设置矩阵值\r\n     * @param r1\r\n     * @param r2\r\n     */\r\n    set(r1, r2) {\r\n        this.r1.x = r1.x;\r\n        this.r1.y = r1.y;\r\n        this.r2.x = r2.x;\r\n        this.r2.y = r2.y;\r\n    }\r\n    /**\r\n     * 矩阵相加\r\n     * @param m\r\n     * @param mOut\r\n     */\r\n    add(m, mOut) {\r\n        let dest;\r\n        if (mOut !== undefined) {\r\n            dest = mOut;\r\n        }\r\n        else {\r\n            dest = new Matrix();\r\n        }\r\n        dest.r1 = this.r1.add(m.r1, dest.r1);\r\n        dest.r2 = this.r2.add(m.r2, dest.r2);\r\n        return dest;\r\n    }\r\n    /**\r\n     * 矩阵相减\r\n     * @param m\r\n     * @param mOut\r\n     */\r\n    subtract(m, mOut) {\r\n        let dest;\r\n        if (mOut !== undefined) {\r\n            dest = mOut;\r\n        }\r\n        else {\r\n            dest = new Matrix();\r\n        }\r\n        dest.r1 = this.r1.sub(m.r1, dest.r1);\r\n        dest.r2 = this.r2.sub(m.r2, dest.r2);\r\n        return dest;\r\n    }\r\n    /**\r\n     * 矩阵相乘\r\n     * @param m\r\n     * @param mOut\r\n     */\r\n    multiply(m, mOut) {\r\n        let dest;\r\n        if (mOut !== undefined) {\r\n            dest = mOut;\r\n        }\r\n        else {\r\n            dest = new Matrix();\r\n        }\r\n        dest.r1.x = this.r1.x * m.r1.x + this.r1.y * m.r2.x;\r\n        dest.r1.y = this.r1.x * m.r1.y + this.r1.y * m.r2.y;\r\n        dest.r2.x = this.r2.x * m.r1.x + this.r2.y * m.r2.x;\r\n        dest.r2.y = this.r2.x * m.r1.y + this.r2.y * m.r2.y;\r\n        return dest;\r\n    }\r\n    /**\r\n     * 矩阵与 2 维向量相乘\r\n     * @param v\r\n     * @param vOut\r\n     */\r\n    multiplyVec(v, vOut) {\r\n        let dest;\r\n        if (vOut !== undefined) {\r\n            dest = vOut;\r\n        }\r\n        else {\r\n            dest = new vector_1.Vector();\r\n        }\r\n        dest.x = this.r1.x * v.x + this.r1.y * v.y;\r\n        dest.y = this.r2.x * v.x + this.r2.y * v.y;\r\n        return dest;\r\n    }\r\n    /**\r\n     * 矩阵乘上一个数\r\n     * @param n\r\n     * @param mOut\r\n     */\r\n    multiplyNum(n, mOut) {\r\n        let dest;\r\n        if (mOut !== undefined) {\r\n            dest = mOut;\r\n        }\r\n        else {\r\n            dest = new Matrix();\r\n        }\r\n        dest.r1 = this.r1.scl(n, dest.r1);\r\n        dest.r2 = this.r2.scl(n, dest.r2);\r\n        return dest;\r\n    }\r\n    /**\r\n     * 矩阵转置\r\n     */\r\n    transpose() {\r\n        let r1y = this.r1.y, r2x = this.r2.x;\r\n        this.r1.y = r2x;\r\n        this.r2.x = r1y;\r\n        return this;\r\n    }\r\n    /**\r\n     * 转换为单位矩阵\r\n     */\r\n    identity() {\r\n        this.r1.x = this.r2.y = 1;\r\n        this.r1.y = this.r2.x = 0;\r\n        return this;\r\n    }\r\n    /**\r\n     *  求矩阵行列式\r\n     */\r\n    determinant() {\r\n        return this.r1.x * this.r2.y - this.r1.y * this.r2.x;\r\n    }\r\n    /**\r\n     * 矩阵求逆\r\n     * @param mOut\r\n     */\r\n    invert(mOut) {\r\n        let dest;\r\n        if (mOut !== undefined) {\r\n            dest = mOut;\r\n        }\r\n        else {\r\n            dest = new Matrix();\r\n        }\r\n        let det = this.determinant();\r\n        if (det === 0)\r\n            return null;\r\n        let r1x = this.r1.x, r1y = this.r1.y, r2x = this.r2.x, r2y = this.r2.y;\r\n        dest.r1.x = r2y;\r\n        dest.r1.y = -r1y;\r\n        dest.r2.x = -r2x;\r\n        dest.r2.y = r1x;\r\n        dest = dest.multiplyNum(1 / det);\r\n        return dest;\r\n    }\r\n    /**\r\n     * 拷贝矩阵\r\n     */\r\n    clone() {\r\n        let m = new Matrix();\r\n        m.r1 = this.r1.col();\r\n        m.r2 = this.r2.col();\r\n        return m;\r\n    }\r\n    /**\r\n     * 设置旋转矩阵\r\n     * @param rad\r\n     */\r\n    rotate(rad) {\r\n        let sin = Math.sin(rad), cos = Math.cos(rad);\r\n        this.r1.x = cos;\r\n        this.r1.y = -sin;\r\n        this.r2.x = sin;\r\n        this.r2.y = cos;\r\n        return this;\r\n    }\r\n}\r\nexports.Matrix = Matrix;\r\n;\r\nexports._tempMatrix1 = new Matrix();\r\nexports._tempMatrix2 = new Matrix();\r\nexports._tempMatrix3 = new Matrix();\r\nexports._tempMatrix4 = new Matrix();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWF0aC9tYXRyaXgudHM/NWEzOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx3Q0FBa0M7QUFHbEM7O0dBRUc7QUFDSCxNQUFhLE1BQU07SUFJZixZQUFZLEVBQVcsRUFBRSxFQUFXO1FBQ2hDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRTNCLElBQUcsRUFBRSxLQUFLLFNBQVMsSUFBSSxFQUFFLEtBQUssU0FBUyxFQUFFO1lBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ3BCO0lBQ0wsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxHQUFHLENBQUMsRUFBVSxFQUFFLEVBQVU7UUFDdEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILEdBQUcsQ0FBQyxDQUFTLEVBQUUsSUFBYTtRQUN4QixJQUFJLElBQVksQ0FBQztRQUVqQixJQUFHLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDbkIsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNmO2FBQ0k7WUFDRCxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztTQUN2QjtRQUVELElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUVyQyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFFBQVEsQ0FBQyxDQUFTLEVBQUUsSUFBYTtRQUM3QixJQUFJLElBQVksQ0FBQztRQUVqQixJQUFHLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDbkIsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNmO2FBQ0k7WUFDRCxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztTQUN2QjtRQUVELElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUVyQyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFFBQVEsQ0FBQyxDQUFTLEVBQUUsSUFBYTtRQUM3QixJQUFJLElBQVksQ0FBQztRQUVqQixJQUFHLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDbkIsSUFBSSxHQUFHLElBQUksQ0FBQztTQUNmO2FBQ0k7WUFDRCxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztTQUN2QjtRQUVELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXBELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsV0FBVyxDQUFDLENBQVMsRUFBRSxJQUFhO1FBQ2hDLElBQUksSUFBWSxDQUFDO1FBRWpCLElBQUcsSUFBSSxLQUFLLFNBQVMsRUFBRTtZQUNuQixJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQ2Y7YUFDSTtZQUNELElBQUksR0FBRyxJQUFJLGVBQU0sRUFBRSxDQUFDO1NBQ3ZCO1FBRUQsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0MsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxXQUFXLENBQUMsQ0FBUyxFQUFFLElBQWE7UUFDaEMsSUFBSSxJQUFZLENBQUM7UUFFakIsSUFBRyxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ25CLElBQUksR0FBRyxJQUFJLENBQUM7U0FDZjthQUNJO1lBQ0QsSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7U0FDdkI7UUFFRCxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWxDLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7T0FFRztJQUNILFNBQVM7UUFDTCxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDZixHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFcEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUVoQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxRQUFRO1FBQ0osSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUUxQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLElBQWE7UUFDaEIsSUFBSSxJQUFZLENBQUM7UUFFakIsSUFBRyxJQUFJLEtBQUssU0FBUyxFQUFFO1lBQ25CLElBQUksR0FBRyxJQUFJLENBQUM7U0FDZjthQUNJO1lBQ0QsSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7U0FDdkI7UUFFRCxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFN0IsSUFBRyxHQUFHLEtBQUssQ0FBQztZQUFFLE9BQU8sSUFBSSxDQUFDO1FBRTFCLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUNmLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDZixHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQ2YsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXBCLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUNoQixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFFaEIsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBRWpDLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUs7UUFDRCxJQUFJLENBQUMsR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBRXJCLENBQUMsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNyQixDQUFDLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFckIsT0FBTyxDQUFDLENBQUM7SUFDYixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLEdBQVc7UUFDZCxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUNuQixHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUV4QixJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDaEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFFakIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUVoQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0NBQ0o7QUEvTkQsd0JBK05DO0FBQUEsQ0FBQztBQUdXLG9CQUFZLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUM1QixvQkFBWSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7QUFDNUIsb0JBQVksR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO0FBQzVCLG9CQUFZLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQyIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIDIgKiAy55+p6Zi1XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWF0cml4IHtcclxuICAgIHB1YmxpYyByMTogVmVjdG9yO1xyXG4gICAgcHVibGljIHIyOiBWZWN0b3I7XHJcblxyXG4gICAgY29uc3RydWN0b3IocjE/OiBWZWN0b3IsIHIyPzogVmVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5yMSA9IG5ldyBWZWN0b3IoMSwgMCk7XHJcbiAgICAgICAgdGhpcy5yMiA9IG5ldyBWZWN0b3IoMCwgMSk7XHJcblxyXG4gICAgICAgIGlmKHIxICE9PSB1bmRlZmluZWQgJiYgcjIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldChyMSwgcjIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICAgICBcclxuICAgIC8qKlxyXG4gICAgICog6K6+572u55+p6Zi15YC8XHJcbiAgICAgKiBAcGFyYW0gcjEgXHJcbiAgICAgKiBAcGFyYW0gcjIgXHJcbiAgICAgKi9cclxuICAgIHNldChyMTogVmVjdG9yLCByMjogVmVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5yMS54ID0gcjEueDtcclxuICAgICAgICB0aGlzLnIxLnkgPSByMS55O1xyXG4gICAgICAgIHRoaXMucjIueCA9IHIyLng7XHJcbiAgICAgICAgdGhpcy5yMi55ID0gcjIueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOefqemYteebuOWKoFxyXG4gICAgICogQHBhcmFtIG1cclxuICAgICAqIEBwYXJhbSBtT3V0IFxyXG4gICAgICovXHJcbiAgICBhZGQobTogTWF0cml4LCBtT3V0PzogTWF0cml4KTogTWF0cml4IHtcclxuICAgICAgICBsZXQgZGVzdDogTWF0cml4O1xyXG5cclxuICAgICAgICBpZihtT3V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVzdCA9IG1PdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0ID0gbmV3IE1hdHJpeCgpO1xyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgZGVzdC5yMSA9IHRoaXMucjEuYWRkKG0ucjEsIGRlc3QucjEpO1xyXG4gICAgICAgIGRlc3QucjIgPSB0aGlzLnIyLmFkZChtLnIyLCBkZXN0LnIyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnn6npmLXnm7jlh49cclxuICAgICAqIEBwYXJhbSBtXHJcbiAgICAgKiBAcGFyYW0gbU91dCBcclxuICAgICAqL1xyXG4gICAgc3VidHJhY3QobTogTWF0cml4LCBtT3V0PzogTWF0cml4KTogTWF0cml4IHtcclxuICAgICAgICBsZXQgZGVzdDogTWF0cml4O1xyXG5cclxuICAgICAgICBpZihtT3V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVzdCA9IG1PdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0ID0gbmV3IE1hdHJpeCgpO1xyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgZGVzdC5yMSA9IHRoaXMucjEuc3ViKG0ucjEsIGRlc3QucjEpO1xyXG4gICAgICAgIGRlc3QucjIgPSB0aGlzLnIyLnN1YihtLnIyLCBkZXN0LnIyKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnn6npmLXnm7jkuZhcclxuICAgICAqIEBwYXJhbSBtXHJcbiAgICAgKiBAcGFyYW0gbU91dCBcclxuICAgICAqL1xyXG4gICAgbXVsdGlwbHkobTogTWF0cml4LCBtT3V0PzogTWF0cml4KTogTWF0cml4IHtcclxuICAgICAgICBsZXQgZGVzdDogTWF0cml4O1xyXG5cclxuICAgICAgICBpZihtT3V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVzdCA9IG1PdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0ID0gbmV3IE1hdHJpeCgpO1xyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgZGVzdC5yMS54ID0gdGhpcy5yMS54ICogbS5yMS54ICsgdGhpcy5yMS55ICogbS5yMi54O1xyXG4gICAgICAgIGRlc3QucjEueSA9IHRoaXMucjEueCAqIG0ucjEueSArIHRoaXMucjEueSAqIG0ucjIueTtcclxuICAgICAgICBkZXN0LnIyLnggPSB0aGlzLnIyLnggKiBtLnIxLnggKyB0aGlzLnIyLnkgKiBtLnIyLng7XHJcbiAgICAgICAgZGVzdC5yMi55ID0gdGhpcy5yMi54ICogbS5yMS55ICsgdGhpcy5yMi55ICogbS5yMi55O1xyXG5cclxuICAgICAgICByZXR1cm4gZGVzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOefqemYteS4jiAyIOe7tOWQkemHj+ebuOS5mFxyXG4gICAgICogQHBhcmFtIHYgXHJcbiAgICAgKiBAcGFyYW0gdk91dCBcclxuICAgICAqL1xyXG4gICAgbXVsdGlwbHlWZWModjogVmVjdG9yLCB2T3V0PzogVmVjdG9yKTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgZGVzdDogVmVjdG9yO1xyXG5cclxuICAgICAgICBpZih2T3V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVzdCA9IHZPdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0ID0gbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGVzdC54ID0gdGhpcy5yMS54ICogdi54ICsgdGhpcy5yMS55ICogdi55O1xyXG4gICAgICAgIGRlc3QueSA9IHRoaXMucjIueCAqIHYueCArIHRoaXMucjIueSAqIHYueTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnn6npmLXkuZjkuIrkuIDkuKrmlbBcclxuICAgICAqIEBwYXJhbSBuXHJcbiAgICAgKiBAcGFyYW0gbU91dFxyXG4gICAgICovXHJcbiAgICBtdWx0aXBseU51bShuOiBudW1iZXIsIG1PdXQ/OiBNYXRyaXgpOiBNYXRyaXgge1xyXG4gICAgICAgIGxldCBkZXN0OiBNYXRyaXg7XHJcblxyXG4gICAgICAgIGlmKG1PdXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZXN0ID0gbU91dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlc3QgPSBuZXcgTWF0cml4KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkZXN0LnIxID0gdGhpcy5yMS5zY2wobiwgZGVzdC5yMSk7XHJcbiAgICAgICAgZGVzdC5yMiA9IHRoaXMucjIuc2NsKG4sIGRlc3QucjIpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOefqemYtei9rOe9rlxyXG4gICAgICovXHJcbiAgICB0cmFuc3Bvc2UoKTogTWF0cml4IHtcclxuICAgICAgICBsZXQgcjF5ID0gdGhpcy5yMS55LFxyXG4gICAgICAgICAgICByMnggPSB0aGlzLnIyLng7XHJcblxyXG4gICAgICAgIHRoaXMucjEueSA9IHIyeDsgICAgXHJcbiAgICAgICAgdGhpcy5yMi54ID0gcjF5O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOi9rOaNouS4uuWNleS9jeefqemYtVxyXG4gICAgICovXHJcbiAgICBpZGVudGl0eSgpOiBNYXRyaXgge1xyXG4gICAgICAgIHRoaXMucjEueCA9IHRoaXMucjIueSA9IDE7XHJcbiAgICAgICAgdGhpcy5yMS55ID0gdGhpcy5yMi54ID0gMDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg5rGC55+p6Zi16KGM5YiX5byPXHJcbiAgICAgKi9cclxuICAgIGRldGVybWluYW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucjEueCAqIHRoaXMucjIueSAtIHRoaXMucjEueSAqIHRoaXMucjIueDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOefqemYteaxgumAhlxyXG4gICAgICogQHBhcmFtIG1PdXQgXHJcbiAgICAgKi9cclxuICAgIGludmVydChtT3V0PzogTWF0cml4KTogTWF0cml4IHtcclxuICAgICAgICBsZXQgZGVzdDogTWF0cml4O1xyXG5cclxuICAgICAgICBpZihtT3V0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVzdCA9IG1PdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0ID0gbmV3IE1hdHJpeCgpO1xyXG4gICAgICAgIH0gICBcclxuXHJcbiAgICAgICAgbGV0IGRldCA9IHRoaXMuZGV0ZXJtaW5hbnQoKTtcclxuXHJcbiAgICAgICAgaWYoZGV0ID09PSAwKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IHIxeCA9IHRoaXMucjEueCxcclxuICAgICAgICAgICAgcjF5ID0gdGhpcy5yMS55LFxyXG4gICAgICAgICAgICByMnggPSB0aGlzLnIyLngsXHJcbiAgICAgICAgICAgIHIyeSA9IHRoaXMucjIueTtcclxuXHJcbiAgICAgICAgZGVzdC5yMS54ID0gcjJ5O1xyXG4gICAgICAgIGRlc3QucjEueSA9IC1yMXk7XHJcbiAgICAgICAgZGVzdC5yMi54ID0gLXIyeDtcclxuICAgICAgICBkZXN0LnIyLnkgPSByMXg7XHJcblxyXG4gICAgICAgIGRlc3QgPSBkZXN0Lm11bHRpcGx5TnVtKDEgLyBkZXQpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaLt+i0neefqemYtVxyXG4gICAgICovXHJcbiAgICBjbG9uZSgpOiBNYXRyaXgge1xyXG4gICAgICAgIGxldCBtID0gbmV3IE1hdHJpeCgpO1xyXG5cclxuICAgICAgICBtLnIxID0gdGhpcy5yMS5jb2woKTtcclxuICAgICAgICBtLnIyID0gdGhpcy5yMi5jb2woKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7ml4vovaznn6npmLVcclxuICAgICAqIEBwYXJhbSByYWRcclxuICAgICAqL1xyXG4gICAgcm90YXRlKHJhZDogbnVtYmVyKTogTWF0cml4IHtcclxuICAgICAgICBsZXQgc2luID0gTWF0aC5zaW4ocmFkKSxcclxuICAgICAgICAgICAgY29zID0gTWF0aC5jb3MocmFkKTtcclxuXHJcbiAgICAgICAgdGhpcy5yMS54ID0gY29zO1xyXG4gICAgICAgIHRoaXMucjEueSA9IC1zaW47XHJcblxyXG4gICAgICAgIHRoaXMucjIueCA9IHNpbjtcclxuICAgICAgICB0aGlzLnIyLnkgPSBjb3M7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBfdGVtcE1hdHJpeDEgPSBuZXcgTWF0cml4KCk7XHJcbmV4cG9ydCBjb25zdCBfdGVtcE1hdHJpeDIgPSBuZXcgTWF0cml4KCk7XHJcbmV4cG9ydCBjb25zdCBfdGVtcE1hdHJpeDMgPSBuZXcgTWF0cml4KCk7XHJcbmV4cG9ydCBjb25zdCBfdGVtcE1hdHJpeDQgPSBuZXcgTWF0cml4KCk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Bound = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst vertices_1 = __webpack_require__(3);\r\n// AABB包围盒（速度扩展的）\r\nclass Bound {\r\n    constructor(min, max) {\r\n        this.min = new vector_1.Vector(0, 0);\r\n        this.max = new vector_1.Vector(0, 0);\r\n        this.set(min, max);\r\n    }\r\n    /**\r\n     * 设置包围盒范围\r\n     *\r\n     *  min ----------|\r\n     *   |            |\r\n     *   |            |\r\n     *   | --------- max\r\n     *\r\n     * @param min 最小值\r\n     * @param max 最大值\r\n     */\r\n    set(min, max) {\r\n        this.min.x = min.x;\r\n        this.min.y = min.y;\r\n        this.max.x = max.x;\r\n        this.max.y = max.y;\r\n    }\r\n    /**\r\n     * 位移包围盒\r\n     * @param dx\r\n     * @param dy\r\n     */\r\n    translate(dx, dy) {\r\n        this.min.x += dx;\r\n        this.min.y += dy;\r\n        this.max.x += dx;\r\n        this.max.y += dy;\r\n    }\r\n    /**\r\n     * 更新包围盒（通常发生在刚体发生旋转，min和max都要重新计算）\r\n     * @param vertexList\r\n     */\r\n    update(vertexList) {\r\n        let range = vertices_1.Vertices.getRange(vertexList);\r\n        this.min.x = range.min.x;\r\n        this.min.y = range.min.y;\r\n        this.max.x = range.max.x;\r\n        this.max.y = range.max.y;\r\n    }\r\n    /**\r\n     * 根据子包围盒更新包围盒\r\n     * @param bodies\r\n     */\r\n    updateByBounds(bodies) {\r\n        let bound, maxX = -Infinity, maxY = -Infinity, minX = Infinity, minY = Infinity;\r\n        for (let i = 0; i < bodies.length; i++) {\r\n            bound = bodies[i].bound;\r\n            if (bound.min.x < minX) {\r\n                minX = bound.min.x;\r\n            }\r\n            if (bound.min.y < minY) {\r\n                minY = bound.min.y;\r\n            }\r\n            if (bound.max.x > maxX) {\r\n                maxX = bound.max.x;\r\n            }\r\n            if (bound.max.y > maxY) {\r\n                maxY = bound.max.y;\r\n            }\r\n        }\r\n        this.min.x = minX;\r\n        this.min.y = minY;\r\n        this.max.x = maxX;\r\n        this.max.y = maxY;\r\n    }\r\n    /**\r\n     * 两包围盒求交集\r\n     * @param b\r\n     */\r\n    intersect(b) {\r\n        let x, y, maxX, maxY, overlapsX, overlapsY;\r\n        x = Math.max(this.min.x, b.min.x);\r\n        maxX = Math.min(this.max.x, b.max.x);\r\n        y = Math.max(this.min.y, b.min.y);\r\n        maxY = Math.min(this.max.y, b.max.y);\r\n        overlapsX = maxX - x;\r\n        overlapsY = maxY - y;\r\n        if (overlapsX < 0 || overlapsY < 0)\r\n            return null;\r\n        vector_1._tempVector1.x = x;\r\n        vector_1._tempVector1.y = y;\r\n        vector_1._tempVector2.x = x + overlapsX;\r\n        vector_1._tempVector2.y = y + overlapsY;\r\n        return new Bound(vector_1._tempVector1, vector_1._tempVector2);\r\n    }\r\n    /**\r\n     * 求多个包围盒的并集\r\n     * @param arg\r\n     */\r\n    union(bound) {\r\n        let min = vector_1._tempVector1, max = vector_1._tempVector2;\r\n        min.x = Math.min(this.min.x, bound.min.x);\r\n        min.y = Math.min(this.min.y, bound.min.y);\r\n        max.x = Math.max(this.max.x, bound.max.x);\r\n        max.y = Math.max(this.max.y, bound.max.y);\r\n        return new Bound(vector_1._tempVector1, vector_1._tempVector2);\r\n    }\r\n    /**\r\n     * 判断与另一个包围盒是否相交\r\n     * @param bound\r\n     */\r\n    isIntersect(bound) {\r\n        return (this.min.x <= bound.max.x && this.max.x >= bound.min.x) && (this.min.y <= bound.max.y && bound.min.y <= this.max.y);\r\n    }\r\n    /**\r\n     * 求一个包围盒是否包含另一个包围盒\r\n     * @param bound\r\n     */\r\n    isContains(bound) {\r\n        return this.min.x <= bound.min.x &&\r\n            this.min.y <= bound.min.y &&\r\n            this.max.x >= bound.max.x &&\r\n            this.max.y >= bound.max.y;\r\n    }\r\n    /**\r\n     * 查看点是否在包围盒中\r\n     * @param point\r\n     */\r\n    contains(point) {\r\n        return point.x >= this.min.x &&\r\n            point.x <= this.max.x &&\r\n            point.y >= this.min.y &&\r\n            point.y <= this.max.y;\r\n    }\r\n}\r\nexports.Bound = Bound;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2JvdW5kLnRzPzk4YTciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0NBQW9FO0FBQ3BFLDBDQUFrRDtBQU9sRCxpQkFBaUI7QUFDakIsTUFBYSxLQUFLO0lBSWQsWUFBWSxHQUFXLEVBQUUsR0FBVztRQUNoQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBRUQ7Ozs7Ozs7Ozs7T0FVRztJQUNILEdBQUcsQ0FBQyxHQUFXLEVBQUUsR0FBVztRQUN4QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsU0FBUyxDQUFDLEVBQVUsRUFBRSxFQUFVO1FBQzVCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLFVBQXNCO1FBQ3pCLElBQUksS0FBSyxHQUFHLG1CQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRTFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxjQUFjLENBQUMsTUFBYztRQUN6QixJQUFJLEtBQVksRUFDWixJQUFJLEdBQVcsQ0FBQyxRQUFRLEVBQ3hCLElBQUksR0FBVyxDQUFDLFFBQVEsRUFDeEIsSUFBSSxHQUFXLFFBQVEsRUFDdkIsSUFBSSxHQUFXLFFBQVEsQ0FBQztRQUU1QixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUV4QixJQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRTtnQkFDbkIsSUFBSSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ3RCO1lBRUQsSUFBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUU7Z0JBQ25CLElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUN0QjtZQUVELElBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFO2dCQUNuQixJQUFJLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDdEI7WUFFRCxJQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRTtnQkFDbkIsSUFBSSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ3RCO1NBQ0o7UUFFRCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEIsQ0FBQztJQUVEOzs7T0FHRztJQUNILFNBQVMsQ0FBQyxDQUFRO1FBQ2QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUNKLElBQUksRUFBRSxJQUFJLEVBQ1YsU0FBUyxFQUNULFNBQVMsQ0FBQztRQUVkLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVyQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckMsU0FBUyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUM7UUFDckIsU0FBUyxHQUFHLElB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ZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IsIF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IyIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IFZlcnRleExpc3QsIFZlcnRpY2VzIH0gZnJvbSBcIi4vdmVydGljZXNcIjtcclxuaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBBQUJC5YyF5Zu055uS77yI6YCf5bqm5omp5bGV55qE77yJXHJcbmV4cG9ydCBjbGFzcyBCb3VuZCB7XHJcbiAgICBtaW46IFZlY3RvcjtcclxuICAgIG1heDogVmVjdG9yO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1pbjogVmVjdG9yLCBtYXg6IFZlY3Rvcikge1xyXG4gICAgICAgIHRoaXMubWluID0gbmV3IFZlY3RvcigwLCAwKTtcclxuICAgICAgICB0aGlzLm1heCA9IG5ldyBWZWN0b3IoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5zZXQobWluLCBtYXgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5YyF5Zu055uS6IyD5Zu0XHJcbiAgICAgKiBcclxuICAgICAqICBtaW4gLS0tLS0tLS0tLXxcclxuICAgICAqICAgfCAgICAgICAgICAgIHxcclxuICAgICAqICAgfCAgICAgICAgICAgIHxcclxuICAgICAqICAgfCAtLS0tLS0tLS0gbWF4XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtaW4g5pyA5bCP5YC8XHJcbiAgICAgKiBAcGFyYW0gbWF4IOacgOWkp+WAvFxyXG4gICAgICovXHJcbiAgICBzZXQobWluOiBWZWN0b3IsIG1heDogVmVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5taW4ueCA9IG1pbi54O1xyXG4gICAgICAgIHRoaXMubWluLnkgPSBtaW4ueTtcclxuICAgICAgICB0aGlzLm1heC54ID0gbWF4Lng7XHJcbiAgICAgICAgdGhpcy5tYXgueSA9IG1heC55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5L2N56e75YyF5Zu055uSXHJcbiAgICAgKiBAcGFyYW0gZHhcclxuICAgICAqIEBwYXJhbSBkeVxyXG4gICAgICovXHJcbiAgICB0cmFuc2xhdGUoZHg6IG51bWJlciwgZHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubWluLnggKz0gZHg7XHJcbiAgICAgICAgdGhpcy5taW4ueSArPSBkeTtcclxuICAgICAgICB0aGlzLm1heC54ICs9IGR4O1xyXG4gICAgICAgIHRoaXMubWF4LnkgKz0gZHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrDljIXlm7Tnm5LvvIjpgJrluLjlj5HnlJ/lnKjliJrkvZPlj5HnlJ/ml4vovazvvIxtaW7lkoxtYXjpg73opoHph43mlrDorqHnrpfvvIlcclxuICAgICAqIEBwYXJhbSB2ZXJ0ZXhMaXN0IFxyXG4gICAgICovXHJcbiAgICB1cGRhdGUodmVydGV4TGlzdDogVmVydGV4TGlzdCkge1xyXG4gICAgICAgIGxldCByYW5nZSA9IFZlcnRpY2VzLmdldFJhbmdlKHZlcnRleExpc3QpO1xyXG5cclxuICAgICAgICB0aGlzLm1pbi54ID0gcmFuZ2UubWluLng7XHJcbiAgICAgICAgdGhpcy5taW4ueSA9IHJhbmdlLm1pbi55O1xyXG4gICAgICAgIHRoaXMubWF4LnggPSByYW5nZS5tYXgueDtcclxuICAgICAgICB0aGlzLm1heC55ID0gcmFuZ2UubWF4Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7lrZDljIXlm7Tnm5Lmm7TmlrDljIXlm7Tnm5JcclxuICAgICAqIEBwYXJhbSBib2RpZXNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQnlCb3VuZHMoYm9kaWVzOiBCb2R5W10pIHtcclxuICAgICAgICBsZXQgYm91bmQ6IEJvdW5kLFxyXG4gICAgICAgICAgICBtYXhYOiBudW1iZXIgPSAtSW5maW5pdHksIFxyXG4gICAgICAgICAgICBtYXhZOiBudW1iZXIgPSAtSW5maW5pdHksXHJcbiAgICAgICAgICAgIG1pblg6IG51bWJlciA9IEluZmluaXR5LFxyXG4gICAgICAgICAgICBtaW5ZOiBudW1iZXIgPSBJbmZpbml0eTsgXHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYm91bmQgPSBib2RpZXNbaV0uYm91bmQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihib3VuZC5taW4ueCA8IG1pblgpIHtcclxuICAgICAgICAgICAgICAgIG1pblggPSBib3VuZC5taW4ueDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoYm91bmQubWluLnkgPCBtaW5ZKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5ZID0gYm91bmQubWluLnk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGJvdW5kLm1heC54ID4gbWF4WCkge1xyXG4gICAgICAgICAgICAgICAgbWF4WCA9IGJvdW5kLm1heC54O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihib3VuZC5tYXgueSA+IG1heFkpIHtcclxuICAgICAgICAgICAgICAgIG1heFkgPSBib3VuZC5tYXgueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5taW4ueCA9IG1pblg7XHJcbiAgICAgICAgdGhpcy5taW4ueSA9IG1pblk7XHJcbiAgICAgICAgdGhpcy5tYXgueCA9IG1heFg7XHJcbiAgICAgICAgdGhpcy5tYXgueSA9IG1heFk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkuKTljIXlm7Tnm5LmsYLkuqTpm4ZcclxuICAgICAqIEBwYXJhbSBiIFxyXG4gICAgICovXHJcbiAgICBpbnRlcnNlY3QoYjogQm91bmQpOiBCb3VuZCB7XHJcbiAgICAgICAgbGV0IHgsIHksIFxyXG4gICAgICAgICAgICBtYXhYLCBtYXhZLFxyXG4gICAgICAgICAgICBvdmVybGFwc1gsXHJcbiAgICAgICAgICAgIG92ZXJsYXBzWTtcclxuXHJcbiAgICAgICAgeCA9IE1hdGgubWF4KHRoaXMubWluLngsIGIubWluLngpO1xyXG4gICAgICAgIG1heFggPSBNYXRoLm1pbih0aGlzLm1heC54LCBiLm1heC54KTtcclxuICAgICAgICBcclxuICAgICAgICB5ID0gTWF0aC5tYXgodGhpcy5taW4ueSwgYi5taW4ueSk7XHJcbiAgICAgICAgbWF4WSA9IE1hdGgubWluKHRoaXMubWF4LnksIGIubWF4LnkpO1xyXG5cclxuICAgICAgICBvdmVybGFwc1ggPSBtYXhYIC0geDtcclxuICAgICAgICBvdmVybGFwc1kgPSBtYXhZIC0geTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgaWYob3ZlcmxhcHNYIDwgMCB8fCBvdmVybGFwc1kgPCAwKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgX3RlbXBWZWN0b3IxLnggPSB4O1xyXG4gICAgICAgIF90ZW1wVmVjdG9yMS55ID0geTtcclxuICAgICAgICBfdGVtcFZlY3RvcjIueCA9IHggKyBvdmVybGFwc1g7XHJcbiAgICAgICAgX3RlbXBWZWN0b3IyLnkgPSB5ICsgb3ZlcmxhcHNZO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguWkmuS4quWMheWbtOebkueahOW5tumbhlxyXG4gICAgICogQHBhcmFtIGFyZyBcclxuICAgICAqL1xyXG4gICAgdW5pb24oYm91bmQ6IEJvdW5kKTogQm91bmQge1xyXG4gICAgICAgIGxldCBtaW46IFZlY3RvciA9IF90ZW1wVmVjdG9yMSxcclxuICAgICAgICAgICAgbWF4OiBWZWN0b3IgPSBfdGVtcFZlY3RvcjI7XHJcblxyXG4gICAgICAgIG1pbi54ID0gTWF0aC5taW4odGhpcy5taW4ueCwgYm91bmQubWluLngpO1xyXG4gICAgICAgIG1pbi55ID0gTWF0aC5taW4odGhpcy5taW4ueSwgYm91bmQubWluLnkpO1xyXG4gICAgICAgIG1heC54ID0gTWF0aC5tYXgodGhpcy5tYXgueCwgYm91bmQubWF4LngpO1xyXG4gICAgICAgIG1heC55ID0gTWF0aC5tYXgodGhpcy5tYXgueSwgYm91bmQubWF4LnkpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IyKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuI7lj6bkuIDkuKrljIXlm7Tnm5LmmK/lkKbnm7jkuqRcclxuICAgICAqIEBwYXJhbSBib3VuZCBcclxuICAgICAqL1xyXG4gICAgaXNJbnRlcnNlY3QoYm91bmQ6IEJvdW5kKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pbi54IDw9IGJvdW5kLm1heC54ICYmIHRoaXMubWF4LnggPj0gYm91bmQubWluLngpICYmICh0aGlzLm1pbi55IDw9IGJvdW5kLm1heC55ICYmIGJvdW5kLm1pbi55IDw9IHRoaXMubWF4LnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC5LiA5Liq5YyF5Zu055uS5piv5ZCm5YyF5ZCr5Y+m5LiA5Liq5YyF5Zu055uSXHJcbiAgICAgKiBAcGFyYW0gYm91bmQgXHJcbiAgICAgKi9cclxuICAgIGlzQ29udGFpbnMoYm91bmQ6IEJvdW5kKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWluLnggPD0gYm91bmQubWluLnggJiZcclxuICAgICAgICAgICAgICAgdGhpcy5taW4ueSA8PSBib3VuZC5taW4ueSAmJlxyXG4gICAgICAgICAgICAgICB0aGlzLm1heC54ID49IGJvdW5kLm1heC54ICYmXHJcbiAgICAgICAgICAgICAgIHRoaXMubWF4LnkgPj0gYm91bmQubWF4Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmn6XnnIvngrnmmK/lkKblnKjljIXlm7Tnm5LkuK1cclxuICAgICAqIEBwYXJhbSBwb2ludCBcclxuICAgICAqL1xyXG4gICAgY29udGFpbnMocG9pbnQ6IFZlY3Rvcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBwb2ludC54ID49IHRoaXMubWluLnggJiYgXHJcbiAgICAgICAgICAgICAgIHBvaW50LnggPD0gdGhpcy5tYXgueCAmJiBcclxuICAgICAgICAgICAgICAgcG9pbnQueSA+PSB0aGlzLm1pbi55ICYmIFxyXG4gICAgICAgICAgICAgICBwb2ludC55IDw9IHRoaXMubWF4Lnk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Arcs = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst vertices_1 = __webpack_require__(3);\r\nconst bound_1 = __webpack_require__(5);\r\nconst _tempDynamicAxis = {\r\n    value: null,\r\n    opposite: null,\r\n    origin: null,\r\n    supportVertexIndex: null,\r\n    oppositeVertexIndex: null,\r\n    edge: null\r\n};\r\nexports.Arcs = {\r\n    /**\r\n     * 获取两个圆的圆心间的距离\r\n     * @param circleA\r\n     * @param circleB\r\n     */\r\n    distance(circleA, circleB) {\r\n        return circleA.position.sub(circleB.position).len();\r\n    },\r\n    /**\r\n     * 获取圆形和顶点集间的轴\r\n     * @param vertices 顶点信息\r\n     */\r\n    getAxes(circle, poly) {\r\n        let closestVertex = vertices_1.Vertices.getClosestVertex(circle.position, poly.vertexList);\r\n        _tempDynamicAxis.value = closestVertex.sub(circle.position).nol();\r\n        return _tempDynamicAxis;\r\n    },\r\n    getBound(centroid, radius) {\r\n        let min = new vector_1.Vector(centroid.x - radius, centroid.y - radius), max = new vector_1.Vector(centroid.x + radius, centroid.y + radius);\r\n        return new bound_1.Bound(min, max);\r\n    },\r\n    /**\r\n     * 获取圆形在给定轴上的投影\r\n     * @param axis\r\n     */\r\n    projection(circle, axis) {\r\n        let len = circle.position.pro(axis);\r\n        return {\r\n            min: len - circle.radius,\r\n            max: len + circle.radius\r\n        };\r\n    },\r\n    /**\r\n     * 查看圆形是否包含某个点\r\n     * @param circle\r\n     * @param point\r\n     */\r\n    isContains(circle, point) {\r\n        return circle.radius - Math.hypot(point.x - circle.position.x, point.y - circle.position.y) > 0;\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2FyY3MudHM/MjcyZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx3Q0FBd0M7QUFFeEMsMENBQTRDO0FBQzVDLHVDQUFnQztBQUloQyxNQUFNLGdCQUFnQixHQUFTO0lBQzNCLEtBQUssRUFBRSxJQUFJO0lBQ1gsUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLGtCQUFrQixFQUFFLElBQUk7SUFDeEIsbUJBQW1CLEVBQUUsSUFBSTtJQUN6QixJQUFJLEVBQUUsSUFBSTtDQUNiLENBQUM7QUFLVyxZQUFJLEdBQUc7SUFFaEI7Ozs7T0FJRztJQUNILFFBQVEsQ0FBQyxPQUFlLEVBQUUsT0FBZTtRQUNyQyxPQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUN4RCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsT0FBTyxDQUFDLE1BQWMsRUFBRSxJQUFhO1FBQ2pDLElBQUksYUFBYSxHQUFHLG1CQUFRLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFaEYsZ0JBQWdCLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWxFLE9BQU8sZ0JBQWdCLENBQUM7SUFDNUIsQ0FBQztJQUVELFFBQVEsQ0FBQyxRQUFnQixFQUFFLE1BQWM7UUFDckMsSUFBSSxHQUFHLEdBQUcsSUFBSSxlQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsRUFDMUQsR0FBRyxHQUFHLElBQUksZUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUM7UUFFL0QsT0FBTyxJQUFJLGFBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7T0FHRztJQUNILFVBQVUsQ0FBQyxNQUFjLEVBQUUsSUFBWTtRQUNuQyxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVwQyxPQUFPO1lBQ0gsR0FBRyxFQUFFLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTTtZQUN4QixHQUFHLEVBQUUsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNO1NBQzNCLENBQUM7SUFDTixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFVBQVUsQ0FBQyxNQUFjLEVBQUUsS0FBYTtRQUNwQyxPQUFPLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEcsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBDaXJjbGUgfSBmcm9tIFwiLi4vYm9keS9jaXJjbGVcIjtcclxuaW1wb3J0IHsgQXhpcywgVmVydGljZXMgfSBmcm9tIFwiLi92ZXJ0aWNlc1wiO1xyXG5pbXBvcnQgeyBCb3VuZCB9IGZyb20gXCIuL2JvdW5kXCI7XHJcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi4vYm9keS9wb2x5Z29uXCI7XHJcblxyXG5cclxuY29uc3QgX3RlbXBEeW5hbWljQXhpczogQXhpcyA9IHtcclxuICAgIHZhbHVlOiBudWxsLFxyXG4gICAgb3Bwb3NpdGU6IG51bGwsXHJcbiAgICBvcmlnaW46IG51bGwsXHJcbiAgICBzdXBwb3J0VmVydGV4SW5kZXg6IG51bGwsXHJcbiAgICBvcHBvc2l0ZVZlcnRleEluZGV4OiBudWxsLFxyXG4gICAgZWRnZTogbnVsbFxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEFyY3MgPSB7XHJcbiBcclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5Lik5Liq5ZyG55qE5ZyG5b+D6Ze055qE6Led56a7XHJcbiAgICAgKiBAcGFyYW0gY2lyY2xlQSBcclxuICAgICAqIEBwYXJhbSBjaXJjbGVCIFxyXG4gICAgICovXHJcbiAgICBkaXN0YW5jZShjaXJjbGVBOiBDaXJjbGUsIGNpcmNsZUI6IENpcmNsZSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGNpcmNsZUEucG9zaXRpb24uc3ViKGNpcmNsZUIucG9zaXRpb24pLmxlbigpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluWchuW9ouWSjOmhtueCuembhumXtOeahOi9tFxyXG4gICAgICogQHBhcmFtIHZlcnRpY2VzIOmhtueCueS/oeaBr1xyXG4gICAgICovXHJcbiAgICBnZXRBeGVzKGNpcmNsZTogQ2lyY2xlLCBwb2x5OiBQb2x5Z29uKTogQXhpcyB7XHJcbiAgICAgICAgbGV0IGNsb3Nlc3RWZXJ0ZXggPSBWZXJ0aWNlcy5nZXRDbG9zZXN0VmVydGV4KGNpcmNsZS5wb3NpdGlvbiwgcG9seS52ZXJ0ZXhMaXN0KTtcclxuXHJcbiAgICAgICAgX3RlbXBEeW5hbWljQXhpcy52YWx1ZSA9IGNsb3Nlc3RWZXJ0ZXguc3ViKGNpcmNsZS5wb3NpdGlvbikubm9sKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBfdGVtcER5bmFtaWNBeGlzO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRCb3VuZChjZW50cm9pZDogVmVjdG9yLCByYWRpdXM6IG51bWJlcik6IEJvdW5kIHtcclxuICAgICAgICBsZXQgbWluID0gbmV3IFZlY3RvcihjZW50cm9pZC54IC0gcmFkaXVzLCBjZW50cm9pZC55IC0gcmFkaXVzKSxcclxuICAgICAgICAgICAgbWF4ID0gbmV3IFZlY3RvcihjZW50cm9pZC54ICsgcmFkaXVzLCBjZW50cm9pZC55ICsgcmFkaXVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChtaW4sIG1heCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5ZyG5b2i5Zyo57uZ5a6a6L205LiK55qE5oqV5b2xXHJcbiAgICAgKiBAcGFyYW0gYXhpcyBcclxuICAgICAqL1xyXG4gICAgcHJvamVjdGlvbihjaXJjbGU6IENpcmNsZSwgYXhpczogVmVjdG9yKToge21pbjogbnVtYmVyLCBtYXg6IG51bWJlcn0ge1xyXG4gICAgICAgIGxldCBsZW4gPSBjaXJjbGUucG9zaXRpb24ucHJvKGF4aXMpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtaW46IGxlbiAtIGNpcmNsZS5yYWRpdXMsXHJcbiAgICAgICAgICAgIG1heDogbGVuICsgY2lyY2xlLnJhZGl1c1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l55yL5ZyG5b2i5piv5ZCm5YyF5ZCr5p+Q5Liq54K5XHJcbiAgICAgKiBAcGFyYW0gY2lyY2xlIFxyXG4gICAgICogQHBhcmFtIHBvaW50IFxyXG4gICAgICovXHJcbiAgICBpc0NvbnRhaW5zKGNpcmNsZTogQ2lyY2xlLCBwb2ludDogVmVjdG9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGNpcmNsZS5yYWRpdXMgLSBNYXRoLmh5cG90KHBvaW50LnggLSBjaXJjbGUucG9zaXRpb24ueCwgcG9pbnQueSAtIGNpcmNsZS5wb3NpdGlvbi55KSA+IDA7IFxyXG4gICAgfVxyXG59OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.ContactConstraint = exports.Contact = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst util_1 = __webpack_require__(1);\r\n// 接触约束\r\nclass Contact {\r\n    constructor(id, vertex, depth) {\r\n        this.id = id;\r\n        this.position = vertex;\r\n        this.shareNormal = 0;\r\n        this.shareTangent = 0;\r\n        this.normalImpulse = 0;\r\n        this.tangentImpulse = 0;\r\n        this.positionCorrectiveImpulse = 0;\r\n        this.depth = depth;\r\n        this.velocityBias = 0;\r\n    }\r\n    /**\r\n     * 判断两个碰撞点是否相等\r\n     * @param contact\r\n     */\r\n    equal(contact) {\r\n        if (this.id === null || contact.id === null) {\r\n            return false;\r\n        }\r\n        if (this.id === contact.id) {\r\n            return true;\r\n        }\r\n        if (this.id[0] === contact.id[0] && this.id[1] === contact.id[1]) {\r\n            return true;\r\n        }\r\n        if (this.id[0] === contact.id[1] && this.id[1] === contact.id[0]) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.Contact = Contact;\r\n/**\r\n * 碰撞求解器\r\n */\r\nclass ContactConstraint {\r\n    constructor() {\r\n        this.slop = 0.01;\r\n        this.biasFactor = 0.2;\r\n        this.restFactor = 24;\r\n    }\r\n    static create(id, vertex, depth) {\r\n        return new Contact(id, vertex, depth);\r\n    }\r\n    /**\r\n     * 求解速度约束预处理\r\n     * @param manifolds 碰撞流形\r\n     * @param dt 步长\r\n     */\r\n    preSolveVelocity(manifolds, dt) {\r\n        let manifold, collision, contact, bodyA, bodyB, normal, tangent, i, j;\r\n        for (i = 0; i < manifolds.length; ++i) {\r\n            manifold = manifolds[i];\r\n            if (!manifold.isActive)\r\n                continue;\r\n            collision = manifold.collision;\r\n            normal = collision.normal;\r\n            tangent = collision.tangent;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            for (j = 0; j < collision.contacts.length; j++) {\r\n                contact = collision.contacts[j];\r\n                // 接触点到刚体A质心的距离\r\n                contact.offsetA = contact.position.sub(bodyA.position);\r\n                // 接触点到刚体B质心的距离\r\n                contact.offsetB = contact.position.sub(bodyB.position);\r\n                let invMassNormal = manifold.inverseMass, invMassTangent = manifold.inverseMass, r1 = contact.offsetA, r2 = contact.offsetB, rn1 = contact.offsetA.dot(normal), rn2 = contact.offsetB.dot(normal), rt1 = contact.offsetA.dot(tangent), rt2 = contact.offsetB.dot(tangent);\r\n                // 计算 J(M^-1)(J^T).\r\n                invMassNormal += bodyA.invInertia * (r1.dot(r1) - rn1 * rn1);\r\n                invMassNormal += bodyB.invInertia * (r2.dot(r2) - rn2 * rn2);\r\n                invMassTangent += bodyA.invInertia * (r1.dot(r1) - rt1 * rt1);\r\n                invMassTangent += bodyB.invInertia * (r2.dot(r2) - rt2 * rt2);\r\n                let bias = 60 * Math.max(0, contact.depth - this.slop) * this.biasFactor;\r\n                // 保存 J(M^-1)(J^T)的倒数\r\n                contact.shareNormal = 1 / invMassNormal;\r\n                contact.shareTangent = 1 / invMassTangent;\r\n                contact.velocityBias = bias;\r\n                // warm start\r\n                if (contact.normalImpulse !== 0 || contact.tangentImpulse !== 0) {\r\n                    let p = vector_1._tempVector3;\r\n                    p.x = normal.x * contact.normalImpulse + tangent.x * contact.tangentImpulse;\r\n                    p.y = normal.y * contact.normalImpulse + tangent.y * contact.tangentImpulse;\r\n                    bodyA.applyImpulse(p, contact.offsetA);\r\n                    bodyB.applyImpulse(p.inv(p), contact.offsetB);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 求解速度约束\r\n     * 使用sequential impulse进行快速收敛\r\n     * 参考：https://kevinyu.net/2018/01/17/understanding-constraint-solver-in-physics-engine/\r\n     * @param manifolds\r\n     * @private dt\r\n     */\r\n    solveVelocity(manifolds) {\r\n        let manifold, collision, contact, bodyA, bodyB, normal, tangent, normalImpulse, tangentImpulse, maxFriction, velocityPointA, // 刚体A质心相对碰撞点的速度\r\n        velocityPointB, // 刚体B质心相对碰撞点的速度\r\n        relativeVelocity, // 相对速度\r\n        relativeNormalVelocity, relativeTangentVelocity, impulse = vector_1._tempVector3, i, j;\r\n        for (i = 0; i < manifolds.length; i++) {\r\n            manifold = manifolds[i];\r\n            if (!manifold.isActive)\r\n                continue;\r\n            collision = manifold.collision;\r\n            normal = collision.normal;\r\n            tangent = collision.tangent;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            for (j = 0; j < collision.contacts.length; j++) {\r\n                contact = collision.contacts[j];\r\n                contact.offsetA.croNum(bodyA.angularVelocity, vector_1._tempVector1);\r\n                contact.offsetB.croNum(bodyB.angularVelocity, vector_1._tempVector2);\r\n                velocityPointA = bodyA.velocity.add(vector_1._tempVector1, vector_1._tempVector1);\r\n                velocityPointB = bodyB.velocity.add(vector_1._tempVector2, vector_1._tempVector2);\r\n                relativeVelocity = velocityPointB.sub(velocityPointA, vector_1._tempVector1);\r\n                // 计算法向相对速度\r\n                relativeNormalVelocity = normal.dot(relativeVelocity);\r\n                // 计算法向冲量\r\n                normalImpulse = (relativeNormalVelocity + contact.velocityBias) * contact.shareNormal;\r\n                let frictionNormalImpulse = contact.normalImpulse;\r\n                if (collision.isReuse && relativeNormalVelocity < 0 && relativeNormalVelocity ** 2 > this.restFactor) {\r\n                    contact.normalImpulse = 0;\r\n                }\r\n                else {\r\n                    // sequential impulse方法，收敛法向冲量\r\n                    let oldNormalImpulse = contact.normalImpulse;\r\n                    contact.normalImpulse = Math.max(oldNormalImpulse + normalImpulse, 0);\r\n                    normalImpulse = contact.normalImpulse - oldNormalImpulse;\r\n                }\r\n                frictionNormalImpulse += normalImpulse;\r\n                // 应用冲量\r\n                impulse.x = normal.x * normalImpulse;\r\n                impulse.y = normal.y * normalImpulse;\r\n                bodyA.applyImpulse(impulse, contact.offsetA);\r\n                bodyB.applyImpulse(impulse.inv(impulse), contact.offsetB);\r\n                // --------------------------------------------------------------------------------------------\r\n                contact.offsetA.croNum(bodyA.angularVelocity, vector_1._tempVector1);\r\n                contact.offsetB.croNum(bodyB.angularVelocity, vector_1._tempVector2);\r\n                velocityPointA = bodyA.velocity.add(vector_1._tempVector1, vector_1._tempVector1);\r\n                velocityPointB = bodyB.velocity.add(vector_1._tempVector2, vector_1._tempVector2);\r\n                relativeVelocity = velocityPointB.sub(velocityPointA, vector_1._tempVector1);\r\n                // 计算切向相对速度\r\n                relativeTangentVelocity = tangent.dot(relativeVelocity);\r\n                // 计算切向冲量\r\n                tangentImpulse = relativeTangentVelocity * contact.shareTangent;\r\n                // 计算最大摩擦力\r\n                maxFriction = manifold.friction * frictionNormalImpulse;\r\n                // sequential impulse方法，收敛切向冲量\r\n                let oldTangentImpulse = contact.tangentImpulse;\r\n                contact.tangentImpulse = util_1.Util.clamp(oldTangentImpulse + tangentImpulse, -maxFriction, maxFriction);\r\n                tangentImpulse = contact.tangentImpulse - oldTangentImpulse;\r\n                // 应用冲量\r\n                impulse.x = tangent.x * tangentImpulse;\r\n                impulse.y = tangent.y * tangentImpulse;\r\n                bodyA.applyImpulse(impulse, contact.offsetA);\r\n                bodyB.applyImpulse(impulse.inv(impulse), contact.offsetB);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.ContactConstraint = ContactConstraint;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RyYWludC9jb250YWN0LnRzPzcwOWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0Esd0NBQWdHO0FBRWhHLHNDQUFzQztBQUd0QyxPQUFPO0FBQ1AsTUFBYSxPQUFPO0lBYWhCLFlBQVksRUFBb0IsRUFBRSxNQUFjLEVBQUUsS0FBYTtRQUMzRCxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7T0FHRztJQUNILEtBQUssQ0FBQyxPQUFnQjtRQUNsQixJQUFHLElBQUksQ0FBQyxFQUFFLEtBQUssSUFBSSxJQUFJLE9BQU8sQ0FBQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3hDLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsSUFBRyxJQUFJLENBQUMsRUFBRSxLQUFLLE9BQU8sQ0FBQyxFQUFFLEVBQUU7WUFDdkIsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUVELElBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUM3RCxPQUFPLElBQUksQ0FBQztT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QXFCLENBQUM7Z0JBRXhELDhCQUE4QjtnQkFDOUIsSUFBSSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDO2dCQUMvQyxPQUFPLENBQUMsY0FBYyxHQUFHLFdBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEdBQUcsY0FBYyxFQUFFLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxDQUFDO2dCQUNuRyxjQUFjLEdBQUcsT0FBTyxDQUFDLGNBQWMsR0FBRyxpQkFBaUIsQ0FBQztnQkFFNUQsT0FBTztnQkFDUCxPQUFPLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEdBQUcsY0FBYyxDQUFDO2dCQUN2QyxPQUFPLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEdBQUcsY0FBYyxDQUFDO2dCQUV2QyxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzdDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDN0Q7U0FDSjtJQUNMLENBQUM7Q0FDSjtBQTlMRCw4Q0E4TEMiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvZHkgfSBmcm9tIFwiLi4vYm9keS9ib2R5XCI7XHJcbmltcG9ydCB7IFZlY3RvciwgX3RlbXBWZWN0b3IyLCBfdGVtcFZlY3RvcjEsIF90ZW1wVmVjdG9yMywgX3RlbXBWZWN0b3I0IH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IE1hbmlmb2xkLCBDb2xsaXNpb24gfSBmcm9tIFwiLi4vY29sbGlzaW9uL21hbmlmb2xkXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuXHJcblxyXG4vLyDmjqXop6bnuqbmnZ9cclxuZXhwb3J0IGNsYXNzIENvbnRhY3Qge1xyXG4gICAgaWQ6IFtudW1iZXIsIG51bWJlcl07XHJcbiAgICBwb3NpdGlvbjogVmVjdG9yO1xyXG4gICAgc2hhcmVOb3JtYWw6IG51bWJlcjtcclxuICAgIHNoYXJlVGFuZ2VudDogbnVtYmVyO1xyXG4gICAgbm9ybWFsSW1wdWxzZTogbnVtYmVyO1xyXG4gICAgdGFuZ2VudEltcHVsc2U6IG51bWJlcjtcclxuICAgIG9mZnNldEE6IFZlY3RvcjtcclxuICAgIG9mZnNldEI6IFZlY3RvcjtcclxuICAgIGRlcHRoOiBudW1iZXI7XHJcbiAgICBwb3NpdGlvbkNvcnJlY3RpdmVJbXB1bHNlOiBudW1iZXI7XHJcbiAgICB2ZWxvY2l0eUJpYXM6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogW251bWJlciwgbnVtYmVyXSwgdmVydGV4OiBWZWN0b3IsIGRlcHRoOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHZlcnRleDtcclxuICAgICAgICB0aGlzLnNoYXJlTm9ybWFsID0gMDtcclxuICAgICAgICB0aGlzLnNoYXJlVGFuZ2VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxJbXB1bHNlID0gMDtcclxuICAgICAgICB0aGlzLnRhbmdlbnRJbXB1bHNlID0gMDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uQ29ycmVjdGl2ZUltcHVsc2UgPSAwO1xyXG4gICAgICAgIHRoaXMuZGVwdGggPSBkZXB0aDtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5QmlhcyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuKTkuKrnorDmkp7ngrnmmK/lkKbnm7jnrYlcclxuICAgICAqIEBwYXJhbSBjb250YWN0IFxyXG4gICAgICovXHJcbiAgICBlcXVhbChjb250YWN0OiBDb250YWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYodGhpcy5pZCA9PT0gbnVsbCB8fCBjb250YWN0LmlkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuaWQgPT09IGNvbnRhY3QuaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmlkWzBdID09PSBjb250YWN0LmlkWzBdICYmIHRoaXMuaWRbMV0gPT09IGNvbnRhY3QuaWRbMV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmlkWzBdID09PSBjb250YWN0LmlkWzFdICYmIHRoaXMuaWRbMV0gPT09IGNvbnRhY3QuaWRbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnorDmkp7msYLop6PlmahcclxuICovXHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGFjdENvbnN0cmFpbnQge1xyXG4gICAgLy8g56m/6YCP5L+u5q2j6K+v5beuXHJcbiAgICBwcml2YXRlIHNsb3A6IG51bWJlcjtcclxuICAgIC8vIOWBj+enu+WboOWtkFxyXG4gICAgcHJpdmF0ZSBiaWFzRmFjdG9yOiBudW1iZXI7XHJcbiAgICAvLyDpnZnmraLpmIjlgLxcclxuICAgIHByaXZhdGUgcmVzdEZhY3RvcjogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc2xvcCA9IDAuMDE7XHJcbiAgICAgICAgdGhpcy5iaWFzRmFjdG9yID0gMC4yO1xyXG4gICAgICAgIHRoaXMucmVzdEZhY3RvciA9IDI0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGUoaWQ6IFtudW1iZXIsIG51bWJlcl0sIHZlcnRleDogVmVjdG9yLCBkZXB0aDogbnVtYmVyKTogQ29udGFjdCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb250YWN0KGlkLCB2ZXJ0ZXgsIGRlcHRoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguino+mAn+W6pue6puadn+mihOWkhOeQhlxyXG4gICAgICogQHBhcmFtIG1hbmlmb2xkcyDnorDmkp7mtYHlvaJcclxuICAgICAqIEBwYXJhbSBkdCDmraXplb9cclxuICAgICAqL1xyXG4gICAgcHJlU29sdmVWZWxvY2l0eShtYW5pZm9sZHM6IE1hbmlmb2xkW10sIGR0OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbWFuaWZvbGQ6IE1hbmlmb2xkLFxyXG4gICAgICAgICAgICBjb2xsaXNpb246IENvbGxpc2lvbixcclxuICAgICAgICAgICAgY29udGFjdDogQ29udGFjdCxcclxuICAgICAgICAgICAgYm9keUE6IEJvZHksXHJcbiAgICAgICAgICAgIGJvZHlCOiBCb2R5LFxyXG4gICAgICAgICAgICBub3JtYWw6IFZlY3RvcixcclxuICAgICAgICAgICAgdGFuZ2VudDogVmVjdG9yLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWFuaWZvbGRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIG1hbmlmb2xkID0gbWFuaWZvbGRzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYoIW1hbmlmb2xkLmlzQWN0aXZlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbiA9IG1hbmlmb2xkLmNvbGxpc2lvbjtcclxuICAgICAgICAgICAgbm9ybWFsID0gY29sbGlzaW9uLm5vcm1hbDtcclxuICAgICAgICAgICAgdGFuZ2VudCA9IGNvbGxpc2lvbi50YW5nZW50O1xyXG4gICAgICAgICAgICBib2R5QSA9IGNvbGxpc2lvbi5ib2R5QTtcclxuICAgICAgICAgICAgYm9keUIgPSBjb2xsaXNpb24uYm9keUI7XHJcblxyXG4gICAgICAgICAgICBmb3IoaiA9IDA7IGogPCBjb2xsaXNpb24uY29udGFjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhY3QgPSBjb2xsaXNpb24uY29udGFjdHNbal07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5o6l6Kem54K55Yiw5Yia5L2TQei0qOW/g+eahOi3neemu1xyXG4gICAgICAgICAgICAgICAgY29udGFjdC5vZmZzZXRBID0gY29udGFjdC5wb3NpdGlvbi5zdWIoYm9keUEucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgLy8g5o6l6Kem54K55Yiw5Yia5L2TQui0qOW/g+eahOi3neemu1xyXG4gICAgICAgICAgICAgICAgY29udGFjdC5vZmZzZXRCID0gY29udGFjdC5wb3NpdGlvbi5zdWIoYm9keUIucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgaW52TWFzc05vcm1hbCA9IG1hbmlmb2xkLmludmVyc2VNYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGludk1hc3NUYW5nZW50ID0gbWFuaWZvbGQuaW52ZXJzZU1hc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgcjEgPSBjb250YWN0Lm9mZnNldEEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjIgPSBjb250YWN0Lm9mZnNldEIsXHJcbiAgICAgICAgICAgICAgICAgICAgcm4xID0gY29udGFjdC5vZmZzZXRBLmRvdChub3JtYWwpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJuMiA9IGNvbnRhY3Qub2Zmc2V0Qi5kb3Qobm9ybWFsKSxcclxuICAgICAgICAgICAgICAgICAgICBydDEgPSBjb250YWN0Lm9mZnNldEEuZG90KHRhbmdlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJ0MiA9IGNvbnRhY3Qub2Zmc2V0Qi5kb3QodGFuZ2VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6K6h566XIEooTV4tMSkoSl5UKS5cclxuICAgICAgICAgICAgICAgIGludk1hc3NOb3JtYWwgKz0gYm9keUEuaW52SW5lcnRpYSAqIChyMS5kb3QocjEpIC0gcm4xICogcm4xKTtcclxuICAgICAgICAgICAgICAgIGludk1hc3NOb3JtYWwgKz0gYm9keUIuaW52SW5lcnRpYSAqIChyMi5kb3QocjIpIC0gcm4yICogcm4yKTtcclxuICAgICAgICAgICAgICAgIGludk1hc3NUYW5nZW50ICs9IGJvZHlBLmludkluZXJ0aWEgKiAocjEuZG90KHIxKSAtIHJ0MSAqIHJ0MSk7XHJcbiAgICAgICAgICAgICAgICBpbnZNYXNzVGFuZ2VudCArPSBib2R5Qi5pbnZJbmVydGlhICogKHIyLmRvdChyMikgLSBydDIgKiBydDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBiaWFzID0gNjAgKiBNYXRoLm1heCgwLCBjb250YWN0LmRlcHRoIC0gdGhpcy5zbG9wKSAqIHRoaXMuYmlhc0ZhY3RvcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyDkv53lrZggSihNXi0xKShKXlQp55qE5YCS5pWwXHJcbiAgICAgICAgICAgICAgICBjb250YWN0LnNoYXJlTm9ybWFsID0gMSAvIGludk1hc3NOb3JtYWw7XHJcbiAgICAgICAgICAgICAgICBjb250YWN0LnNoYXJlVGFuZ2VudCA9IDEgLyBpbnZNYXNzVGFuZ2VudDtcclxuICAgICAgICAgICAgICAgIGNvbnRhY3QudmVsb2NpdHlCaWFzID0gYmlhcztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB3YXJtIHN0YXJ0XHJcbiAgICAgICAgICAgICAgICBpZihjb250YWN0Lm5vcm1hbEltcHVsc2UgIT09IDAgfHwgY29udGFjdC50YW5nZW50SW1wdWxzZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwID0gX3RlbXBWZWN0b3IzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwLnggPSBub3JtYWwueCAqIGNvbnRhY3Qubm9ybWFsSW1wdWxzZSArIHRhbmdlbnQueCAqIGNvbnRhY3QudGFuZ2VudEltcHVsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcC55ID0gbm9ybWFsLnkgKiBjb250YWN0Lm5vcm1hbEltcHVsc2UgKyB0YW5nZW50LnkgKiBjb250YWN0LnRhbmdlbnRJbXB1bHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBib2R5QS5hcHBseUltcHVsc2UocCwgY29udGFjdC5vZmZzZXRBKTtcclxuICAgICAgICAgICAgICAgICAgICBib2R5Qi5hcHBseUltcHVsc2UocC5pbnYocCksIGNvbnRhY3Qub2Zmc2V0Qik7IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDmsYLop6PpgJ/luqbnuqbmnZ9cclxuICAgICAqIOS9v+eUqHNlcXVlbnRpYWwgaW1wdWxzZei/m+ihjOW/q+mAn+aUtuaVm1xyXG4gICAgICog5Y+C6ICD77yaaHR0cHM6Ly9rZXZpbnl1Lm5ldC8yMDE4LzAxLzE3L3VuZGVyc3RhbmRpbmctY29uc3RyYWludC1zb2x2ZXItaW4tcGh5c2ljcy1lbmdpbmUvXHJcbiAgICAgKiBAcGFyYW0gbWFuaWZvbGRzXHJcbiAgICAgKiBAcHJpdmF0ZSBkdFxyXG4gICAgICovXHJcbiAgICBzb2x2ZVZlbG9jaXR5KG1hbmlmb2xkczogTWFuaWZvbGRbXSkge1xyXG4gICAgICAgIGxldCBtYW5pZm9sZDogTWFuaWZvbGQsXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbjogQ29sbGlzaW9uLFxyXG4gICAgICAgICAgICBjb250YWN0OiBDb250YWN0LFxyXG4gICAgICAgICAgICBib2R5QTogQm9keSxcclxuICAgICAgICAgICAgYm9keUI6IEJvZHksXHJcbiAgICAgICAgICAgIG5vcm1hbDogVmVjdG9yLFxyXG4gICAgICAgICAgICB0YW5nZW50OiBWZWN0b3IsXHJcbiAgICAgICAgICAgIG5vcm1hbEltcHVsc2UsXHJcbiAgICAgICAgICAgIHRhbmdlbnRJbXB1bHNlLFxyXG4gICAgICAgICAgICBtYXhGcmljdGlvbixcclxuICAgICAgICAgICAgdmVsb2NpdHlQb2ludEEsIC8vIOWImuS9k0HotKjlv4Pnm7jlr7nnorDmkp7ngrnnmoTpgJ/luqZcclxuICAgICAgICAgICAgdmVsb2NpdHlQb2ludEIsIC8vIOWImuS9k0LotKjlv4Pnm7jlr7nnorDmkp7ngrnnmoTpgJ/luqZcclxuICAgICAgICAgICAgcmVsYXRpdmVWZWxvY2l0eSwgLy8g55u45a+56YCf5bqmXHJcbiAgICAgICAgICAgIHJlbGF0aXZlTm9ybWFsVmVsb2NpdHksXHJcbiAgICAgICAgICAgIHJlbGF0aXZlVGFuZ2VudFZlbG9jaXR5LFxyXG4gICAgICAgICAgICBpbXB1bHNlID0gX3RlbXBWZWN0b3IzLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbWFuaWZvbGRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1hbmlmb2xkID0gbWFuaWZvbGRzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYoIW1hbmlmb2xkLmlzQWN0aXZlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbiA9IG1hbmlmb2xkLmNvbGxpc2lvbjtcclxuICAgICAgICAgICAgbm9ybWFsID0gY29sbGlzaW9uLm5vcm1hbDtcclxuICAgICAgICAgICAgdGFuZ2VudCA9IGNvbGxpc2lvbi50YW5nZW50O1xyXG4gICAgICAgICAgICBib2R5QSA9IGNvbGxpc2lvbi5ib2R5QTtcclxuICAgICAgICAgICAgYm9keUIgPSBjb2xsaXNpb24uYm9keUI7XHJcblxyXG4gICAgICAgICAgICBmb3IoaiA9IDA7IGogPCBjb2xsaXNpb24uY29udGFjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhY3QgPSBjb2xsaXNpb24uY29udGFjdHNbal07XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGFjdC5vZmZzZXRBLmNyb051bShib2R5QS5hbmd1bGFyVmVsb2NpdHksIF90ZW1wVmVjdG9yMSk7XHJcbiAgICAgICAgICAgICAgICBjb250YWN0Lm9mZnNldEIuY3JvTnVtKGJvZHlCLmFuZ3VsYXJWZWxvY2l0eSwgX3RlbXBWZWN0b3IyKTtcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5UG9pbnRBID0gYm9keUEudmVsb2NpdHkuYWRkKF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IxKTtcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5UG9pbnRCID0gYm9keUIudmVsb2NpdHkuYWRkKF90ZW1wVmVjdG9yMiwgX3RlbXBWZWN0b3IyKTtcclxuICAgICAgICAgICAgICAgIHJlbGF0aXZlVmVsb2NpdHkgPSB2ZWxvY2l0eVBvaW50Qi5zdWIodmVsb2NpdHlQb2ludEEsIF90ZW1wVmVjdG9yMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6K6h566X5rOV5ZCR55u45a+56YCf5bqmXHJcbiAgICAgICAgICAgICAgICByZWxhdGl2ZU5vcm1hbFZlbG9jaXR5ID0gbm9ybWFsLmRvdChyZWxhdGl2ZVZlbG9jaXR5KTtcclxuICAgICAgICAgICAgICAgIC8vIOiuoeeul+azleWQkeWGsumHj1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsSW1wdWxzZSA9IChyZWxhdGl2ZU5vcm1hbFZlbG9jaXR5ICsgY29udGFjdC52ZWxvY2l0eUJpYXMpICogY29udGFjdC5zaGFyZU5vcm1hbDtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZnJpY3Rpb25Ob3JtYWxJbXB1bHNlID0gY29udGFjdC5ub3JtYWxJbXB1bHNlO1xyXG4gICAgICAgICAgICAgICAgaWYoY29sbGlzaW9uLmlzUmV1c2UgJiYgcmVsYXRpdmVOb3JtYWxWZWxvY2l0eSA8IDAgJiYgcmVsYXRpdmVOb3JtYWxWZWxvY2l0eSAqKiAyID4gdGhpcy5yZXN0RmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdC5ub3JtYWxJbXB1bHNlID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcXVlbnRpYWwgaW1wdWxzZeaWueazle+8jOaUtuaVm+azleWQkeWGsumHj1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvbGROb3JtYWxJbXB1bHNlID0gY29udGFjdC5ub3JtYWxJbXB1bHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhY3Qubm9ybWFsSW1wdWxzZSA9IE1hdGgubWF4KG9sZE5vcm1hbEltcHVsc2UgKyBub3JtYWxJbXB1bHNlLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBub3JtYWxJbXB1bHNlID0gY29udGFjdC5ub3JtYWxJbXB1bHNlIC0gb2xkTm9ybWFsSW1wdWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvbk5vcm1hbEltcHVsc2UgKz0gbm9ybWFsSW1wdWxzZTtcclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOW6lOeUqOWGsumHj1xyXG4gICAgICAgICAgICAgICAgaW1wdWxzZS54ID0gbm9ybWFsLnggKiBub3JtYWxJbXB1bHNlO1xyXG4gICAgICAgICAgICAgICAgaW1wdWxzZS55ID0gbm9ybWFsLnkgKiBub3JtYWxJbXB1bHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGJvZHlBLmFwcGx5SW1wdWxzZShpbXB1bHNlLCBjb250YWN0Lm9mZnNldEEpO1xyXG4gICAgICAgICAgICAgICAgYm9keUIuYXBwbHlJbXB1bHNlKGltcHVsc2UuaW52KGltcHVsc2UpLCBjb250YWN0Lm9mZnNldEIpOyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWN0Lm9mZnNldEEuY3JvTnVtKGJvZHlBLmFuZ3VsYXJWZWxvY2l0eSwgX3RlbXBWZWN0b3IxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhY3Qub2Zmc2V0Qi5jcm9OdW0oYm9keUIuYW5ndWxhclZlbG9jaXR5LCBfdGVtcFZlY3RvcjIpO1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlQb2ludEEgPSBib2R5QS52ZWxvY2l0eS5hZGQoX3RlbXBWZWN0b3IxLCBfdGVtcFZlY3RvcjEpO1xyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlQb2ludEIgPSBib2R5Qi52ZWxvY2l0eS5hZGQoX3RlbXBWZWN0b3IyLCBfdGVtcFZlY3RvcjIpO1xyXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVWZWxvY2l0eSA9IHZlbG9jaXR5UG9pbnRCLnN1Yih2ZWxvY2l0eVBvaW50QSwgX3RlbXBWZWN0b3IxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDorqHnrpfliIflkJHnm7jlr7npgJ/luqZcclxuICAgICAgICAgICAgICAgIHJlbGF0aXZlVGFuZ2VudFZlbG9jaXR5ID0gdGFuZ2VudC5kb3QocmVsYXRpdmVWZWxvY2l0eSk7XHJcbiAgICAgICAgICAgICAgICAvLyDorqHnrpfliIflkJHlhrLph49cclxuICAgICAgICAgICAgICAgIHRhbmdlbnRJbXB1bHNlID0gcmVsYXRpdmVUYW5nZW50VmVsb2NpdHkgKiBjb250YWN0LnNoYXJlVGFuZ2VudDtcclxuICAgICAgICAgICAgICAgIC8vIOiuoeeul+acgOWkp+aRqeaTpuWKm1xyXG4gICAgICAgICAgICAgICAgbWF4RnJpY3Rpb24gPSBtYW5pZm9sZC5mcmljdGlvbiAqIGZyaWN0aW9uTm9ybWFsSW1wdWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZXF1ZW50aWFsIGltcHVsc2Xmlrnms5XvvIzmlLbmlZvliIflkJHlhrLph49cclxuICAgICAgICAgICAgICAgIGxldCBvbGRUYW5nZW50SW1wdWxzZSA9IGNvbnRhY3QudGFuZ2VudEltcHVsc2U7XHJcbiAgICAgICAgICAgICAgICBjb250YWN0LnRhbmdlbnRJbXB1bHNlID0gVXRpbC5jbGFtcChvbGRUYW5nZW50SW1wdWxzZSArIHRhbmdlbnRJbXB1bHNlLCAtbWF4RnJpY3Rpb24sIG1heEZyaWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRhbmdlbnRJbXB1bHNlID0gY29udGFjdC50YW5nZW50SW1wdWxzZSAtIG9sZFRhbmdlbnRJbXB1bHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOW6lOeUqOWGsumHj1xyXG4gICAgICAgICAgICAgICAgaW1wdWxzZS54ID0gdGFuZ2VudC54ICogdGFuZ2VudEltcHVsc2U7XHJcbiAgICAgICAgICAgICAgICBpbXB1bHNlLnkgPSB0YW5nZW50LnkgKiB0YW5nZW50SW1wdWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBib2R5QS5hcHBseUltcHVsc2UoaW1wdWxzZSwgY29udGFjdC5vZmZzZXRBKTtcclxuICAgICAgICAgICAgICAgIGJvZHlCLmFwcGx5SW1wdWxzZShpbXB1bHNlLmludihpbXB1bHNlKSwgY29udGFjdC5vZmZzZXRCKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.JointConstraint = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst matrix_1 = __webpack_require__(4);\r\nconst joint_1 = __webpack_require__(9);\r\n/**\r\n * 弹簧（距离）约束\r\n */\r\nclass JointConstraint {\r\n    constructor() {\r\n        this.biasFactor = 0.2;\r\n    }\r\n    static create(bodyA, bodyB, stiffness) {\r\n        return new joint_1.Joint(bodyA, bodyB, stiffness);\r\n    }\r\n    preSolveVelocity(joints, dt) {\r\n        for (let i = 0; i < joints.length; i++) {\r\n            let joint = joints[i], bodyA = joint.bodyA, bodyB = joint.bodyB, rotationA = bodyA ? bodyA.rotation : 0, rotationB = bodyB.rotation, invMassA = bodyA ? bodyA.invMass : 0, invMassB = bodyB.invMass, invInertiaA = bodyA ? bodyA.invInertia : 0, invInertiaB = bodyB.invInertia, rotA = matrix_1._tempMatrix1.rotate(rotationA), rotB = matrix_1._tempMatrix2.rotate(rotationB);\r\n            joint.rA = rotA.multiplyVec(joint.offsetA, joint.rA);\r\n            joint.rB = rotB.multiplyVec(joint.offsetB, joint.rB);\r\n            let K1 = matrix_1._tempMatrix1;\r\n            K1.r1.x = invMassA + invMassB;\r\n            K1.r1.y = 0;\r\n            K1.r2.x = 0;\r\n            K1.r2.y = invMassA + invMassB;\r\n            let K2 = matrix_1._tempMatrix2;\r\n            K2.r1.x = invInertiaA * joint.rA.y * joint.rA.y;\r\n            K2.r1.y = -invInertiaA * joint.rA.x * joint.rA.y;\r\n            K2.r2.x = -invInertiaA * joint.rA.x * joint.rA.y;\r\n            K2.r2.y = invInertiaA * joint.rA.x * joint.rA.x;\r\n            let K3 = matrix_1._tempMatrix3;\r\n            K3.r1.x = invInertiaB * joint.rB.y * joint.rB.y;\r\n            K3.r1.y = -invInertiaB * joint.rB.x * joint.rB.y;\r\n            K3.r2.x = -invInertiaB * joint.rB.x * joint.rB.y;\r\n            K3.r2.y = invInertiaB * joint.rB.x * joint.rB.x;\r\n            let K = K1.add(K2, matrix_1._tempMatrix1).add(K3, matrix_1._tempMatrix1);\r\n            K.r1.x += (1 - joint.stiffness);\r\n            K.r2.y += (1 - joint.stiffness);\r\n            joint.jointMatrix = K.invert();\r\n            let p1 = joint.globalPositionA.add(joint.rA, vector_1._tempVector1), p2 = joint.globalPositionB.add(joint.rB, vector_1._tempVector2), dp = p2.sub(p1);\r\n            joint.velocityBias.x = dp.x * (1 / dt) * -this.biasFactor;\r\n            joint.velocityBias.y = dp.y * (1 / dt) * -this.biasFactor;\r\n            bodyA.applyImpulse(joint.jointImpulse.inv(vector_1._tempVector4), joint.rA);\r\n            bodyB.applyImpulse(joint.jointImpulse, joint.rB);\r\n        }\r\n    }\r\n    solveVelocity(joints) {\r\n        for (let i = 0; i < joints.length; i++) {\r\n            let joint = joints[i], bodyA = joint.bodyA, bodyB = joint.bodyB, velocityA = bodyA ? bodyA.velocity : new vector_1.Vector(), velocityB = bodyB.velocity, angularVelocityA = bodyA ? bodyA.angularVelocity : 0, angularVelocityB = bodyB.angularVelocity;\r\n            joint.rA.croNum(angularVelocityA, vector_1._tempVector1);\r\n            joint.rB.croNum(angularVelocityB, vector_1._tempVector2);\r\n            let velocityPointA = velocityA.add(vector_1._tempVector1, vector_1._tempVector1), velocityPointB = velocityB.add(vector_1._tempVector2, vector_1._tempVector2), relativeVelocity = velocityPointB.sub(velocityPointA, vector_1._tempVector1), velocityBias = joint.velocityBias.sub(relativeVelocity), stiffnessImpulse = joint.jointImpulse.scl(1 - joint.stiffness), impulse = joint.jointMatrix.multiplyVec(velocityBias.sub(stiffnessImpulse));\r\n            joint.jointImpulse.x += impulse.x;\r\n            joint.jointImpulse.y += impulse.y;\r\n            bodyA.applyImpulse(impulse.inv(vector_1._tempVector4), joint.rA);\r\n            bodyB.applyImpulse(impulse, joint.rB);\r\n        }\r\n    }\r\n}\r\nexports.JointConstraint = JointConstraint;\r\n;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RyYWludC9qb2ludC50cz85MGM2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHdDQUFrRjtBQUNsRix3Q0FBMEU7QUFDMUUsdUNBQXVDO0FBTXZDOztHQUVHO0FBQ0gsTUFBYSxlQUFlO0lBR3hCO1FBQ0ksSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUM7SUFDMUIsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBVyxFQUFFLEtBQVcsRUFBRSxTQUFpQjtRQUNyRCxPQUFPLElBQUksYUFBSyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELGdCQUFnQixDQUFDLE1BQWUsRUFBRSxFQUFVO1FBQ3hDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ25DLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFDakIsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQ25CLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxFQUNuQixTQUFTLEdBQUcsS0FBSyxFQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUMsRUFDcEMsU0FBUyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQzFCLFFBQVEsR0FBRyxLQUFLLEVBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFDLENBQUMsQ0FBQyxFQUNsQyxRQUFRLEdBQUcsS0FBSyxDQUFDLE9BQU8sRUFDeEIsV0FBVyxHQUFHLEtBQUssRUFBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUMsQ0FBQyxDQUFDLEVBQ3hDLFdBQVcsR0FBRyxLQUFLLENBQUMsVUFBVSxFQUM5QixJQUFJLEdBQUcscUJBQVksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQ3JDLElBQUksR0FBRyxxQkFBWSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUUxQyxLQUFLLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDckQsS0FBSyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRXJELElBQUksRUFBRSxHQUFHLHFCQUFZLENBQUM7WUFDdEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsUUFBUSxHQUFHLFFBQVEsQ0FBQztZQUM5QixFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDWixFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDWixFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxRQUFRLEdBQUcsUUFBUSxDQUFDO1lBRTlCLElBQUksRUFBRSxHQUFHLHFCQUFZLENBQUM7WUFDdEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUksV0FBVyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUVqRCxJQUFJLEVBQUUsR0FBRyxxQkFBWSxDQUFDO1lBQ3RCLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFJLFdBQVcsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNqRCxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNqRCxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNqRCxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBSSxXQUFXLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFakQsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUscUJBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUscUJBQVksQ0FBQyxDQUFDO1lBQ3ZELENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNoQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFaEMsS0FBSyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7WUFFL0IsSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxxQkFBWSxDQUFDLEVBQ3RELEVBQUUsR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLHFCQUFZLENBQUMsRUFDdEQsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFcEIsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDMUQsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7WUFFMUQsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxxQkFBWSxDQUFDLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ25FLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDcEQ7SUFDTCxDQUFDO0lBRUQsYUFBYSxDQUFDLE1BQWU7UUFDekIsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUNqQixLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFDbkIsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQ25CLFNBQVMsR0FBRyxLQUFLLEVBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFDLENBQUMsSUFBSSxlQUFNLEVBQUUsRUFDL0MsU0FBUyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQzFCLGdCQUFnQixHQUFHLEtBQUssRUFBQyxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUMsQ0FBQyxDQUFDLEVBQ2xELGdCQUFnQixHQUFHLEtBQUssQ0FBQyxlQUFlLENBQUM7WUFFN0MsS0FBSyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEVBQUUscUJBQVksQ0FBQyxDQUFDO1lBQ2hELEtBQUssQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLGdCQUFnQixFQUFFLHFCQUFZLENBQUMsQ0FBQztZQUVoRCxJQUFJLGNBQWMsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLHFCQUFZLEVBQUUscUJBQVksQ0FBQyxFQUMxRCxjQUFjLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxxQkFBWSxFQUFFLHFCQUFZLENBQUMsRUFDMUQsZ0JBQWdCLEdBQUcsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUscUJBQVksQ0FBQyxFQUNuRSxZQUFZLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFDdkQsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsRUFDOUQsT0FBTyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1lBRWhGLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDbEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztZQUVsQyxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQVksQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN4RCxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDekM7SUFDTCxDQUFDO0NBQ0o7QUEzRkQsMENBMkZDO0FBQUEsQ0FBQyIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjdG9yLCBfdGVtcFZlY3RvcjEsIF90ZW1wVmVjdG9yMiwgX3RlbXBWZWN0b3I0IH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IF90ZW1wTWF0cml4MSwgX3RlbXBNYXRyaXgyLCBfdGVtcE1hdHJpeDMgfSBmcm9tIFwiLi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgSm9pbnQgfSBmcm9tIFwiLi4vam9pbnQvam9pbnRcIjtcclxuaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiDlvLnnsKfvvIjot53nprvvvInnuqbmnZ9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBKb2ludENvbnN0cmFpbnQge1xyXG4gICAgcHJpdmF0ZSBiaWFzRmFjdG9yOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5iaWFzRmFjdG9yID0gMC4yO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGUoYm9keUE6IEJvZHksIGJvZHlCOiBCb2R5LCBzdGlmZm5lc3M6IG51bWJlcik6IEpvaW50IHtcclxuICAgICAgICByZXR1cm4gbmV3IEpvaW50KGJvZHlBLCBib2R5Qiwgc3RpZmZuZXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVTb2x2ZVZlbG9jaXR5KGpvaW50czogSm9pbnRbXSwgZHQ6IG51bWJlcikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBqb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGpvaW50ID0gam9pbnRzW2ldLFxyXG4gICAgICAgICAgICAgICAgYm9keUEgPSBqb2ludC5ib2R5QSxcclxuICAgICAgICAgICAgICAgIGJvZHlCID0gam9pbnQuYm9keUIsXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbkEgPSBib2R5QT8gYm9keUEucm90YXRpb246IDAsXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbkIgPSBib2R5Qi5yb3RhdGlvbixcclxuICAgICAgICAgICAgICAgIGludk1hc3NBID0gYm9keUE/IGJvZHlBLmludk1hc3M6IDAsXHJcbiAgICAgICAgICAgICAgICBpbnZNYXNzQiA9IGJvZHlCLmludk1hc3MsXHJcbiAgICAgICAgICAgICAgICBpbnZJbmVydGlhQSA9IGJvZHlBPyBib2R5QS5pbnZJbmVydGlhOiAwLFxyXG4gICAgICAgICAgICAgICAgaW52SW5lcnRpYUIgPSBib2R5Qi5pbnZJbmVydGlhLFxyXG4gICAgICAgICAgICAgICAgcm90QSA9IF90ZW1wTWF0cml4MS5yb3RhdGUocm90YXRpb25BKSxcclxuICAgICAgICAgICAgICAgIHJvdEIgPSBfdGVtcE1hdHJpeDIucm90YXRlKHJvdGF0aW9uQik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBqb2ludC5yQSA9IHJvdEEubXVsdGlwbHlWZWMoam9pbnQub2Zmc2V0QSwgam9pbnQuckEpO1xyXG4gICAgICAgICAgICBqb2ludC5yQiA9IHJvdEIubXVsdGlwbHlWZWMoam9pbnQub2Zmc2V0Qiwgam9pbnQuckIpO1xyXG5cclxuICAgICAgICAgICAgbGV0IEsxID0gX3RlbXBNYXRyaXgxO1xyXG4gICAgICAgICAgICBLMS5yMS54ID0gaW52TWFzc0EgKyBpbnZNYXNzQjtcclxuICAgICAgICAgICAgSzEucjEueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEsxLnIyLnggPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBLMS5yMi55ID0gaW52TWFzc0EgKyBpbnZNYXNzQjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBLMiA9IF90ZW1wTWF0cml4MjtcclxuICAgICAgICAgICAgSzIucjEueCA9ICBpbnZJbmVydGlhQSAqIGpvaW50LnJBLnkgKiBqb2ludC5yQS55O1xyXG4gICAgICAgICAgICBLMi5yMS55ID0gLWludkluZXJ0aWFBICogam9pbnQuckEueCAqIGpvaW50LnJBLnk7XHJcbiAgICAgICAgICAgIEsyLnIyLnggPSAtaW52SW5lcnRpYUEgKiBqb2ludC5yQS54ICogam9pbnQuckEueTsgXHJcbiAgICAgICAgICAgIEsyLnIyLnkgPSAgaW52SW5lcnRpYUEgKiBqb2ludC5yQS54ICogam9pbnQuckEueDtcclxuICAgICAgICBcclxuICAgICAgICAgICAgbGV0IEszID0gX3RlbXBNYXRyaXgzO1xyXG4gICAgICAgICAgICBLMy5yMS54ID0gIGludkluZXJ0aWFCICogam9pbnQuckIueSAqIGpvaW50LnJCLnk7XHJcbiAgICAgICAgICAgIEszLnIxLnkgPSAtaW52SW5lcnRpYUIgKiBqb2ludC5yQi54ICogam9pbnQuckIueTtcclxuICAgICAgICAgICAgSzMucjIueCA9IC1pbnZJbmVydGlhQiAqIGpvaW50LnJCLnggKiBqb2ludC5yQi55OyBcclxuICAgICAgICAgICAgSzMucjIueSA9ICBpbnZJbmVydGlhQiAqIGpvaW50LnJCLnggKiBqb2ludC5yQi54O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IEsgPSBLMS5hZGQoSzIsIF90ZW1wTWF0cml4MSkuYWRkKEszLCBfdGVtcE1hdHJpeDEpO1xyXG4gICAgICAgICAgICBLLnIxLnggKz0gKDEgLSBqb2ludC5zdGlmZm5lc3MpO1xyXG4gICAgICAgICAgICBLLnIyLnkgKz0gKDEgLSBqb2ludC5zdGlmZm5lc3MpO1xyXG5cclxuICAgICAgICAgICAgam9pbnQuam9pbnRNYXRyaXggPSBLLmludmVydCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHAxID0gam9pbnQuZ2xvYmFsUG9zaXRpb25BLmFkZChqb2ludC5yQSwgX3RlbXBWZWN0b3IxKSxcclxuICAgICAgICAgICAgICAgIHAyID0gam9pbnQuZ2xvYmFsUG9zaXRpb25CLmFkZChqb2ludC5yQiwgX3RlbXBWZWN0b3IyKSxcclxuICAgICAgICAgICAgICAgIGRwID0gcDIuc3ViKHAxKTtcclxuXHJcbiAgICAgICAgICAgIGpvaW50LnZlbG9jaXR5Qmlhcy54ID0gZHAueCAqICgxIC8gZHQpICogLXRoaXMuYmlhc0ZhY3RvcjtcclxuICAgICAgICAgICAgam9pbnQudmVsb2NpdHlCaWFzLnkgPSBkcC55ICogKDEgLyBkdCkgKiAtdGhpcy5iaWFzRmFjdG9yO1xyXG5cclxuICAgICAgICAgICAgYm9keUEuYXBwbHlJbXB1bHNlKGpvaW50LmpvaW50SW1wdWxzZS5pbnYoX3RlbXBWZWN0b3I0KSwgam9pbnQuckEpO1xyXG4gICAgICAgICAgICBib2R5Qi5hcHBseUltcHVsc2Uoam9pbnQuam9pbnRJbXB1bHNlLCBqb2ludC5yQik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNvbHZlVmVsb2NpdHkoam9pbnRzOiBKb2ludFtdKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgam9pbnQgPSBqb2ludHNbaV0sXHJcbiAgICAgICAgICAgICAgICBib2R5QSA9IGpvaW50LmJvZHlBLFxyXG4gICAgICAgICAgICAgICAgYm9keUIgPSBqb2ludC5ib2R5QixcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5QSA9IGJvZHlBPyBib2R5QS52ZWxvY2l0eTogbmV3IFZlY3RvcigpLFxyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlCID0gYm9keUIudmVsb2NpdHksXHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyVmVsb2NpdHlBID0gYm9keUE/IGJvZHlBLmFuZ3VsYXJWZWxvY2l0eTogMCxcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXJWZWxvY2l0eUIgPSBib2R5Qi5hbmd1bGFyVmVsb2NpdHk7XHJcblxyXG4gICAgICAgICAgICBqb2ludC5yQS5jcm9OdW0oYW5ndWxhclZlbG9jaXR5QSwgX3RlbXBWZWN0b3IxKTtcclxuICAgICAgICAgICAgam9pbnQuckIuY3JvTnVtKGFuZ3VsYXJWZWxvY2l0eUIsIF90ZW1wVmVjdG9yMik7XHJcblxyXG4gICAgICAgICAgICBsZXQgdmVsb2NpdHlQb2ludEEgPSB2ZWxvY2l0eUEuYWRkKF90ZW1wVmVjdG9yMSwgX3RlbXBWZWN0b3IxKSxcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5UG9pbnRCID0gdmVsb2NpdHlCLmFkZChfdGVtcFZlY3RvcjIsIF90ZW1wVmVjdG9yMiksXHJcbiAgICAgICAgICAgICAgICByZWxhdGl2ZVZlbG9jaXR5ID0gdmVsb2NpdHlQb2ludEIuc3ViKHZlbG9jaXR5UG9pbnRBLCBfdGVtcFZlY3RvcjEpLFxyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlCaWFzID0gam9pbnQudmVsb2NpdHlCaWFzLnN1YihyZWxhdGl2ZVZlbG9jaXR5KSxcclxuICAgICAgICAgICAgICAgIHN0aWZmbmVzc0ltcHVsc2UgPSBqb2ludC5qb2ludEltcHVsc2Uuc2NsKDEgLSBqb2ludC5zdGlmZm5lc3MpLFxyXG4gICAgICAgICAgICAgICAgaW1wdWxzZSA9IGpvaW50LmpvaW50TWF0cml4Lm11bHRpcGx5VmVjKHZlbG9jaXR5Qmlhcy5zdWIoc3RpZmZuZXNzSW1wdWxzZSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgam9pbnQuam9pbnRJbXB1bHNlLnggKz0gaW1wdWxzZS54O1xyXG4gICAgICAgICAgICBqb2ludC5qb2ludEltcHVsc2UueSArPSBpbXB1bHNlLnk7XHJcblxyXG4gICAgICAgICAgICBib2R5QS5hcHBseUltcHVsc2UoaW1wdWxzZS5pbnYoX3RlbXBWZWN0b3I0KSwgam9pbnQuckEpO1xyXG4gICAgICAgICAgICBib2R5Qi5hcHBseUltcHVsc2UoaW1wdWxzZSwgam9pbnQuckIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n')},function(module,exports,__webpack_require__){"use strict";eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Joint = void 0;\r\nconst util_1 = __webpack_require__(1);\r\nconst matrix_1 = __webpack_require__(4);\r\nconst vector_1 = __webpack_require__(0);\r\nclass Joint {\r\n    constructor(bodyA, bodyB, stiffness) {\r\n        this.id = util_1.Util.id();\r\n        this.stiffness = stiffness;\r\n        this.velocityBias = new vector_1.Vector();\r\n        this.jointImpulse = new vector_1.Vector();\r\n        this.jointMatrix = new matrix_1.Matrix();\r\n        this.rA = new vector_1.Vector();\r\n        this.rB = new vector_1.Vector();\r\n        this.anchors = [];\r\n        this.render = () => { };\r\n        this.bodyB = bodyB;\r\n        this.bodyA = bodyA;\r\n        this.globalPositionA = this.bodyA.position;\r\n        this.globalPositionB = this.bodyB.position;\r\n        let rotB = matrix_1._tempMatrix2.rotate(this.bodyB.rotation);\r\n        this.offsetA = new vector_1.Vector();\r\n        this.offsetB = rotB.multiplyVec(this.globalPositionA.sub(this.globalPositionB));\r\n        this.bodyA.jointed = true;\r\n        this.bodyB.jointed = true;\r\n        this.needRender = true;\r\n    }\r\n    /**\r\n     *\r\n     * @param needRender\r\n     */\r\n    setNeedRender(needRender) {\r\n        this.needRender = needRender;\r\n    }\r\n    /**\r\n     * 设置用户想要携带的信息数据\r\n     * @param data 数据\r\n     */\r\n    setData(data) {\r\n        if (data !== null && data !== undefined) {\r\n            this.data = data;\r\n        }\r\n    }\r\n    /**\r\n     * 设置渲染函数\r\n     * @param fn\r\n     */\r\n    setRender(fn) {\r\n        if (fn && typeof fn === 'function')\r\n            this.render = fn;\r\n    }\r\n}\r\nexports.Joint = Joint;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvam9pbnQvam9pbnQudHM/ZDU1YyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxzQ0FBc0M7QUFDdEMsd0NBQXNEO0FBQ3RELHdDQUF3QztBQUl4QyxNQUFhLEtBQUs7SUE0QmQsWUFBWSxLQUFXLEVBQUUsS0FBVyxFQUFFLFNBQWlCO1FBQ25ELElBQUksQ0FBQyxFQUFFLEdBQUcsV0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxlQUFNLEVBQUUsQ0FBQztRQUVqQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksZUFBTSxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLGVBQU0sRUFBRSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxlQUFNLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksZUFBTSxFQUFFLENBQUM7UUFFdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQUM7UUFFdkIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFFbkIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUMzQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBRTNDLElBQUksSUFBSSxHQUFHLHFCQUFZLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGVBQU0sRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztRQUVoRixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDMUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBRTFCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxhQUFhLENBQUMsVUFBbUI7UUFDN0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDakMsQ0FBQztJQUVEOzs7T0FHRztJQUNILE9BQU8sQ0FBQyxJQUFTO1FBQ2IsSUFBRyxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDcEMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7U0FDcEI7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsU0FBUyxDQUFDLEVBQXlEO1FBQy9ELElBQUcsRUFBRSxJQUFJLE9BQU8sRUFBRSxLQUFLLFVBQVU7WUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUN4RCxDQUFDO0NBQ0o7QUFsRkQsc0JBa0ZDIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IE1hdHJpeCwgX3RlbXBNYXRyaXgyIH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBBbmNob3IgfSBmcm9tIFwiLi9hbmNob3JcIjtcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgSm9pbnQge1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIGJvZHlBOiBCb2R5O1xyXG4gICAgYm9keUI6IEJvZHk7XHJcblxyXG4gICAgZ2xvYmFsUG9zaXRpb25BOiBWZWN0b3I7XHJcbiAgICBnbG9iYWxQb3NpdGlvbkI6IFZlY3RvcjtcclxuXHJcbiAgICBvZmZzZXRBOiBWZWN0b3I7XHJcbiAgICBvZmZzZXRCOiBWZWN0b3I7XHJcblxyXG4gICAgYW5jaG9yczogQW5jaG9yW107XHJcblxyXG4gICAgc3RpZmZuZXNzOiBudW1iZXI7XHJcbiAgICB2ZWxvY2l0eUJpYXM6IFZlY3RvcjtcclxuICAgIGpvaW50SW1wdWxzZTogVmVjdG9yO1xyXG4gICAgam9pbnRNYXRyaXg6IE1hdHJpeDtcclxuXHJcbiAgICByQTogVmVjdG9yO1xyXG4gICAgckI6IFZlY3RvcjtcclxuXHJcbiAgICAvLyDmjILovb3nmoTmlbDmja5cclxuICAgIGRhdGE6IGFueTtcclxuICAgIC8vIOaYr+WQpumcgOimgea4suafk1xyXG4gICAgbmVlZFJlbmRlcjogYm9vbGVhbjtcclxuICAgIC8vIOa4suafk+WHveaVsFxyXG4gICAgcmVuZGVyOiBGdW5jdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihib2R5QTogQm9keSwgYm9keUI6IEJvZHksIHN0aWZmbmVzczogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IFV0aWwuaWQoKTtcclxuICAgICAgICB0aGlzLnN0aWZmbmVzcyA9IHN0aWZmbmVzcztcclxuICAgICAgICB0aGlzLnZlbG9jaXR5QmlhcyA9IG5ldyBWZWN0b3IoKTtcclxuXHJcbiAgICAgICAgdGhpcy5qb2ludEltcHVsc2UgPSBuZXcgVmVjdG9yKCk7XHJcbiAgICAgICAgdGhpcy5qb2ludE1hdHJpeCA9IG5ldyBNYXRyaXgoKTtcclxuICAgICAgICB0aGlzLnJBID0gbmV3IFZlY3RvcigpO1xyXG4gICAgICAgIHRoaXMuckIgPSBuZXcgVmVjdG9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5jaG9ycyA9IFtdO1xyXG4gICAgICAgIHRoaXMucmVuZGVyID0gKCkgPT4ge307XHJcblxyXG4gICAgICAgIHRoaXMuYm9keUIgPSBib2R5QjtcclxuICAgICAgICB0aGlzLmJvZHlBID0gYm9keUE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5nbG9iYWxQb3NpdGlvbkEgPSB0aGlzLmJvZHlBLnBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsUG9zaXRpb25CID0gdGhpcy5ib2R5Qi5wb3NpdGlvbjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgbGV0IHJvdEIgPSBfdGVtcE1hdHJpeDIucm90YXRlKHRoaXMuYm9keUIucm90YXRpb24pO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0QSA9IG5ldyBWZWN0b3IoKTtcclxuICAgICAgICB0aGlzLm9mZnNldEIgPSByb3RCLm11bHRpcGx5VmVjKHRoaXMuZ2xvYmFsUG9zaXRpb25BLnN1Yih0aGlzLmdsb2JhbFBvc2l0aW9uQikpO1xyXG5cclxuICAgICAgICB0aGlzLmJvZHlBLmpvaW50ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYm9keUIuam9pbnRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMubmVlZFJlbmRlciA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBuZWVkUmVuZGVyIFxyXG4gICAgICovXHJcbiAgICBzZXROZWVkUmVuZGVyKG5lZWRSZW5kZXI6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLm5lZWRSZW5kZXIgPSBuZWVkUmVuZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u55So5oi35oOz6KaB5pC65bim55qE5L+h5oGv5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gZGF0YSDmlbDmja5cclxuICAgICAqL1xyXG4gICAgc2V0RGF0YShkYXRhOiBhbnkpIHtcclxuICAgICAgICBpZihkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9rua4suafk+WHveaVsFxyXG4gICAgICogQHBhcmFtIGZuIFxyXG4gICAgICovXHJcbiAgICBzZXRSZW5kZXIoZm46IChqb2ludDogSm9pbnQsIGR0OiBudW1iZXIsIHRpbWVTdGFtcDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYoZm4gJiYgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB0aGlzLnJlbmRlciA9IGZuO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n")},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Manifold = exports.Collision = void 0;\r\nconst util_1 = __webpack_require__(1);\r\n/**\r\n * 一个碰撞结构，包含了碰撞的所有信息\r\n */\r\nclass Collision {\r\n    constructor() {\r\n        // 分离轴\r\n        this.axis = {\r\n            value: null,\r\n            oppositeVertexIndex: null,\r\n            supportVertexIndex: null,\r\n            opposite: null,\r\n            origin: null,\r\n            edge: null\r\n        };\r\n        // 是否发生了碰撞\r\n        this.collide = false;\r\n        // 该碰撞是否是复用状态\r\n        this.isReuse = false;\r\n    }\r\n}\r\nexports.Collision = Collision;\r\n;\r\n/**\r\n * 碰撞流形\r\n * 主要用于记录相互碰撞的刚体和进行碰撞缓存\r\n */\r\nclass Manifold {\r\n    constructor(collision, timeStamp) {\r\n        this.bodyA = collision.bodyA;\r\n        this.bodyB = collision.bodyB;\r\n        this.partA = collision.partA;\r\n        this.partB = collision.partB;\r\n        this.id = util_1.Util.compositeId(this.partA.id, this.partB.id);\r\n        this.collision = collision;\r\n        this.isActive = true;\r\n        this.confirmedActive = true;\r\n        this.timeCreated = timeStamp;\r\n        this.timeUpdated = timeStamp;\r\n        this.friction = 0;\r\n        this.restitution = 0;\r\n        this.inverseMass = 0;\r\n        this.update(collision, timeStamp);\r\n    }\r\n    /**\r\n     * 更新流形\r\n     * @param collision 碰撞信息\r\n     * @param timeStamp 时间戳\r\n     */\r\n    update(collision, timeStamp) {\r\n        // 如果该碰撞对真的发生了碰撞\r\n        if (collision.collide) {\r\n            let bodyA, bodyB;\r\n            bodyA = collision.bodyA;\r\n            bodyB = collision.bodyB;\r\n            this.friction = Math.sqrt(bodyA.friction * bodyB.friction);\r\n            this.restitution = (bodyA.restitution + bodyB.restitution) / 2;\r\n            this.inverseMass = bodyA.invMass + bodyB.invMass;\r\n            this.warmStart(collision);\r\n            this.toggleActive(true, timeStamp);\r\n        }\r\n        // 否则\r\n        else {\r\n            this.isActive && this.toggleActive(false, timeStamp);\r\n        }\r\n        this.collision = collision;\r\n    }\r\n    /**\r\n     * 更改流形激活状态\r\n     * @param active 激活状态\r\n     * @param timeStamp 时间戳\r\n     */\r\n    toggleActive(active, timeStamp) {\r\n        this.isActive = active;\r\n        if (active) {\r\n            this.timeUpdated = timeStamp;\r\n        }\r\n    }\r\n    /**\r\n     * 热启动\r\n     * @param collision\r\n     */\r\n    warmStart(collision) {\r\n        let oldContacts = collision.prevContacts || this.collision.contacts, newContacts = collision.contacts;\r\n        for (let i = 0; i < newContacts.length; i++) {\r\n            for (let j = 0; j < oldContacts.length; j++) {\r\n                if (newContacts[i].equal(oldContacts[j])) {\r\n                    newContacts[i].normalImpulse = oldContacts[j].normalImpulse;\r\n                    newContacts[i].tangentImpulse = oldContacts[j].tangentImpulse;\r\n                }\r\n            }\r\n        }\r\n        collision.prevContacts = newContacts;\r\n    }\r\n}\r\nexports.Manifold = Manifold;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL21hbmlmb2xkLnRzP2JiZWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsc0NBQXNDO0FBTXRDOztHQUVHO0FBRUgsTUFBYSxTQUFTO0lBQXRCO1FBU0ksTUFBTTtRQUNOLFNBQUksR0FBUztZQUNULEtBQUssRUFBRSxJQUFJO1lBQ1gsbUJBQW1CLEVBQUUsSUFBSTtZQUN6QixrQkFBa0IsRUFBRSxJQUFJO1lBQ3hCLFFBQVEsRUFBRSxJQUFJO1lBQ2QsTUFBTSxFQUFFLElBQUk7WUFDWixJQUFJLEVBQUUsSUFBSTtTQUNiLENBQUM7UUFXRixVQUFVO1FBQ1YsWUFBTyxHQUFZLEtBQUssQ0FBQztRQUN6QixhQUFhO1FBQ2IsWUFBTyxHQUFZLEtBQUssQ0FBQztJQUM3QixDQUFDO0NBQUE7QUFoQ0QsOEJBZ0NDO0FBQUEsQ0FBQztBQUdGOzs7R0FHRztBQUNILE1BQWEsUUFBUTtJQTJCakIsWUFBWSxTQUFvQixFQUFFLFNBQWlCO1FBQy9DLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQztRQUM3QixJQUFJLENBQUMsRUFBRSxHQUFHLFdBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6RCxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUMzQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztRQUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztRQUM3QixJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztRQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUVyQixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILE1BQU0sQ0FBQyxTQUFvQixFQUFFLFNBQWlCO1FBQzFDLGdCQUFnQjtRQUNoQixJQUFHLFNBQVMsQ0FBQyxPQUFPLEVBQUU7WUFDbEIsSUFBSSxLQUFXLEVBQUUsS0FBVyxDQUFDO1lBRTdCLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDO1lBQ3hCLEtBQUssR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDO1lBRXhCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzRCxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9ELElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO1lBRWpELElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDdEM7UUFDRCxLQUFLO2FBQ0E7WUFDRCxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1NBQ3hEO1FBRUQsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDL0IsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxZQUFZLENBQUMsTUFBZSxFQUFFLFNBQWlCO1FBQzNDLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO1FBRXZCLElBQUcsTUFBTSxFQUFFO1lBQ1AsSUFBSSxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUM7U0FDaEM7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsU0FBUyxDQUFDLFNBQW9CO1FBQzFCLElBQUksV0FBVyxHQUFHLFNBQVMsQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQy9ELFdBQVcsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDO1FBRXJDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3hDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN4QyxJQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ3JDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQztvQkFDNUQsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDO2lCQUNqRTthQUNKO1NBQ0o7UUFFRCxTQUFTLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQztJQUN6QyxDQUFDO0NBQ0o7QUF6R0QsNEJBeUdDIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuaW1wb3J0IHsgVmVjdG9yLCBfdGVtcFZlY3RvcjMgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgVXRpbCB9IGZyb20gXCIuLi9jb21tb24vdXRpbFwiO1xyXG5pbXBvcnQgeyBBeGlzIH0gZnJvbSBcIi4uL2NvbW1vbi92ZXJ0aWNlc1wiO1xyXG5pbXBvcnQgeyBDb250YWN0IH0gZnJvbSBcIi4uL2NvbnN0cmFpbnQvY29udGFjdFwiO1xyXG5cclxuXHJcblxyXG4vKipcclxuICog5LiA5Liq56Kw5pKe57uT5p6E77yM5YyF5ZCr5LqG56Kw5pKe55qE5omA5pyJ5L+h5oGvXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbGxpc2lvbiB7XHJcbiAgICAvLyDnorDmkp7liJrkvZNBXHJcbiAgICBib2R5QTogQm9keTtcclxuICAgIC8vIOeisOaSnuWImuS9k0JcclxuICAgIGJvZHlCOiBCb2R5O1xyXG4gICAgLy8g56Kw5pKe5a2Q5Zu+5b2iQVxyXG4gICAgcGFydEE6IEJvZHk7XHJcbiAgICAvLyDnorDmkp7lrZDlm77lvaJCXHJcbiAgICBwYXJ0QjogQm9keTtcclxuICAgIC8vIOWIhuemu+i9tFxyXG4gICAgYXhpczogQXhpcyA9IHtcclxuICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICBvcHBvc2l0ZVZlcnRleEluZGV4OiBudWxsLFxyXG4gICAgICAgIHN1cHBvcnRWZXJ0ZXhJbmRleDogbnVsbCxcclxuICAgICAgICBvcHBvc2l0ZTogbnVsbCxcclxuICAgICAgICBvcmlnaW46IG51bGwsXHJcbiAgICAgICAgZWRnZTogbnVsbFxyXG4gICAgfTtcclxuICAgIC8vIOeisOaSnuazlee6v1xyXG4gICAgbm9ybWFsOiBWZWN0b3I7XHJcbiAgICAvLyDnorDmkp7liIfnur9cclxuICAgIHRhbmdlbnQ6IFZlY3RvcjtcclxuICAgIC8vIOaOpeinpueCuVxyXG4gICAgY29udGFjdHM6IENvbnRhY3RbXTtcclxuICAgIC8vIOS4iuS4gOaJueaOpeinpueCuVxyXG4gICAgcHJldkNvbnRhY3RzOiBDb250YWN0W107XHJcbiAgICAvLyDlr7nkvY3lpJrovrnlvaLlnKjms5Xnur/mlrnlkJHkuIrmnIDmjqXov5HmnKzlpJrovrnlvaLnmoTpobbngrnnmoTkuIvmoIdcclxuICAgIG9wcG9zaXRlQ2xvc2VzdEluZGV4OiBudW1iZXI7XHJcbiAgICAvLyDmmK/lkKblj5HnlJ/kuobnorDmkp5cclxuICAgIGNvbGxpZGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIC8vIOivpeeisOaSnuaYr+WQpuaYr+WkjeeUqOeKtuaAgVxyXG4gICAgaXNSZXVzZTogYm9vbGVhbiA9IGZhbHNlO1xyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiDnorDmkp7mtYHlvaJcclxuICog5Li76KaB55So5LqO6K6w5b2V55u45LqS56Kw5pKe55qE5Yia5L2T5ZKM6L+b6KGM56Kw5pKe57yT5a2YXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWFuaWZvbGQge1xyXG4gICAgLy8gaWRcclxuICAgIGlkOiBzdHJpbmc7XHJcblxyXG4gICAgYm9keUE6IEJvZHk7XHJcbiAgICBib2R5QjogQm9keTtcclxuICAgIHBhcnRBOiBCb2R5O1xyXG4gICAgcGFydEI6IEJvZHk7XHJcbiAgICAvLyDnorDmkp7kv6Hmga9cclxuICAgIGNvbGxpc2lvbjogQ29sbGlzaW9uO1xyXG4gICAgLy8g5r+A5rS754q25oCBXHJcbiAgICAvLyDmv4DmtLvnirbmgIHnmoTmhI/mgJ3ljbPkuIrkuIDmrKHmm7TmlrDml7bmtYHlvaLmmK/lkKblj5HnlJ/norDmkp7vvIzoi6XmmK/vvIzliJnooajnpLror6XmtYHlvaLlnKjmv4DmtLvnirbmgIFcclxuICAgIGlzQWN0aXZlOiBib29sZWFuO1xyXG4gICAgLy8g56Gu6K6k5r+A5rS754q25oCBXHJcbiAgICAvLyDnoa7orqTmv4DmtLvnirbmgIHmhI/mgJ3ljbPmmK/lvZPliY3mm7TmlrDml7bmtYHlvaLmmK/lkKbmv4DmtLtcclxuICAgIGNvbmZpcm1lZEFjdGl2ZTogYm9vbGVhbjtcclxuICAgIC8vIOa1geW9ouWIm+W7uuaXtumXtFxyXG4gICAgdGltZUNyZWF0ZWQ6IG51bWJlcjtcclxuICAgIC8vIOa1geW9ouabtOaWsOaXtumXtFxyXG4gICAgdGltZVVwZGF0ZWQ6IG51bWJlcjtcclxuICAgIC8vIOaRqeaTpuWKm1xyXG4gICAgZnJpY3Rpb246IG51bWJlcjtcclxuICAgIC8vIOaBouWkjeezu+aVsFxyXG4gICAgcmVzdGl0dXRpb246IG51bWJlcjtcclxuICAgIC8vIOi0qOmHj+WSjOWAkuaVsFxyXG4gICAgaW52ZXJzZU1hc3M6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb2xsaXNpb246IENvbGxpc2lvbiwgdGltZVN0YW1wOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmJvZHlBID0gY29sbGlzaW9uLmJvZHlBO1xyXG4gICAgICAgIHRoaXMuYm9keUIgPSBjb2xsaXNpb24uYm9keUI7XHJcbiAgICAgICAgdGhpcy5wYXJ0QSA9IGNvbGxpc2lvbi5wYXJ0QTtcclxuICAgICAgICB0aGlzLnBhcnRCID0gY29sbGlzaW9uLnBhcnRCO1xyXG4gICAgICAgIHRoaXMuaWQgPSBVdGlsLmNvbXBvc2l0ZUlkKHRoaXMucGFydEEuaWQsIHRoaXMucGFydEIuaWQpO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uID0gY29sbGlzaW9uO1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY29uZmlybWVkQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnRpbWVDcmVhdGVkID0gdGltZVN0YW1wO1xyXG4gICAgICAgIHRoaXMudGltZVVwZGF0ZWQgPSB0aW1lU3RhbXA7XHJcbiAgICAgICAgdGhpcy5mcmljdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5pbnZlcnNlTWFzcyA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlKGNvbGxpc2lvbiwgdGltZVN0YW1wKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOa1geW9olxyXG4gICAgICogQHBhcmFtIGNvbGxpc2lvbiDnorDmkp7kv6Hmga9cclxuICAgICAqIEBwYXJhbSB0aW1lU3RhbXAg5pe26Ze05oizXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZShjb2xsaXNpb246IENvbGxpc2lvbiwgdGltZVN0YW1wOiBudW1iZXIpIHtcclxuICAgICAgICAvLyDlpoLmnpzor6XnorDmkp7lr7nnnJ/nmoTlj5HnlJ/kuobnorDmkp5cclxuICAgICAgICBpZihjb2xsaXNpb24uY29sbGlkZSkge1xyXG4gICAgICAgICAgICBsZXQgYm9keUE6IEJvZHksIGJvZHlCOiBCb2R5O1xyXG5cclxuICAgICAgICAgICAgYm9keUEgPSBjb2xsaXNpb24uYm9keUE7XHJcbiAgICAgICAgICAgIGJvZHlCID0gY29sbGlzaW9uLmJvZHlCO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mcmljdGlvbiA9IE1hdGguc3FydChib2R5QS5mcmljdGlvbiAqIGJvZHlCLmZyaWN0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IChib2R5QS5yZXN0aXR1dGlvbiArIGJvZHlCLnJlc3RpdHV0aW9uKSAvIDI7XHJcbiAgICAgICAgICAgIHRoaXMuaW52ZXJzZU1hc3MgPSBib2R5QS5pbnZNYXNzICsgYm9keUIuaW52TWFzcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMud2FybVN0YXJ0KGNvbGxpc2lvbik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQWN0aXZlKHRydWUsIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWQpuWImVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlICYmIHRoaXMudG9nZ2xlQWN0aXZlKGZhbHNlLCB0aW1lU3RhbXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb24gPSBjb2xsaXNpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlLnmtYHlvaLmv4DmtLvnirbmgIFcclxuICAgICAqIEBwYXJhbSBhY3RpdmUg5r+A5rS754q25oCBXHJcbiAgICAgKiBAcGFyYW0gdGltZVN0YW1wIOaXtumXtOaIs1xyXG4gICAgICovXHJcbiAgICB0b2dnbGVBY3RpdmUoYWN0aXZlOiBib29sZWFuLCB0aW1lU3RhbXA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBhY3RpdmU7XHJcblxyXG4gICAgICAgIGlmKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVVcGRhdGVkID0gdGltZVN0YW1wO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeDreWQr+WKqFxyXG4gICAgICogQHBhcmFtIGNvbGxpc2lvbiBcclxuICAgICAqL1xyXG4gICAgd2FybVN0YXJ0KGNvbGxpc2lvbjogQ29sbGlzaW9uKSB7XHJcbiAgICAgICAgbGV0IG9sZENvbnRhY3RzID0gY29sbGlzaW9uLnByZXZDb250YWN0cyB8fCB0aGlzLmNvbGxpc2lvbi5jb250YWN0cyxcclxuICAgICAgICAgICAgbmV3Q29udGFjdHMgPSBjb2xsaXNpb24uY29udGFjdHM7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuZXdDb250YWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgb2xkQ29udGFjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKG5ld0NvbnRhY3RzW2ldLmVxdWFsKG9sZENvbnRhY3RzW2pdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnRhY3RzW2ldLm5vcm1hbEltcHVsc2UgPSBvbGRDb250YWN0c1tqXS5ub3JtYWxJbXB1bHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbnRhY3RzW2ldLnRhbmdlbnRJbXB1bHNlID0gb2xkQ29udGFjdHNbal0udGFuZ2VudEltcHVsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbGxpc2lvbi5wcmV2Q29udGFjdHMgPSBuZXdDb250YWN0cztcclxuICAgIH1cclxufVxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///10\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Circle = void 0;\r\nconst body_1 = __webpack_require__(2);\r\nconst vector_1 = __webpack_require__(0);\r\nconst arcs_1 = __webpack_require__(6);\r\nclass Circle extends body_1.Body {\r\n    constructor(opt) {\r\n        super(opt, body_1.bodyType.circle);\r\n    }\r\n    getArea() {\r\n        return Math.PI * this.radius * this.radius;\r\n    }\r\n    getCentroid() {\r\n        return this.origin.col();\r\n    }\r\n    getInertia(position) {\r\n        return 0.5 * this.mass * Math.pow(this.radius, 2);\r\n    }\r\n    getBound() {\r\n        return arcs_1.Arcs.getBound(this.position, this.radius);\r\n    }\r\n    translate(dx, dy) {\r\n        // 位移图形原点\r\n        this.origin.x += dx;\r\n        this.origin.y += dy;\r\n        // 位移包围盒\r\n        this.bound.translate(dx, dy);\r\n    }\r\n    rotate(radian) {\r\n        if (this.rotateCenter === this.position)\r\n            return;\r\n        let ox = this.origin.x, oy = this.origin.y;\r\n        this.origin = this.origin.rot(radian, this.rotateCenter, this.origin);\r\n        this.bound.translate(this.origin.x - ox, this.origin.y - oy);\r\n    }\r\n    isContains(x, y) {\r\n        return arcs_1.Arcs.isContains(this, new vector_1.Vector(x, y));\r\n    }\r\n}\r\nexports.Circle = Circle;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9jaXJjbGUudHM/NWFiNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxzQ0FBaUQ7QUFDakQsd0NBQXdDO0FBQ3hDLHNDQUFzQztBQWF0QyxNQUFhLE1BQU8sU0FBUSxXQUFJO0lBSTVCLFlBQVksR0FBYztRQUN0QixLQUFLLENBQUMsR0FBRyxFQUFFLGVBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLEVBQUUsR0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDM0MsQ0FBQztJQUVELFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVELFVBQVUsQ0FBQyxRQUFpQjtRQUN4QixPQUFPLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsUUFBUTtRQUNKLE9BQU8sV0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsU0FBUyxDQUFDLEVBQVUsRUFBRSxFQUFVO1FBQzVCLFNBQVM7UUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRXBCLFFBQVE7UUFDUixJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVELE1BQU0sQ0FBQyxNQUFjO1FBQ2pCLElBQUcsSUFBSSxDQUFDLFlBQVksS0FBSyxJQUFJLENBQUMsUUFBUTtZQUFFLE9BQU87UUFFL0MsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQ2xCLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUV2QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0RSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELFVBQVUsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUMzQixPQUFPLFdBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7Q0FDSjtBQTlDRCx3QkE4Q0MiLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5LCBCb2R5T3B0LCBib2R5VHlwZSB9IGZyb20gXCIuL2JvZHlcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEFyY3MgfSBmcm9tIFwiLi4vY29tbW9uL2FyY3NcIjtcclxuaW1wb3J0IHsgQm91bmQgfSBmcm9tIFwiLi4vY29tbW9uL2JvdW5kXCI7XHJcblxyXG4vKipcclxuICog5ZyG5b2i5Yia5L2TXHJcbiAqL1xyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2lyY2xlT3B0IGV4dGVuZHMgQm9keU9wdCB7XHJcbiAgICByYWRpdXM6IG51bWJlcjtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBDaXJjbGUgZXh0ZW5kcyBCb2R5IHtcclxuICAgIC8vIOWNiuW+hFxyXG4gICAgcmFkaXVzOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBDaXJjbGVPcHQpIHtcclxuICAgICAgICBzdXBlcihvcHQsIGJvZHlUeXBlLmNpcmNsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJlYSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLlBJKnRoaXMucmFkaXVzKnRoaXMucmFkaXVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENlbnRyb2lkKCk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luLmNvbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluZXJ0aWEocG9zaXRpb24/OiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAwLjUgKiB0aGlzLm1hc3MgKiBNYXRoLnBvdyh0aGlzLnJhZGl1cywgMik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Qm91bmQoKTogQm91bmQge1xyXG4gICAgICAgIHJldHVybiBBcmNzLmdldEJvdW5kKHRoaXMucG9zaXRpb24sIHRoaXMucmFkaXVzKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2xhdGUoZHg6IG51bWJlciwgZHk6IG51bWJlcikge1xyXG4gICAgICAgIC8vIOS9jeenu+WbvuW9ouWOn+eCuVxyXG4gICAgICAgIHRoaXMub3JpZ2luLnggKz0gZHg7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4ueSArPSBkeTtcclxuXHJcbiAgICAgICAgLy8g5L2N56e75YyF5Zu055uSXHJcbiAgICAgICAgdGhpcy5ib3VuZC50cmFuc2xhdGUoZHgsIGR5KTtcclxuICAgIH1cclxuXHJcbiAgICByb3RhdGUocmFkaWFuOiBudW1iZXIpIHtcclxuICAgICAgICBpZih0aGlzLnJvdGF0ZUNlbnRlciA9PT0gdGhpcy5wb3NpdGlvbikgcmV0dXJuO1xyXG5cclxuICAgICAgICBsZXQgb3ggPSB0aGlzLm9yaWdpbi54LFxyXG4gICAgICAgICAgICBveSA9IHRoaXMub3JpZ2luLnk7XHJcblxyXG4gICAgICAgIHRoaXMub3JpZ2luID0gdGhpcy5vcmlnaW4ucm90KHJhZGlhbiwgdGhpcy5yb3RhdGVDZW50ZXIsIHRoaXMub3JpZ2luKTtcclxuICAgICAgICB0aGlzLmJvdW5kLnRyYW5zbGF0ZSh0aGlzLm9yaWdpbi54IC0gb3gsIHRoaXMub3JpZ2luLnkgLSBveSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNDb250YWlucyh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBBcmNzLmlzQ29udGFpbnModGhpcywgbmV3IFZlY3Rvcih4LCB5KSk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.BodiesFactory = void 0;\r\nconst circle_1 = __webpack_require__(11);\r\nconst polygon_1 = __webpack_require__(13);\r\nconst rect_1 = __webpack_require__(24);\r\nconst vector_1 = __webpack_require__(0);\r\nconst util_1 = __webpack_require__(1);\r\nconst composite_1 = __webpack_require__(25);\r\nconst vertices_1 = __webpack_require__(3);\r\nexports.BodiesFactory = {\r\n    /**\r\n     * 创造圆形\r\n     * @param x x\r\n     * @param y y\r\n     * @param radius 半径\r\n     * @param opt 配置项\r\n     */\r\n    Circle(x, y, radius, opt) {\r\n        opt = opt || {};\r\n        util_1.Util.extend(opt, {\r\n            origin: new vector_1.Vector(x, y),\r\n            radius: radius\r\n        });\r\n        return new circle_1.Circle(opt);\r\n        ;\r\n    },\r\n    /**\r\n     * 创造多边形\r\n     * @param x x\r\n     * @param y y\r\n     * @param v 顶点集\r\n     * @param opt 配置项\r\n     */\r\n    Polygon(x, y, v, opt) {\r\n        let vertices = v.map(vertex => new vector_1.Vector(vertex[0], vertex[1])), options = opt || { origin: new vector_1.Vector(x, y) };\r\n        vertices_1.Vertices.filterCollinearVertex(vertices);\r\n        // 若输入的顶点列表是凹多边形，则将其拆分为由凸多边形组合成的组合图形\r\n        if (vertices_1.Vertices.isConcave(vertices)) {\r\n            let vertexLists = vertices_1.Vertices.split(vertices), polygons = [], composite;\r\n            for (let i = 0; i < vertexLists.length; i++) {\r\n                polygons.push(new polygon_1.Polygon({\r\n                    origin: new vector_1.Vector(x, y),\r\n                    vertices: vertexLists[i]\r\n                }));\r\n            }\r\n            composite = new composite_1.Composite(Object.assign(Object.assign({}, options), { bodies: polygons, useParentProps: true }));\r\n            return composite;\r\n        }\r\n        else {\r\n            util_1.Util.extend(options, {\r\n                origin: new vector_1.Vector(x, y),\r\n                vertices\r\n            });\r\n            return new polygon_1.Polygon(options);\r\n        }\r\n    },\r\n    /**\r\n     * 创造矩形\r\n     * @param x x\r\n     * @param y y\r\n     * @param width 宽\r\n     * @param height 高\r\n     * @param opt 配置项\r\n     */\r\n    Rect(x, y, width, height, opt) {\r\n        opt = opt || {};\r\n        util_1.Util.extend(opt, {\r\n            origin: new vector_1.Vector(x, y),\r\n            width,\r\n            height\r\n        });\r\n        return new rect_1.Rect(opt);\r\n    },\r\n    /**\r\n     * 创造复合图形\r\n     * @param bodies\r\n     */\r\n    Composite(bodies, opt) {\r\n        opt = opt || {};\r\n        opt.bodies = bodies;\r\n        return new composite_1.Composite(opt);\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9ib2RpZXNGYWN0b3J5LnRzPzE2ZmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEseUNBQW1EO0FBQ25ELDBDQUFzRDtBQUN0RCx1Q0FBNkM7QUFDN0Msd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0Qyw0Q0FBNEQ7QUFFNUQsMENBQThDO0FBSWpDLHFCQUFhLEdBQUc7SUFFekI7Ozs7OztPQU1HO0lBQ0gsTUFBTSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsTUFBYyxFQUFFLEdBQUk7UUFDN0MsR0FBRyxHQUFHLEdBQUcsSUFBZSxFQUFFLENBQUM7UUFFM0IsV0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDYixNQUFNLEVBQUUsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN4QixNQUFNLEVBQUUsTUFBTTtTQUNqQixDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksZUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQUEsQ0FBQztJQUM1QixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsT0FBTyxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBa0IsRUFBRSxHQUFHO1FBQ2pELElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLGVBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFDNUQsT0FBTyxHQUFHLEdBQUcsSUFBK0IsRUFBRSxNQUFNLEVBQUUsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFFN0UsbUJBQVEsQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUV6QyxvQ0FBb0M7UUFDcEMsSUFBRyxtQkFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUM3QixJQUFJLFdBQVcsR0FBRyxtQkFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFDdEMsUUFBUSxHQUFjLEVBQUUsRUFDeEIsU0FBb0IsQ0FBQztZQUV6QixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDeEMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLGlCQUFPLENBQUM7b0JBQ3RCLE1BQU0sRUFBRSxJQUFJLGVBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN4QixRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztpQkFDM0IsQ0FBQyxDQUFDLENBQUM7YUFDUDtZQUVELFNBQVMsR0FBRyxJQUFJLHFCQUFTLGlDQUNsQixPQUFPLEtBQ1YsTUFBTSxFQUFFLFFBQVEsRUFDaEIsY0FBYyxFQUFFLElBQUksSUFDdEIsQ0FBQztZQUVILE9BQU8sU0FBUyxDQUFDO1NBQ3BCO2FBQ0k7WUFDRCxXQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtnQkFDakIsTUFBTSxFQUFFLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3hCLFFBQVE7YUFDWCxDQUFDLENBQUM7WUFFSCxPQUFPLElBQUksaUJBQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUMvQjtJQUNMLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsSUFBSSxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsS0FBYSxFQUFFLE1BQWMsRUFBRSxHQUFHO1FBQ3pELEdBQUcsR0FBRyxHQUFHLElBQWEsRUFBRSxDQUFDO1FBRXpCLFdBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO1lBQ2IsTUFBTSxFQUFFLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDeEIsS0FBSztZQUNMLE1BQU07U0FDVCxDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksV0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxTQUFTLENBQUMsTUFBYyxFQUFFLEdBQUc7UUFDekIsR0FBRyxHQUFHLEdBQUcsSUFBa0IsRUFBRSxDQUFDO1FBQzlCLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3BCLE9BQU8sSUFBSSxxQkFBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzlCLENBQUM7Q0FDSiIsImZpbGUiOiIxMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENpcmNsZSwgQ2lyY2xlT3B0IH0gZnJvbSBcIi4uL2JvZHkvY2lyY2xlXCI7XHJcbmltcG9ydCB7IFBvbHlnb24sIFBvbHlnb25PcHQgfSBmcm9tIFwiLi4vYm9keS9wb2x5Z29uXCI7XHJcbmltcG9ydCB7IFJlY3QsIFJlY3RPcHQgfSBmcm9tIFwiLi4vYm9keS9yZWN0XCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IENvbXBvc2l0ZSwgQ29tcG9zaXRlT3B0IH0gZnJvbSBcIi4uL2JvZHkvY29tcG9zaXRlXCI7XHJcbmltcG9ydCB7IEJvZHkgfSBmcm9tIFwiLi4vYm9keS9ib2R5XCI7XHJcbmltcG9ydCB7IFZlcnRpY2VzIH0gZnJvbSBcIi4uL2NvbW1vbi92ZXJ0aWNlc1wiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY29uc3QgQm9kaWVzRmFjdG9yeSA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIm+mAoOWchuW9olxyXG4gICAgICogQHBhcmFtIHggeFxyXG4gICAgICogQHBhcmFtIHkgeVxyXG4gICAgICogQHBhcmFtIHJhZGl1cyDljYrlvoQgXHJcbiAgICAgKiBAcGFyYW0gb3B0IOmFjee9rumhuVxyXG4gICAgICovXHJcbiAgICBDaXJjbGUoeDogbnVtYmVyLCB5OiBudW1iZXIsIHJhZGl1czogbnVtYmVyLCBvcHQ/KTogQ2lyY2xlIHtcclxuICAgICAgICBvcHQgPSBvcHQgfHwgPENpcmNsZU9wdD57fTtcclxuXHJcbiAgICAgICAgVXRpbC5leHRlbmQob3B0LCB7XHJcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IFZlY3Rvcih4LCB5KSxcclxuICAgICAgICAgICAgcmFkaXVzOiByYWRpdXNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGUob3B0KTs7XHJcbiAgICB9LCAgIFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib6YCg5aSa6L655b2iXHJcbiAgICAgKiBAcGFyYW0geCB4XHJcbiAgICAgKiBAcGFyYW0geSB5XHJcbiAgICAgKiBAcGFyYW0gdiDpobbngrnpm4YgXHJcbiAgICAgKiBAcGFyYW0gb3B0IOmFjee9rumhuVxyXG4gICAgICovXHJcbiAgICBQb2x5Z29uKHg6IG51bWJlciwgeTogbnVtYmVyLCB2OiBBcnJheTxudW1iZXJbXT4sIG9wdCk6IFBvbHlnb24gfCBDb21wb3NpdGUge1xyXG4gICAgICAgIGxldCB2ZXJ0aWNlcyA9IHYubWFwKHZlcnRleCA9PiBuZXcgVmVjdG9yKHZlcnRleFswXSwgdmVydGV4WzFdKSksXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHQgfHwgPFBvbHlnb25PcHQgJiBDb21wb3NpdGVPcHQ+eyBvcmlnaW46IG5ldyBWZWN0b3IoeCwgeSkgfTtcclxuXHJcbiAgICAgICAgVmVydGljZXMuZmlsdGVyQ29sbGluZWFyVmVydGV4KHZlcnRpY2VzKTtcclxuXHJcbiAgICAgICAgLy8g6Iul6L6T5YWl55qE6aG254K55YiX6KGo5piv5Ye55aSa6L655b2i77yM5YiZ5bCG5YW25ouG5YiG5Li655Sx5Ye45aSa6L655b2i57uE5ZCI5oiQ55qE57uE5ZCI5Zu+5b2iXHJcbiAgICAgICAgaWYoVmVydGljZXMuaXNDb25jYXZlKHZlcnRpY2VzKSkge1xyXG4gICAgICAgICAgICBsZXQgdmVydGV4TGlzdHMgPSBWZXJ0aWNlcy5zcGxpdCh2ZXJ0aWNlcyksXHJcbiAgICAgICAgICAgICAgICBwb2x5Z29uczogUG9seWdvbltdID0gW10sXHJcbiAgICAgICAgICAgICAgICBjb21wb3NpdGU6IENvbXBvc2l0ZTtcclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhMaXN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcG9seWdvbnMucHVzaChuZXcgUG9seWdvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBuZXcgVmVjdG9yKHgsIHkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzOiB2ZXJ0ZXhMaXN0c1tpXVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb21wb3NpdGUgPSBuZXcgQ29tcG9zaXRlKHtcclxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBib2RpZXM6IHBvbHlnb25zLFxyXG4gICAgICAgICAgICAgICAgdXNlUGFyZW50UHJvcHM6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9zaXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgVXRpbC5leHRlbmQob3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luOiBuZXcgVmVjdG9yKHgsIHkpLFxyXG4gICAgICAgICAgICAgICAgdmVydGljZXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJvpgKDnn6nlvaJcclxuICAgICAqIEBwYXJhbSB4IHggXHJcbiAgICAgKiBAcGFyYW0geSB5XHJcbiAgICAgKiBAcGFyYW0gd2lkdGgg5a69IFxyXG4gICAgICogQHBhcmFtIGhlaWdodCDpq5hcclxuICAgICAqIEBwYXJhbSBvcHQg6YWN572u6aG5XHJcbiAgICAgKi9cclxuICAgIFJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBvcHQpOiBSZWN0IHtcclxuICAgICAgICBvcHQgPSBvcHQgfHwgPFJlY3RPcHQ+e307XHJcblxyXG4gICAgICAgIFV0aWwuZXh0ZW5kKG9wdCwge1xyXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBWZWN0b3IoeCwgeSksXHJcbiAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0KG9wdCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib6YCg5aSN5ZCI5Zu+5b2iXHJcbiAgICAgKiBAcGFyYW0gYm9kaWVzIFxyXG4gICAgICovXHJcbiAgICBDb21wb3NpdGUoYm9kaWVzOiBCb2R5W10sIG9wdCk6IENvbXBvc2l0ZSB7XHJcbiAgICAgICAgb3B0ID0gb3B0IHx8IDxDb21wb3NpdGVPcHQ+e307XHJcbiAgICAgICAgb3B0LmJvZGllcyA9IGJvZGllcztcclxuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZShvcHQpO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\n/**\r\n * 多边形刚体\r\n */\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Polygon = void 0;\r\nconst body_1 = __webpack_require__(2);\r\nconst vertices_1 = __webpack_require__(3);\r\nconst vector_1 = __webpack_require__(0);\r\nclass Polygon extends body_1.Body {\r\n    constructor(opt) {\r\n        super(opt, body_1.bodyType.polygon);\r\n    }\r\n    beforeInitializeProperties(opt) {\r\n        // 将向量转化为顶点\r\n        if (opt.vertices) {\r\n            this.localVertexList = opt.vertices;\r\n        }\r\n        // 顶点数 > 3才构成多边形\r\n        if (this.localVertexList && this.localVertexList.length < 3)\r\n            return;\r\n        // 计算世界顶点坐标\r\n        this.vertexList = this.getVertexList();\r\n    }\r\n    /**\r\n     * 获取世界顶点坐标\r\n     */\r\n    getVertexList() {\r\n        return vertices_1.Vertices.transform2World(this.origin, this.localVertexList);\r\n    }\r\n    getArea() {\r\n        return Math.abs(vertices_1.Vertices.getArea(this.vertexList));\r\n    }\r\n    getCentroid() {\r\n        return vertices_1.Vertices.getCentroid(this.vertexList);\r\n    }\r\n    getInertia(position) {\r\n        position = position || this.position;\r\n        return vertices_1.Vertices.getInertia(this.vertexList, this.mass, position);\r\n    }\r\n    getAxes() {\r\n        return vertices_1.Vertices.getAxes(this.vertexList);\r\n    }\r\n    getBound() {\r\n        return vertices_1.Vertices.getBound(this.vertexList);\r\n    }\r\n    translate(dx, dy) {\r\n        // 位移图形原点\r\n        this.origin.x += dx;\r\n        this.origin.y += dy;\r\n        // 位移多边形顶点\r\n        vertices_1.Vertices.translate(this.vertexList, dx, dy);\r\n        // 位移包围盒\r\n        this.bound.translate(dx, dy);\r\n    }\r\n    rotate(radian) {\r\n        // 旋转顶点\r\n        vertices_1.Vertices.rotate(this.vertexList, radian, this.rotateCenter);\r\n        vector_1._tempVector4.x = this.rotateCenter.x - this.position.x;\r\n        vector_1._tempVector4.y = this.rotateCenter.y - this.position.y;\r\n        vector_1._tempVector4.x = 0;\r\n        vector_1._tempVector4.y = 0;\r\n        // 转动轴\r\n        for (let i = 0; i < this.axes.length; i++) {\r\n            this.axes[i] && this.axes[i].value.rot(radian, vector_1._tempVector4, this.axes[i].value);\r\n        }\r\n        // 更新包围盒\r\n        this.bound.update(this.vertexList);\r\n    }\r\n    isContains(x, y) {\r\n        return vertices_1.Vertices.isContains(this.vertexList, new vector_1.Vector(x, y));\r\n    }\r\n}\r\nexports.Polygon = Polygon;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9wb2x5Z29uLnRzP2E2ZWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFFSCxzQ0FBaUQ7QUFDakQsMENBQWdFO0FBQ2hFLHdDQUFzRDtBQVl0RCxNQUFhLE9BQVEsU0FBUSxXQUFJO0lBTTdCLFlBQVksR0FBZTtRQUN2QixLQUFLLENBQUMsR0FBRyxFQUFFLGVBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsMEJBQTBCLENBQUMsR0FBZTtRQUN0QyxXQUFXO1FBQ1gsSUFBRyxHQUFHLENBQUMsUUFBUSxFQUFFO1lBQ2IsSUFBSSxDQUFDLGVBQWUsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDO1NBQ3ZDO1FBRUQsZ0JBQWdCO1FBQ2hCLElBQUcsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQUUsT0FBTztRQUVuRSxXQUFXO1FBQ1gsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUVEOztPQUVHO0lBQ0gsYUFBYTtRQUNULE9BQU8sbUJBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELE9BQU87UUFDSCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVELFdBQVc7UUFDUCxPQUFPLG1CQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBRUQsVUFBVSxDQUFDLFFBQWlCO1FBQ3hCLFFBQVEsR0FBRyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUNyQyxPQUFPLG1CQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sbUJBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxRQUFRO1FBQ0osT0FBTyxtQkFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELFNBQVMsQ0FBQyxFQUFVLEVBQUUsRUFBVTtRQUM1QixTQUFTO1FBQ1QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNwQixVQUFVO1FBQ1YsbUJBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFNUMsUUFBUTtRQUNSLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsTUFBTSxDQUFDLE1BQWM7UUFDakIsT0FBTztRQUNQLG1CQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUU1RCxxQkFBWSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN2RCxxQkFBWSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUV2RCxxQkFBWSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkIscUJBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRW5CLE1BQU07UUFDTixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLHFCQUFZLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNwRjtRQUVELFFBQVE7UUFDUixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVELFVBQVUsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUMzQixPQUFPLG1CQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEUsQ0FBQztDQUNKO0FBcEZELDBCQW9GQyIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDlpJrovrnlvaLliJrkvZNcclxuICovXHJcblxyXG5pbXBvcnQgeyBCb2R5LCBCb2R5T3B0LCBib2R5VHlwZSB9IGZyb20gXCIuL2JvZHlcIjtcclxuaW1wb3J0IHsgVmVydGV4TGlzdCwgVmVydGljZXMsIEF4aXMgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcbmltcG9ydCB7IFZlY3RvciwgX3RlbXBWZWN0b3I0IH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEJvdW5kIH0gZnJvbSBcIi4uL2NvbW1vbi9ib3VuZFwiO1xyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQb2x5Z29uT3B0IGV4dGVuZHMgQm9keU9wdCB7XHJcbiAgICB2ZXJ0aWNlcz86IFZlY3RvcltdO1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgQm9keSB7XHJcbiAgICAvLyDlpJrovrnlvaLpobbngrnvvIjmnKzlnLDlnZDmoIfvvIlcclxuICAgIGxvY2FsVmVydGV4TGlzdDogVmVydGV4TGlzdDtcclxuICAgIC8vIOWkmui+ueW9oumhtueCue+8iOS4lueVjOWdkOagh++8iVxyXG4gICAgdmVydGV4TGlzdDogVmVydGV4TGlzdDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHQ6IFBvbHlnb25PcHQpIHtcclxuICAgICAgICBzdXBlcihvcHQsIGJvZHlUeXBlLnBvbHlnb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGJlZm9yZUluaXRpYWxpemVQcm9wZXJ0aWVzKG9wdDogUG9seWdvbk9wdCkge1xyXG4gICAgICAgIC8vIOWwhuWQkemHj+i9rOWMluS4uumhtueCuVxyXG4gICAgICAgIGlmKG9wdC52ZXJ0aWNlcykge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsVmVydGV4TGlzdCA9IG9wdC52ZXJ0aWNlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmhtueCueaVsCA+IDPmiY3mnoTmiJDlpJrovrnlvaJcclxuICAgICAgICBpZih0aGlzLmxvY2FsVmVydGV4TGlzdCAmJiB0aGlzLmxvY2FsVmVydGV4TGlzdC5sZW5ndGggPCAzKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIOiuoeeul+S4lueVjOmhtueCueWdkOagh1xyXG4gICAgICAgIHRoaXMudmVydGV4TGlzdCA9IHRoaXMuZ2V0VmVydGV4TGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5LiW55WM6aG254K55Z2Q5qCHXHJcbiAgICAgKi9cclxuICAgIGdldFZlcnRleExpc3QoKTogVmVydGV4TGlzdCB7XHJcbiAgICAgICAgcmV0dXJuIFZlcnRpY2VzLnRyYW5zZm9ybTJXb3JsZCh0aGlzLm9yaWdpbiwgdGhpcy5sb2NhbFZlcnRleExpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFyZWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoVmVydGljZXMuZ2V0QXJlYSh0aGlzLnZlcnRleExpc3QpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZW50cm9pZCgpOiBWZWN0b3Ige1xyXG4gICAgICAgIHJldHVybiBWZXJ0aWNlcy5nZXRDZW50cm9pZCh0aGlzLnZlcnRleExpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluZXJ0aWEocG9zaXRpb24/OiBWZWN0b3IpOiBudW1iZXIge1xyXG4gICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICByZXR1cm4gVmVydGljZXMuZ2V0SW5lcnRpYSh0aGlzLnZlcnRleExpc3QsIHRoaXMubWFzcywgcG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEF4ZXMoKTogQXhpc1tdIHtcclxuICAgICAgICByZXR1cm4gVmVydGljZXMuZ2V0QXhlcyh0aGlzLnZlcnRleExpc3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvdW5kKCk6IEJvdW5kIHtcclxuICAgICAgICByZXR1cm4gVmVydGljZXMuZ2V0Qm91bmQodGhpcy52ZXJ0ZXhMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2xhdGUoZHg6IG51bWJlciwgZHk6IG51bWJlcikge1xyXG4gICAgICAgIC8vIOS9jeenu+WbvuW9ouWOn+eCuVxyXG4gICAgICAgIHRoaXMub3JpZ2luLnggKz0gZHg7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4ueSArPSBkeTtcclxuICAgICAgICAvLyDkvY3np7vlpJrovrnlvaLpobbngrlcclxuICAgICAgICBWZXJ0aWNlcy50cmFuc2xhdGUodGhpcy52ZXJ0ZXhMaXN0LCBkeCwgZHkpO1xyXG5cclxuICAgICAgICAvLyDkvY3np7vljIXlm7Tnm5JcclxuICAgICAgICB0aGlzLmJvdW5kLnRyYW5zbGF0ZShkeCwgZHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJvdGF0ZShyYWRpYW46IG51bWJlcikge1xyXG4gICAgICAgIC8vIOaXi+i9rOmhtueCuVxyXG4gICAgICAgIFZlcnRpY2VzLnJvdGF0ZSh0aGlzLnZlcnRleExpc3QsIHJhZGlhbiwgdGhpcy5yb3RhdGVDZW50ZXIpO1xyXG5cclxuICAgICAgICBfdGVtcFZlY3RvcjQueCA9IHRoaXMucm90YXRlQ2VudGVyLnggLSB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICAgICAgX3RlbXBWZWN0b3I0LnkgPSB0aGlzLnJvdGF0ZUNlbnRlci55IC0gdGhpcy5wb3NpdGlvbi55O1xyXG5cclxuICAgICAgICBfdGVtcFZlY3RvcjQueCA9IDA7XHJcbiAgICAgICAgX3RlbXBWZWN0b3I0LnkgPSAwO1xyXG5cclxuICAgICAgICAvLyDovazliqjovbRcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5heGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXhlc1tpXSAmJiB0aGlzLmF4ZXNbaV0udmFsdWUucm90KHJhZGlhbiwgX3RlbXBWZWN0b3I0LCB0aGlzLmF4ZXNbaV0udmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5pu05paw5YyF5Zu055uSXHJcbiAgICAgICAgdGhpcy5ib3VuZC51cGRhdGUodGhpcy52ZXJ0ZXhMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBpc0NvbnRhaW5zKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIFZlcnRpY2VzLmlzQ29udGFpbnModGhpcy52ZXJ0ZXhMaXN0LCBuZXcgVmVjdG9yKHgsIHkpKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Torque = void 0;\r\nconst interface_1 = __webpack_require__(15);\r\nconst bodiesFactory_1 = __webpack_require__(12);\r\nconst vector_1 = __webpack_require__(0);\r\nconst matrix_1 = __webpack_require__(4);\r\nconst jointFactory_1 = __webpack_require__(27);\r\ninterface_1.TorqueWorld.body = bodiesFactory_1.BodiesFactory;\r\ninterface_1.TorqueWorld.joint = jointFactory_1.JointFactory;\r\ninterface_1.TorqueWorld.vector = (x, y) => new vector_1.Vector(x, y);\r\ninterface_1.TorqueWorld.matrix = (r1, r2) => new matrix_1.Matrix(r1, r2);\r\nexports.Torque = interface_1.TorqueWorld;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdG9ycXVlLnRzP2JhZmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNENBQStDO0FBQy9DLGdEQUFxRDtBQUNyRCx3Q0FBdUM7QUFDdkMsd0NBQXVDO0FBQ3ZDLCtDQUFtRDtBQUVuRCx1QkFBVyxDQUFDLElBQUksR0FBRyw2QkFBYSxDQUFDO0FBQ2pDLHVCQUFXLENBQUMsS0FBSyxHQUFHLDJCQUFZLENBQUM7QUFFakMsdUJBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFTLEVBQUUsQ0FBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLGVBQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDaEUsdUJBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFVLEVBQUUsRUFBVSxFQUFFLEVBQUUsQ0FBQyxJQUFJLGVBQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFHdkQsY0FBTSxHQUFHLHVCQUFXLENBQUMiLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUb3JxdWVXb3JsZCB9IGZyb20gXCIuL2NvcmUvaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IEJvZGllc0ZhY3RvcnkgfSBmcm9tIFwiLi9jb3JlL2JvZGllc0ZhY3RvcnlcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSBcIi4vbWF0aC9tYXRyaXhcIjtcclxuaW1wb3J0IHsgSm9pbnRGYWN0b3J5IH0gZnJvbSBcIi4vY29yZS9qb2ludEZhY3RvcnlcIjtcclxuXHJcblRvcnF1ZVdvcmxkLmJvZHkgPSBCb2RpZXNGYWN0b3J5O1xyXG5Ub3JxdWVXb3JsZC5qb2ludCA9IEpvaW50RmFjdG9yeTtcclxuXHJcblRvcnF1ZVdvcmxkLnZlY3RvciA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gbmV3IFZlY3Rvcih4LCB5KTtcclxuVG9ycXVlV29ybGQubWF0cml4ID0gKHIxOiBWZWN0b3IsIHIyOiBWZWN0b3IpID0+IG5ldyBNYXRyaXgocjEsIHIyKTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgVG9ycXVlID0gVG9ycXVlV29ybGQ7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.TorqueWorld = void 0;\r\nconst body_1 = __webpack_require__(2);\r\nconst util_1 = __webpack_require__(1);\r\nconst joint_1 = __webpack_require__(9);\r\nconst engine_1 = __webpack_require__(16);\r\n// Torque主类\r\nclass TorqueWorld {\r\n    constructor(width, height, opt) {\r\n        this.engine = new engine_1.Engine(width, height, opt);\r\n    }\r\n    /**\r\n     * 增加刚体\r\n     * @param body\r\n     */\r\n    append(...arg) {\r\n        for (let i = 0; i < arg.length; i++) {\r\n            if (arg[i] instanceof body_1.Body) {\r\n                let body = arg[i];\r\n                body.beforeAppend(this.engine);\r\n                this.engine.bodies.push(body);\r\n                body.afterAppend();\r\n            }\r\n            if (arg[i] instanceof joint_1.Joint) {\r\n                let joint = arg[i];\r\n                this.engine.joints.push(joint);\r\n                joint.anchors.map(item => this.append(item.joint, item.anchorBody));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 移除刚体\r\n     * @param body\r\n     */\r\n    remove(body) {\r\n        if (body instanceof body_1.Body) {\r\n            if (body.parent) {\r\n                body = body.parent;\r\n            }\r\n            body.beforeRemove();\r\n            util_1.Util.remove(this.engine.bodies, body);\r\n            body.afterRemove();\r\n        }\r\n        if (body instanceof joint_1.Joint) {\r\n            util_1.Util.remove(this.engine.joints, body);\r\n            body.anchors.map(item => {\r\n                this.remove(item.joint);\r\n                this.remove(item.anchorBody);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * 销毁引擎\r\n     */\r\n    destroy() {\r\n        this.engine.bodies.map(body => this.remove(body));\r\n        this.engine.joints.map(Joint => this.remove(Joint));\r\n        this.engine.manifoldTable.clear();\r\n    }\r\n    /**\r\n     * 设置引擎参数\r\n     * @param opt\r\n     */\r\n    setEngineOption(opt) {\r\n        this.engine.setOption(opt);\r\n    }\r\n    /**\r\n     * 绑定沟子事件\r\n     * @param eventName\r\n     * @param fn\r\n     */\r\n    on(eventName, fn) {\r\n        this.engine.methods[eventName] = fn;\r\n    }\r\n    /**\r\n     * 开始运行\r\n     * @param frameNumLimit 限制运行多少帧停下\r\n     */\r\n    start(frameNumLimit) {\r\n        this.engine.timeStepper.start(frameNumLimit);\r\n    }\r\n    /**\r\n     * 暂停运行\r\n     */\r\n    pause() {\r\n        this.engine.timeStepper.pause();\r\n    }\r\n    /**\r\n     * 获取帧率\r\n     */\r\n    getFPS() {\r\n        return this.engine.timeStepper.fps;\r\n    }\r\n    /**\r\n     * 获取所有刚体\r\n     */\r\n    getBodies() {\r\n        return this.engine.bodies;\r\n    }\r\n}\r\nexports.TorqueWorld = TorqueWorld;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9pbnRlcmZhY2UudHM/MjY1ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxzQ0FBb0M7QUFDcEMsc0NBQXNDO0FBQ3RDLHVDQUF1QztBQUd2Qyx5Q0FBNkM7QUFJN0MsV0FBVztBQUNYLE1BQWEsV0FBVztJQVFwQixZQUFZLEtBQWEsRUFBRSxNQUFjLEVBQUUsR0FBZTtRQUN0RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxHQUFHLEdBQXFCO1FBQzNCLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2hDLElBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxZQUFZLFdBQUksRUFBRTtnQkFDdkIsSUFBSSxJQUFJLEdBQVMsR0FBRyxDQUFDLENBQUMsQ0FBUyxDQUFDO2dCQUVoQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDL0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM5QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7YUFDdEI7WUFFRCxJQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxhQUFLLEVBQUU7Z0JBQ3hCLElBQUksS0FBSyxHQUFVLEdBQUcsQ0FBQyxDQUFDLENBQVUsQ0FBQztnQkFFbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMvQixLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQzthQUN2RTtTQUNKO0lBQ0wsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxJQUFrQjtRQUNyQixJQUFHLElBQUksWUFBWSxXQUFJLEVBQUU7WUFDckIsSUFBRyxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUNaLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ3RCO1lBRUQsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ3BCLFdBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdEMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3RCO1FBRUQsSUFBRyxJQUFJLFlBQVksYUFBSyxFQUFFO1lBQ3RCLFdBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN4QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNqQyxDQUFDLENBQUMsQ0FBQztTQUNOO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0gsT0FBTztRQUNILElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDdEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILGVBQWUsQ0FBQyxHQUFjO1FBQzFCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsRUFBRSxDQUFDLFNBQWlCLEVBQUUsRUFBNEI7UUFDOUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsYUFBc0I7UUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRDs7T0FFRztJQUNILEtBQUs7UUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNO1FBQ0YsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUM7SUFDdkMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsU0FBUztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDOUIsQ0FBQztDQUNKO0FBakhELGtDQWlIQyIsImZpbGUiOiIxNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvZHkgfSBmcm9tIFwiLi4vYm9keS9ib2R5XCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgSm9pbnQgfSBmcm9tIFwiLi4vam9pbnQvam9pbnRcIjtcclxuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSBcIi4uL21hdGgvbWF0cml4XCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBFbmdpbmUsIEVuZ2luZU9wdCB9IGZyb20gXCIuL2VuZ2luZVwiO1xyXG5cclxuXHJcblxyXG4vLyBUb3JxdWXkuLvnsbtcclxuZXhwb3J0IGNsYXNzIFRvcnF1ZVdvcmxkIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgYm9keTtcclxuICAgIHB1YmxpYyBzdGF0aWMgam9pbnQ7XHJcbiAgICBwdWJsaWMgc3RhdGljIHZlY3RvcjogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiBWZWN0b3I7XHJcbiAgICBwdWJsaWMgc3RhdGljIG1hdHJpeDogKHIxOiBWZWN0b3IsIHIyOiBWZWN0b3IpID0+IE1hdHJpeDtcclxuXHJcbiAgICBwcml2YXRlIGVuZ2luZTogRW5naW5lO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBvcHQ/OiBFbmdpbmVPcHQpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZSA9IG5ldyBFbmdpbmUod2lkdGgsIGhlaWdodCwgb3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWinuWKoOWImuS9k1xyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKi9cclxuICAgIGFwcGVuZCguLi5hcmc6IChCb2R5IHwgSm9pbnQpW10pIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKGFyZ1tpXSBpbnN0YW5jZW9mIEJvZHkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5OiBCb2R5ID0gYXJnW2ldIGFzIEJvZHk7XHJcblxyXG4gICAgICAgICAgICAgICAgYm9keS5iZWZvcmVBcHBlbmQodGhpcy5lbmdpbmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmUuYm9kaWVzLnB1c2goYm9keSk7XHJcbiAgICAgICAgICAgICAgICBib2R5LmFmdGVyQXBwZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGFyZ1tpXSBpbnN0YW5jZW9mIEpvaW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgam9pbnQ6IEpvaW50ID0gYXJnW2ldIGFzIEpvaW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLmpvaW50cy5wdXNoKGpvaW50KTtcclxuICAgICAgICAgICAgICAgIGpvaW50LmFuY2hvcnMubWFwKGl0ZW0gPT4gdGhpcy5hcHBlbmQoaXRlbS5qb2ludCwgaXRlbS5hbmNob3JCb2R5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnp7vpmaTliJrkvZNcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICovXHJcbiAgICByZW1vdmUoYm9keTogQm9keSB8IEpvaW50KSB7XHJcbiAgICAgICAgaWYoYm9keSBpbnN0YW5jZW9mIEJvZHkpIHtcclxuICAgICAgICAgICAgaWYoYm9keS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSBib2R5LnBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGJvZHkuYmVmb3JlUmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIFV0aWwucmVtb3ZlKHRoaXMuZW5naW5lLmJvZGllcywgYm9keSk7XHJcbiAgICAgICAgICAgIGJvZHkuYWZ0ZXJSZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgIFxyXG4gICAgICAgIGlmKGJvZHkgaW5zdGFuY2VvZiBKb2ludCkge1xyXG4gICAgICAgICAgICBVdGlsLnJlbW92ZSh0aGlzLmVuZ2luZS5qb2ludHMsIGJvZHkpO1xyXG4gICAgICAgICAgICBib2R5LmFuY2hvcnMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoaXRlbS5qb2ludCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShpdGVtLmFuY2hvckJvZHkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDplIDmr4HlvJXmk45cclxuICAgICAqL1xyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmVuZ2luZS5ib2RpZXMubWFwKGJvZHkgPT4gdGhpcy5yZW1vdmUoYm9keSkpO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLmpvaW50cy5tYXAoSm9pbnQgPT4gdGhpcy5yZW1vdmUoSm9pbnQpKTtcclxuICAgICAgICB0aGlzLmVuZ2luZS5tYW5pZm9sZFRhYmxlLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7lvJXmk47lj4LmlbBcclxuICAgICAqIEBwYXJhbSBvcHQgXHJcbiAgICAgKi9cclxuICAgIHNldEVuZ2luZU9wdGlvbihvcHQ6IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnNldE9wdGlvbihvcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uR5a6a5rKf5a2Q5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFxyXG4gICAgICogQHBhcmFtIGZuIFxyXG4gICAgICovXHJcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgZm46IChlbmdpbmU6IEVuZ2luZSkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lLm1ldGhvZHNbZXZlbnROYW1lXSA9IGZuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5byA5aeL6L+Q6KGMXHJcbiAgICAgKiBAcGFyYW0gZnJhbWVOdW1MaW1pdCDpmZDliLbov5DooYzlpJrlsJHluKflgZzkuItcclxuICAgICAqL1xyXG4gICAgc3RhcnQoZnJhbWVOdW1MaW1pdD86IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnRpbWVTdGVwcGVyLnN0YXJ0KGZyYW1lTnVtTGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pqC5YGc6L+Q6KGMXHJcbiAgICAgKi9cclxuICAgIHBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnRpbWVTdGVwcGVyLnBhdXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bluKfnjodcclxuICAgICAqL1xyXG4gICAgZ2V0RlBTKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLnRpbWVTdGVwcGVyLmZwcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluaJgOacieWImuS9k1xyXG4gICAgICovXHJcbiAgICBnZXRCb2RpZXMoKTogQm9keVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmdpbmUuYm9kaWVzO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Engine = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst util_1 = __webpack_require__(1);\r\nconst timeStepper_1 = __webpack_require__(17);\r\nconst detector_1 = __webpack_require__(18);\r\nconst sleeping_1 = __webpack_require__(22);\r\nconst manifoldTable_1 = __webpack_require__(23);\r\nconst contact_1 = __webpack_require__(7);\r\nconst joint_1 = __webpack_require__(8);\r\n// 主引擎\r\nclass Engine {\r\n    constructor(width, height, opt) {\r\n        // 引力缩放因子\r\n        this.gravityScaler = 50;\r\n        this.width = width || 0;\r\n        this.height = height || 0;\r\n        this.gravity = new vector_1.Vector(0, 9);\r\n        this.airFriction = 0;\r\n        this.enableSleeping = true;\r\n        this.enableCollisionDetection = true;\r\n        this.iteration = 20;\r\n        this.methods = {\r\n            tickStart: () => { },\r\n            tickEnd: () => { },\r\n            beforeUpdate: () => { },\r\n            afterUpdate: () => { },\r\n            beforeRender: () => { },\r\n            afterRender: () => { },\r\n            start: () => { },\r\n            pause: () => { },\r\n            collisionStart: (manifolds) => { },\r\n            collisionActive: (manifolds) => { },\r\n            collisionEnd: (manifolds) => { }\r\n        };\r\n        util_1.Util.merge(this, opt);\r\n        this.bodies = [];\r\n        this.joints = [];\r\n        this.timeStepper = new timeStepper_1.TimeStepper(this, opt);\r\n        this.detector = new detector_1.Detector(this, opt);\r\n        this.manifoldTable = new manifoldTable_1.ManifoldTable(opt);\r\n        this.contactConstraint = new contact_1.ContactConstraint();\r\n        this.jointConstraint = new joint_1.JointConstraint();\r\n        this.sleeping = new sleeping_1.Sleeping(opt);\r\n    }\r\n    /**\r\n     * 引擎更新\r\n     * @param dt 步长\r\n     * @param timeStamp 时间戳\r\n     */\r\n    update(dt, timeStamp) {\r\n        if (this.enableSleeping) {\r\n            // 更新刚体的休眠/唤醒状态\r\n            this.sleeping.update(this.bodies);\r\n        }\r\n        for (let i = 0; i < this.bodies.length; i++) {\r\n            let body = this.bodies[i], gravityForce = vector_1._tempVector3;\r\n            if (body.ignoreGravity) {\r\n                continue;\r\n            }\r\n            gravityForce.x = this.gravity.x * body.mass * this.gravityScaler;\r\n            gravityForce.y = this.gravity.y * body.mass * this.gravityScaler;\r\n            // 应用受力\r\n            body.applyForce(gravityForce);\r\n            // 积分受力\r\n            body.integrateForces(dt);\r\n        }\r\n        // 进行碰撞检测\r\n        let collisions = [];\r\n        if (this.enableCollisionDetection) {\r\n            collisions = this.detector.detect(this.bodies);\r\n        }\r\n        //根据得到的碰撞对更新碰撞流形\r\n        this.manifoldTable.update(collisions, timeStamp);\r\n        // 移除缓存表超时的碰撞对\r\n        this.manifoldTable.filter(timeStamp);\r\n        // 若发现有休眠的刚体发生碰撞，则唤醒\r\n        if (this.enableSleeping)\r\n            this.sleeping.afterCollision(this.manifoldTable.list);\r\n        this.contactConstraint.preSolveVelocity(this.manifoldTable.list, dt);\r\n        this.jointConstraint.preSolveVelocity(this.joints, dt);\r\n        for (let i = 0; i < 20; i++) {\r\n            this.contactConstraint.solveVelocity(this.manifoldTable.list);\r\n            this.jointConstraint.solveVelocity(this.joints);\r\n        }\r\n        for (let i = 0; i < this.bodies.length; i++) {\r\n            // 积分速度\r\n            this.bodies[i].integrateVelocities(dt);\r\n            this.bodies[i].clearForce();\r\n        }\r\n        this.manifoldTable.collisionStart.length && this.collisionStart();\r\n        this.manifoldTable.collisionActive.length && this.collisionActive();\r\n        this.manifoldTable.collisionEnd.length && this.collisionEnd();\r\n    }\r\n    /**\r\n     * 渲染物理引擎\r\n     * @param dt\r\n     */\r\n    render(dt) {\r\n        let body, joint, i, j;\r\n        for (i = 0; i < this.bodies.length; i++) {\r\n            body = this.bodies[i];\r\n            // 睡眠或者静态的刚体不用每一帧都渲染\r\n            if (body.sleeping || body.static) {\r\n                continue;\r\n            }\r\n            // 渲染刚体\r\n            body.render(body, dt);\r\n            if (body.parts[0] !== body) {\r\n                for (j = 0; j < body.parts.length; j++) {\r\n                    body.parts[j].render(body.parts[j], dt);\r\n                }\r\n            }\r\n        }\r\n        for (i = 0; i < this.joints.length; i++) {\r\n            joint = this.joints[i];\r\n            joint.needRender && joint.render(joint, dt);\r\n        }\r\n    }\r\n    /**\r\n     * 设置引擎参数\r\n     * @param opt\r\n     */\r\n    setOption(opt) {\r\n        util_1.Util.merge(this, opt);\r\n        util_1.Util.merge(this.timeStepper, opt);\r\n    }\r\n    // ----------------------------------------------- hook --------------------------\r\n    tickStart() { this.methods.tickStart(); }\r\n    tickEnd() { this.methods.tickEnd(); }\r\n    beforeUpdate() { this.methods.beforeUpdate(); }\r\n    afterUpdate() { this.methods.afterUpdate(); }\r\n    beforeRender() { this.methods.beforeRender(); }\r\n    afterRender() { this.methods.afterRender(); }\r\n    start() { this.methods.start(); }\r\n    pause() { this.methods.pause(); }\r\n    collisionStart() { this.methods.collisionEnd(this.manifoldTable.collisionStart); }\r\n    collisionActive() { this.methods.collisionEnd(this.manifoldTable.collisionActive); }\r\n    collisionEnd() { this.methods.collisionEnd(this.manifoldTable.collisionEnd); }\r\n}\r\nexports.Engine = Engine;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9lbmdpbmUudHM/OTViYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx3Q0FBc0Q7QUFDdEQsc0NBQXNDO0FBQ3RDLDhDQUE0QztBQUM1QywyQ0FBaUQ7QUFDakQsMkNBQXNDO0FBQ3RDLGdEQUEyRDtBQUUzRCx5Q0FBMEQ7QUFDMUQsdUNBQXNEO0FBa0R0RCxNQUFNO0FBQ04sTUFBYSxNQUFNO0lBdUNmLFlBQVksS0FBYSxFQUFFLE1BQWMsRUFBRSxHQUFlO1FBTDFELFNBQVM7UUFDVCxrQkFBYSxHQUFXLEVBQUUsQ0FBQztRQUt2QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxDQUFDO1FBRTFCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRXJCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQzNCLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUM7UUFDckMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFFcEIsSUFBSSxDQUFDLE9BQU8sR0FBRztZQUNYLFNBQVMsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ25CLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ2pCLFlBQVksRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ3RCLFdBQVcsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ3JCLFlBQVksRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ3RCLFdBQVcsRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ3JCLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1lBQ2YsS0FBSyxFQUFFLEdBQUcsRUFBRSxH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S0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUVyQyxZQUFZLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFL0MsV0FBVyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRTdDLFlBQVksS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztJQUUvQyxXQUFXLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFN0MsS0FBSyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRWpDLEtBQUssS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUVqQyxjQUFjLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbEYsZUFBZSxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRXBGLFlBQVksS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUNqRjtBQTVNRCx3QkE0TUMiLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IsIF90ZW1wVmVjdG9yMyB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IFRpbWVTdGVwcGVyIH0gZnJvbSBcIi4vdGltZVN0ZXBwZXJcIjtcclxuaW1wb3J0IHsgRGV0ZWN0b3IgfSBmcm9tIFwiLi4vY29sbGlzaW9uL2RldGVjdG9yXCI7XHJcbmltcG9ydCB7IFNsZWVwaW5nIH0gZnJvbSBcIi4vc2xlZXBpbmdcIjtcclxuaW1wb3J0IHsgTWFuaWZvbGRUYWJsZSB9IGZyb20gXCIuLi9jb2xsaXNpb24vbWFuaWZvbGRUYWJsZVwiO1xyXG5pbXBvcnQgeyBDb2xsaXNpb24sIE1hbmlmb2xkIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9tYW5pZm9sZFwiO1xyXG5pbXBvcnQgeyBDb250YWN0Q29uc3RyYWludCB9IGZyb20gXCIuLi9jb25zdHJhaW50L2NvbnRhY3RcIjtcclxuaW1wb3J0IHsgSm9pbnRDb25zdHJhaW50IH0gZnJvbSBcIi4uL2NvbnN0cmFpbnQvam9pbnRcIjtcclxuaW1wb3J0IHsgSm9pbnQgfSBmcm9tIFwiLi4vam9pbnQvam9pbnRcIjtcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIOS4u+W8leaTjlxyXG4gKi9cclxuXHJcblxyXG5cclxuLy8g5byV5pOO55u45YWz6YWN572u6aG5XHJcbmV4cG9ydCBpbnRlcmZhY2UgRW5naW5lT3B0IHtcclxuICAgIC8vIOW4p+eOh1xyXG4gICAgZnBzOiBudW1iZXI7XHJcbiAgICAvLyDmmK/lkKblm7rlrprmraXplb9cclxuICAgIGRlbHRhRml4ZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgLy8g5piv5ZCm5byA5ZCv56Kw5pKe5qOA5rWLXHJcbiAgICBlbmFibGVDb2xsaXNpb25EZXRlY3Rpb246IGJvb2xlYW47XHJcbiAgICAvLyDnuqbmnZ/msYLop6Pov63ku6PmrKHmlbBcclxuICAgIGl0ZXJhdGlvbjogbnVtYmVyO1xyXG4gICAgLy8g5piv5ZCm5byA5ZCv5LyR55ygXHJcbiAgICBlbmFibGVTbGVlcGluZzogYm9vbGVhbjtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+e8k+WtmFxyXG4gICAgZW5hYmxlQ2FjaGU6IGJvb2xlYW47XHJcblxyXG4gICAgLy8g6YeN5YqbXHJcbiAgICBncmF2aXR5OiBWZWN0b3I7XHJcblxyXG4gICAgLy8g5pa55rOVXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgdGlja1N0YXJ0OiAoKSA9PiB2b2lkOyBcclxuICAgICAgICB0aWNrRW5kOiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIGJlZm9yZVVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgICAgICBhZnRlclVwZGF0ZTogKCkgPT4gdm9pZDtcclxuICAgICAgICBiZWZvcmVSZW5kZXI6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgYWZ0ZXJSZW5kZXI6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgc3RhcnQ6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgcGF1c2U6ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgY29sbGlzaW9uU3RhcnQ6IChtYW5pZm9sZHM6IE1hbmlmb2xkW10pID0+IHZvaWQ7XHJcbiAgICAgICAgY29sbGlzaW9uQWN0aXZlOiAobWFuaWZvbGRzOiBNYW5pZm9sZFtdKSA9PiB2b2lkO1xyXG4gICAgICAgIGNvbGxpc2lvbkVuZDogKG1hbmlmb2xkczogTWFuaWZvbGRbXSkgPT4gdm9pZDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIOS4u+W8leaTjlxyXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcclxuICAgIC8vIOaooeaLn+eql+WPo+WuveW6plxyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIC8vIOaooeaLn+eql+WPo+mrmOW6plxyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgLy8g5piv5ZCm5byA5ZCv5LyR55yg5py65Yi2XHJcbiAgICBlbmFibGVTbGVlcGluZzogYm9vbGVhbjtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+eisOaSnuajgOa1i1xyXG4gICAgZW5hYmxlQ29sbGlzaW9uRGV0ZWN0aW9uOiBib29sZWFuO1xyXG4gICAgLy8g57qm5p2f5rGC6Kej6L+t5Luj5qyh5pWwXHJcbiAgICBpdGVyYXRpb246IG51bWJlcjtcclxuXHJcbiAgICAvLyDph43liptcclxuICAgIGdyYXZpdHk6IFZlY3RvcjtcclxuICAgIC8vIOepuuawlOmYu+WKm1xyXG4gICAgYWlyRnJpY3Rpb246IG51bWJlcjtcclxuXHJcbiAgICAvLyDliJrkvZPliJfooahcclxuICAgIGJvZGllczogQm9keVtdO1xyXG4gICAgLy8g5YWz6IqC5YiX6KGoXHJcbiAgICBqb2ludHM6IEpvaW50W107XHJcbiAgICAvLyDml7bpl7TmraXov63ku6PlmahcclxuICAgIHRpbWVTdGVwcGVyOiBUaW1lU3RlcHBlcjtcclxuICAgIC8vIOeisOaSnuajgOa1i+WZqFxyXG4gICAgZGV0ZWN0b3I6IERldGVjdG9yO1xyXG4gICAgLy8g5rWB5b2i6KGoXHJcbiAgICBtYW5pZm9sZFRhYmxlOiBNYW5pZm9sZFRhYmxlO1xyXG4gICAgLy8g5o6l6Kem57qm5p2f5rGC6Kej5ZmoXHJcbiAgICBjb250YWN0Q29uc3RyYWludDogQ29udGFjdENvbnN0cmFpbnQ7XHJcbiAgICAvLyDlhbPoioLnuqbmnZ/msYLop6PlmahcclxuICAgIGpvaW50Q29uc3RyYWludDogSm9pbnRDb25zdHJhaW50O1xyXG4gICAgLy8g5LyR55yg566h55CG5ZmoXHJcbiAgICBzbGVlcGluZzogU2xlZXBpbmc7XHJcbiAgICAvLyDlvJXlipvnvKnmlL7lm6DlrZBcclxuICAgIGdyYXZpdHlTY2FsZXI6IG51bWJlciA9IDUwO1xyXG4gICAgLy8g5pa55rOVXHJcbiAgICBtZXRob2RzOiBFbmdpbmVPcHRbJ21ldGhvZHMnXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgb3B0PzogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoIHx8IDA7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfHwgMDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjdG9yKDAsIDkpO1xyXG4gICAgICAgIHRoaXMuYWlyRnJpY3Rpb24gPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmVuYWJsZVNsZWVwaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmVuYWJsZUNvbGxpc2lvbkRldGVjdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pdGVyYXRpb24gPSAyMDtcclxuXHJcbiAgICAgICAgdGhpcy5tZXRob2RzID0ge1xyXG4gICAgICAgICAgICB0aWNrU3RhcnQ6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICB0aWNrRW5kOiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgYmVmb3JlVXBkYXRlOiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgYWZ0ZXJVcGRhdGU6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICBiZWZvcmVSZW5kZXI6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICBhZnRlclJlbmRlcjogKCkgPT4ge30sXHJcbiAgICAgICAgICAgIHN0YXJ0OiAoKSA9PiB7fSxcclxuICAgICAgICAgICAgcGF1c2U6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICBjb2xsaXNpb25TdGFydDogKG1hbmlmb2xkczogTWFuaWZvbGRbXSkgPT4ge30sXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbkFjdGl2ZTogKG1hbmlmb2xkczogTWFuaWZvbGRbXSkgPT4ge30sXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbkVuZDogKG1hbmlmb2xkczogTWFuaWZvbGRbXSkgPT4ge31cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcywgb3B0KTtcclxuXHJcbiAgICAgICAgdGhpcy5ib2RpZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmpvaW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMudGltZVN0ZXBwZXIgPSBuZXcgVGltZVN0ZXBwZXIodGhpcywgb3B0KTtcclxuICAgICAgICB0aGlzLmRldGVjdG9yID0gbmV3IERldGVjdG9yKHRoaXMsIG9wdCk7XHJcbiAgICAgICAgdGhpcy5tYW5pZm9sZFRhYmxlID0gbmV3IE1hbmlmb2xkVGFibGUob3B0KTtcclxuICAgICAgICB0aGlzLmNvbnRhY3RDb25zdHJhaW50ID0gbmV3IENvbnRhY3RDb25zdHJhaW50KCk7XHJcbiAgICAgICAgdGhpcy5qb2ludENvbnN0cmFpbnQgPSBuZXcgSm9pbnRDb25zdHJhaW50KCk7XHJcbiAgICAgICAgdGhpcy5zbGVlcGluZyA9IG5ldyBTbGVlcGluZyhvcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDlvJXmk47mm7TmlrBcclxuICAgICAqIEBwYXJhbSBkdCDmraXplb9cclxuICAgICAqIEBwYXJhbSB0aW1lU3RhbXAg5pe26Ze05oizXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZShkdDogbnVtYmVyLCB0aW1lU3RhbXA6IG51bWJlcikge1xyXG4gICAgICAgIGlmKHRoaXMuZW5hYmxlU2xlZXBpbmcpIHtcclxuICAgICAgICAgICAgLy8g5pu05paw5Yia5L2T55qE5LyR55ygL+WUpOmGkueKtuaAgVxyXG4gICAgICAgICAgICB0aGlzLnNsZWVwaW5nLnVwZGF0ZSh0aGlzLmJvZGllcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ib2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJvZHkgPSB0aGlzLmJvZGllc1tpXSxcclxuICAgICAgICAgICAgICAgIGdyYXZpdHlGb3JjZSA9IF90ZW1wVmVjdG9yMztcclxuXHJcbiAgICAgICAgICAgIGlmKGJvZHkuaWdub3JlR3Jhdml0eSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdyYXZpdHlGb3JjZS54ID0gdGhpcy5ncmF2aXR5LnggKiBib2R5Lm1hc3MgKiB0aGlzLmdyYXZpdHlTY2FsZXI7XHJcbiAgICAgICAgICAgIGdyYXZpdHlGb3JjZS55ID0gdGhpcy5ncmF2aXR5LnkgKiBib2R5Lm1hc3MgKiB0aGlzLmdyYXZpdHlTY2FsZXI7XHJcblxyXG4gICAgICAgICAgICAvLyDlupTnlKjlj5fliptcclxuICAgICAgICAgICAgYm9keS5hcHBseUZvcmNlKGdyYXZpdHlGb3JjZSk7XHJcbiAgICAgICAgICAgIC8vIOenr+WIhuWPl+WKm1xyXG4gICAgICAgICAgICBib2R5LmludGVncmF0ZUZvcmNlcyhkdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDov5vooYznorDmkp7mo4DmtYtcclxuICAgICAgICBsZXQgY29sbGlzaW9uczogQ29sbGlzaW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5lbmFibGVDb2xsaXNpb25EZXRlY3Rpb24pIHtcclxuICAgICAgICAgICAgY29sbGlzaW9ucyA9IHRoaXMuZGV0ZWN0b3IuZGV0ZWN0KHRoaXMuYm9kaWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5qC55o2u5b6X5Yiw55qE56Kw5pKe5a+55pu05paw56Kw5pKe5rWB5b2iXHJcbiAgICAgICAgdGhpcy5tYW5pZm9sZFRhYmxlLnVwZGF0ZShjb2xsaXNpb25zLCB0aW1lU3RhbXApO1xyXG4gICAgICAgIC8vIOenu+mZpOe8k+WtmOihqOi2heaXtueahOeisOaSnuWvuVxyXG4gICAgICAgIHRoaXMubWFuaWZvbGRUYWJsZS5maWx0ZXIodGltZVN0YW1wKTtcclxuXHJcbiAgICAgICAgLy8g6Iul5Y+R546w5pyJ5LyR55yg55qE5Yia5L2T5Y+R55Sf56Kw5pKe77yM5YiZ5ZSk6YaSXHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlU2xlZXBpbmcpXHJcbiAgICAgICAgICAgIHRoaXMuc2xlZXBpbmcuYWZ0ZXJDb2xsaXNpb24odGhpcy5tYW5pZm9sZFRhYmxlLmxpc3QpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhY3RDb25zdHJhaW50LnByZVNvbHZlVmVsb2NpdHkodGhpcy5tYW5pZm9sZFRhYmxlLmxpc3QsIGR0KTtcclxuICAgICAgICB0aGlzLmpvaW50Q29uc3RyYWludC5wcmVTb2x2ZVZlbG9jaXR5KHRoaXMuam9pbnRzLCBkdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWN0Q29uc3RyYWludC5zb2x2ZVZlbG9jaXR5KHRoaXMubWFuaWZvbGRUYWJsZS5saXN0KTtcclxuICAgICAgICAgICAgdGhpcy5qb2ludENvbnN0cmFpbnQuc29sdmVWZWxvY2l0eSh0aGlzLmpvaW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ib2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8g56ev5YiG6YCf5bqmXHJcbiAgICAgICAgICAgIHRoaXMuYm9kaWVzW2ldLmludGVncmF0ZVZlbG9jaXRpZXMoZHQpO1xyXG4gICAgICAgICAgICB0aGlzLmJvZGllc1tpXS5jbGVhckZvcmNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1hbmlmb2xkVGFibGUuY29sbGlzaW9uU3RhcnQubGVuZ3RoICYmIHRoaXMuY29sbGlzaW9uU3RhcnQoKTtcclxuICAgICAgICB0aGlzLm1hbmlmb2xkVGFibGUuY29sbGlzaW9uQWN0aXZlLmxlbmd0aCAmJiB0aGlzLmNvbGxpc2lvbkFjdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMubWFuaWZvbGRUYWJsZS5jb2xsaXNpb25FbmQubGVuZ3RoICYmIHRoaXMuY29sbGlzaW9uRW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmuLLmn5PniannkIblvJXmk45cclxuICAgICAqIEBwYXJhbSBkdCBcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKGR0OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgYm9keTogQm9keSwgXHJcbiAgICAgICAgICAgIGpvaW50OiBKb2ludCxcclxuICAgICAgICAgICAgaSwgajtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgdGhpcy5ib2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYm9keSA9IHRoaXMuYm9kaWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgLy8g552h55yg5oiW6ICF6Z2Z5oCB55qE5Yia5L2T5LiN55So5q+P5LiA5bin6YO95riy5p+TXHJcbiAgICAgICAgICAgIGlmKGJvZHkuc2xlZXBpbmcgfHwgYm9keS5zdGF0aWMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDmuLLmn5PliJrkvZNcclxuICAgICAgICAgICAgYm9keS5yZW5kZXIoYm9keSwgZHQpO1xyXG4gICAgICAgICAgICBpZihib2R5LnBhcnRzWzBdICE9PSBib2R5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IoaiA9IDA7IGogPCBib2R5LnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keS5wYXJ0c1tqXS5yZW5kZXIoYm9keS5wYXJ0c1tqXSwgZHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCB0aGlzLmpvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBqb2ludCA9IHRoaXMuam9pbnRzW2ldO1xyXG4gICAgICAgICAgICBqb2ludC5uZWVkUmVuZGVyICYmIGpvaW50LnJlbmRlcihqb2ludCwgZHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruW8leaTjuWPguaVsFxyXG4gICAgICogQHBhcmFtIG9wdCBcclxuICAgICAqL1xyXG4gICAgc2V0T3B0aW9uKG9wdDogRW5naW5lT3B0KSB7XHJcbiAgICAgICAgVXRpbC5tZXJnZSh0aGlzLCBvcHQpO1xyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcy50aW1lU3RlcHBlciwgb3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBob29rIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgdGlja1N0YXJ0KCkgeyB0aGlzLm1ldGhvZHMudGlja1N0YXJ0KCk7IH0gXHJcblxyXG4gICAgdGlja0VuZCgpIHsgdGhpcy5tZXRob2RzLnRpY2tFbmQoKTsgfVxyXG5cclxuICAgIGJlZm9yZVVwZGF0ZSgpIHsgdGhpcy5tZXRob2RzLmJlZm9yZVVwZGF0ZSgpOyB9XHJcblxyXG4gICAgYWZ0ZXJVcGRhdGUoKSB7IHRoaXMubWV0aG9kcy5hZnRlclVwZGF0ZSgpOyB9XHJcblxyXG4gICAgYmVmb3JlUmVuZGVyKCkgeyB0aGlzLm1ldGhvZHMuYmVmb3JlUmVuZGVyKCk7IH1cclxuXHJcbiAgICBhZnRlclJlbmRlcigpIHsgdGhpcy5tZXRob2RzLmFmdGVyUmVuZGVyKCk7IH1cclxuXHJcbiAgICBzdGFydCgpIHsgdGhpcy5tZXRob2RzLnN0YXJ0KCk7IH1cclxuXHJcbiAgICBwYXVzZSgpIHsgdGhpcy5tZXRob2RzLnBhdXNlKCk7IH1cclxuXHJcbiAgICBjb2xsaXNpb25TdGFydCgpIHsgdGhpcy5tZXRob2RzLmNvbGxpc2lvbkVuZCh0aGlzLm1hbmlmb2xkVGFibGUuY29sbGlzaW9uU3RhcnQpOyB9XHJcblxyXG4gICAgY29sbGlzaW9uQWN0aXZlKCkgeyB0aGlzLm1ldGhvZHMuY29sbGlzaW9uRW5kKHRoaXMubWFuaWZvbGRUYWJsZS5jb2xsaXNpb25BY3RpdmUpOyB9XHJcblxyXG4gICAgY29sbGlzaW9uRW5kKCkgeyB0aGlzLm1ldGhvZHMuY29sbGlzaW9uRW5kKHRoaXMubWFuaWZvbGRUYWJsZS5jb2xsaXNpb25FbmQpOyB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.TimeStepper = void 0;\r\nconst util_1 = __webpack_require__(1);\r\n/**\r\n * 时间步迭代器\r\n */\r\nclass TimeStepper {\r\n    constructor(engine, opt) {\r\n        this.engine = engine;\r\n        this.status = false;\r\n        this.fps = opt.fps || 60;\r\n        this.deltaFixed = opt.deltaFixed === undefined ? true : opt.deltaFixed;\r\n        this.deltaRecordLimit = 60;\r\n        util_1.Util.merge(this, opt);\r\n        this.dt = 1 / this.fps;\r\n        this.dtMin = this.dt;\r\n        this.dtMax = this.dt * 2;\r\n        this.frameCounter = 0;\r\n        this.frameStamp = 0;\r\n        this.prevTime = 0;\r\n        this.frameTotal = 0;\r\n        this.frameNumLimit = -1;\r\n        this.deltaRecorder = [];\r\n    }\r\n    /**\r\n     * 一次tick，也就是一次模拟\r\n     * @param timeStamp 当前时间戳\r\n     */\r\n    tick(timeStamp = 0) {\r\n        let dt;\r\n        // 固定dt\r\n        if (this.deltaFixed === false) {\r\n            // 动态计算dt\r\n            dt = (timeStamp - this.prevTime) / 1000 || this.dt;\r\n            this.prevTime = timeStamp;\r\n            // 根据过去的变化步长情况，优化当前步长，使引擎稳定\r\n            this.deltaRecorder.push(dt);\r\n            this.deltaRecorder = this.deltaRecorder.slice(-this.deltaRecordLimit);\r\n            dt = util_1.Util.clamp(Math.min.apply(Math, this.deltaRecorder), this.dtMin, this.dtMax);\r\n            // 更新dt\r\n            this.dt = dt;\r\n        }\r\n        // 动态计算fps\r\n        this.frameCounter += 1;\r\n        if (timeStamp - this.frameStamp >= 1000) {\r\n            this.fps = this.frameCounter / ((timeStamp - this.frameStamp) / 1000);\r\n            this.frameStamp = timeStamp;\r\n            this.frameCounter = 0;\r\n        }\r\n        this.engine.tickStart();\r\n        // 更新物理引擎\r\n        this.engine.beforeUpdate();\r\n        this.engine.update(this.dt, timeStamp);\r\n        this.engine.afterUpdate();\r\n        // 渲染物理引擎\r\n        this.engine.beforeRender();\r\n        this.engine.render(this.dt);\r\n        this.engine.afterRender();\r\n        this.engine.tickEnd();\r\n        this.frameTotal++;\r\n        if (this.frameNumLimit > 0 && this.frameTotal >= this.frameNumLimit) {\r\n            this.pause();\r\n            return;\r\n        }\r\n        this.raf = window.requestAnimationFrame(this.tick.bind(this));\r\n    }\r\n    /**\r\n     * 开始模拟\r\n     * @param frameNumLimit 限制运行多少帧停下\r\n     */\r\n    start(frameNumLimit) {\r\n        if (this.status)\r\n            return;\r\n        if (frameNumLimit && frameNumLimit > 0) {\r\n            this.frameNumLimit = frameNumLimit;\r\n        }\r\n        this.status = true;\r\n        this.engine.start();\r\n        this.tick();\r\n    }\r\n    /**\r\n     * 暂停模拟\r\n     */\r\n    pause() {\r\n        if (!this.status)\r\n            return;\r\n        this.status = false;\r\n        this.frameTotal = 0;\r\n        this.engine.pause();\r\n        window.cancelAnimationFrame(this.raf);\r\n    }\r\n}\r\nexports.TimeStepper = TimeStepper;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS90aW1lU3RlcHBlci50cz9mZjI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHNDQUFzQztBQUd0Qzs7R0FFRztBQUNILE1BQWEsV0FBVztJQWlDcEIsWUFBWSxNQUFjLEVBQUUsR0FBYztRQUN0QyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUVyQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUVwQixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLFVBQVUsS0FBSyxTQUFTLEVBQUMsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDO1FBQ3JFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7UUFFM0IsV0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFdEIsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxJQUFJLENBQUMsWUFBb0IsQ0FB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QUFDLElBQUksQ0FBQyxNQUFNO1lBQUUsT0FBTztRQUV4QixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3BCLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUNKO0FBeklELGtDQXlJQyIsImZpbGUiOiIxNy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVuZ2luZSwgRW5naW5lT3B0IH0gZnJvbSBcIi4vZW5naW5lXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuXHJcblxyXG4vKipcclxuICog5pe26Ze05q2l6L+t5Luj5ZmoXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGltZVN0ZXBwZXIge1xyXG4gICAgLy8g5Li75byV5pOOXHJcbiAgICBwcml2YXRlIGVuZ2luZTogRW5naW5lO1xyXG4gICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1l55qEaWRcclxuICAgIHByaXZhdGUgcmFmOiBudW1iZXI7XHJcbiAgICAvLyDov5DooYznirbmgIHvvIjlvIDlp4sv5pqC5YGc77yJXHJcbiAgICBwcml2YXRlIHN0YXR1czogYm9vbGVhbjtcclxuXHJcbiAgICAvLyDluKfnjodcclxuICAgIHB1YmxpYyBmcHM6IG51bWJlcjtcclxuICAgIC8vIOatpemVvyDvvIgxMDAwL2Zwc++8iVxyXG4gICAgcHJpdmF0ZSBkdDogbnVtYmVyO1xyXG4gICAgLy8g5YWB6K645pyA5bCP5q2l6ZW/XHJcbiAgICBwcml2YXRlIGR0TWluOiBudW1iZXI7XHJcbiAgICAvLyDlhYHorrjmnIDlpKfmraXplb9cclxuICAgIHByaXZhdGUgZHRNYXg6IG51bWJlcjtcclxuICAgIC8vIOaYr+WQpuWbuuWumuatpemVv1xyXG4gICAgcHJpdmF0ZSBkZWx0YUZpeGVkOiBib29sZWFuO1xyXG4gICAgLy8g5LiK5qyhdGlja+aJp+ihjOaXtumXtFxyXG4gICAgcHJpdmF0ZSBwcmV2VGltZTogbnVtYmVyO1xyXG4gICAgLy8g5q2l6ZW/6K6w5b2V5ZmoXHJcbiAgICBwcml2YXRlIGRlbHRhUmVjb3JkZXI6IG51bWJlcltdO1xyXG4gICAgLy8g5q2l6ZW/6K6w5b2V5pWw6YeP5LiK6ZmQXHJcbiAgICBwcml2YXRlIGRlbHRhUmVjb3JkTGltaXQ6IG51bWJlcjtcclxuICAgIC8vIOW4p+iuoeaVsOWZqFxyXG4gICAgcHJpdmF0ZSBmcmFtZUNvdW50ZXI6IG51bWJlcjtcclxuICAgIC8vIOW4p+aXtumXtFxyXG4gICAgcHJpdmF0ZSBmcmFtZVN0YW1wOiBudW1iZXI7XHJcbiAgICAvLyDmgLvluKforqHnrpflmahcclxuICAgIHByaXZhdGUgZnJhbWVUb3RhbDogbnVtYmVyXHJcbiAgICAvLyDluKfpmZDliLZcclxuICAgIHByaXZhdGUgZnJhbWVOdW1MaW1pdDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogRW5naW5lLCBvcHQ6IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lID0gZW5naW5lO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmZwcyA9IG9wdC5mcHMgfHwgNjA7XHJcbiAgICAgICAgdGhpcy5kZWx0YUZpeGVkID0gb3B0LmRlbHRhRml4ZWQgPT09IHVuZGVmaW5lZD8gdHJ1ZTogb3B0LmRlbHRhRml4ZWQ7XHJcbiAgICAgICAgdGhpcy5kZWx0YVJlY29yZExpbWl0ID0gNjA7XHJcblxyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcywgb3B0KTtcclxuXHJcbiAgICAgICAgdGhpcy5kdCA9IDEgLyB0aGlzLmZwcztcclxuICAgICAgICB0aGlzLmR0TWluID0gdGhpcy5kdDtcclxuICAgICAgICB0aGlzLmR0TWF4ID0gdGhpcy5kdCAqIDI7XHJcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMuZnJhbWVTdGFtcCA9IDA7XHJcbiAgICAgICAgdGhpcy5wcmV2VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5mcmFtZVRvdGFsID0gMDtcclxuICAgICAgICB0aGlzLmZyYW1lTnVtTGltaXQgPSAtMTtcclxuICAgICAgICB0aGlzLmRlbHRhUmVjb3JkZXIgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS4gOasoXRpY2vvvIzkuZ/lsLHmmK/kuIDmrKHmqKHmi59cclxuICAgICAqIEBwYXJhbSB0aW1lU3RhbXAg5b2T5YmN5pe26Ze05oizXHJcbiAgICAgKi9cclxuICAgIHRpY2sodGltZVN0YW1wOiBudW1iZXIgPSAwKSB7XHJcbiAgICAgICAgbGV0IGR0OiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8vIOWbuuWummR0XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsdGFGaXhlZCA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIOWKqOaAgeiuoeeul2R0XHJcbiAgICAgICAgICAgIGR0ID0gKHRpbWVTdGFtcCAtIHRoaXMucHJldlRpbWUpIC8gMTAwMCB8fCB0aGlzLmR0O1xyXG4gICAgICAgICAgICB0aGlzLnByZXZUaW1lID0gdGltZVN0YW1wO1xyXG5cclxuICAgICAgICAgICAgLy8g5qC55o2u6L+H5Y6755qE5Y+Y5YyW5q2l6ZW/5oOF5Ya177yM5LyY5YyW5b2T5YmN5q2l6ZW/77yM5L2/5byV5pOO56iz5a6aXHJcbiAgICAgICAgICAgIHRoaXMuZGVsdGFSZWNvcmRlci5wdXNoKGR0KTtcclxuICAgICAgICAgICAgdGhpcy5kZWx0YVJlY29yZGVyID0gdGhpcy5kZWx0YVJlY29yZGVyLnNsaWNlKC10aGlzLmRlbHRhUmVjb3JkTGltaXQpO1xyXG4gICAgICAgICAgICBkdCA9IFV0aWwuY2xhbXAoTWF0aC5taW4uYXBwbHkoTWF0aCwgdGhpcy5kZWx0YVJlY29yZGVyKSwgdGhpcy5kdE1pbiwgdGhpcy5kdE1heCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmm7TmlrBkdFxyXG4gICAgICAgICAgICB0aGlzLmR0ID0gZHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDliqjmgIHorqHnrpdmcHNcclxuICAgICAgICB0aGlzLmZyYW1lQ291bnRlciArPSAxO1xyXG4gICAgICAgIGlmICh0aW1lU3RhbXAgLSB0aGlzLmZyYW1lU3RhbXAgPj0gMTAwMCkge1xyXG4gICAgICAgICAgICB0aGlzLmZwcyA9IHRoaXMuZnJhbWVDb3VudGVyIC8gKCh0aW1lU3RhbXAgLSB0aGlzLmZyYW1lU3RhbXApIC8gMTAwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVTdGFtcCA9IHRpbWVTdGFtcDtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5lbmdpbmUudGlja1N0YXJ0KCk7XHJcblxyXG4gICAgICAgIC8vIOabtOaWsOeJqeeQhuW8leaTjlxyXG4gICAgICAgIHRoaXMuZW5naW5lLmJlZm9yZVVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnVwZGF0ZSh0aGlzLmR0LCB0aW1lU3RhbXApO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLmFmdGVyVXBkYXRlKCk7XHJcblxyXG4gICAgICAgIC8vIOa4suafk+eJqeeQhuW8leaTjlxyXG4gICAgICAgIHRoaXMuZW5naW5lLmJlZm9yZVJlbmRlcigpO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnJlbmRlcih0aGlzLmR0KTtcclxuICAgICAgICB0aGlzLmVuZ2luZS5hZnRlclJlbmRlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmVuZ2luZS50aWNrRW5kKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5mcmFtZVRvdGFsKys7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZnJhbWVOdW1MaW1pdCA+IDAgJiYgdGhpcy5mcmFtZVRvdGFsID49IHRoaXMuZnJhbWVOdW1MaW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnRpY2suYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlvIDlp4vmqKHmi59cclxuICAgICAqIEBwYXJhbSBmcmFtZU51bUxpbWl0IOmZkOWItui/kOihjOWkmuWwkeW4p+WBnOS4i1xyXG4gICAgICovXHJcbiAgICBzdGFydChmcmFtZU51bUxpbWl0PzogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5zdGF0dXMpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYoZnJhbWVOdW1MaW1pdCAmJiBmcmFtZU51bUxpbWl0ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lTnVtTGltaXQgPSBmcmFtZU51bUxpbWl0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy50aWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmmoLlgZzmqKHmi59cclxuICAgICAqL1xyXG4gICAgcGF1c2UoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuc3RhdHVzKSByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mcmFtZVRvdGFsID0gMDtcclxuICAgICAgICB0aGlzLmVuZ2luZS5wYXVzZSgpO1xyXG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJhZik7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Detector = void 0;\r\nconst util_1 = __webpack_require__(1);\r\nconst body_1 = __webpack_require__(2);\r\nconst nfsp_sat_1 = __webpack_require__(19);\r\nclass Detector {\r\n    constructor(engine, opt) {\r\n        this.engine = engine;\r\n        this.NFSP_SAT = new nfsp_sat_1.NFSP_SAT(opt);\r\n    }\r\n    /**\r\n     * 碰撞检测函数\r\n     * @param bodies\r\n     */\r\n    detect(bodies) {\r\n        let broadPhasePairs, collisions;\r\n        // 粗阶段检测\r\n        broadPhasePairs = this.broadPhase(bodies);\r\n        // console.log(broadPhasePairs);\r\n        // 细阶段检测\r\n        collisions = this.narrowPhase(broadPhasePairs);\r\n        // console.log(collisions);\r\n        return collisions;\r\n    }\r\n    // --------------------------------------------- 粗阶段 --------------------------------\r\n    /**\r\n     * 粗检测阶段\r\n     * @param bodies 所有刚体\r\n     */\r\n    broadPhase(bodies) {\r\n        return this.sweepAndPrune(bodies);\r\n    }\r\n    /**\r\n     * 查看刚体是否出了可视区\r\n     * @param bound\r\n     */\r\n    isBodyOutWindow(bound) {\r\n        return bound.max.y < 0 || bound.min.x > this.engine.width || bound.min.y > this.engine.height || bound.max.x < 0;\r\n    }\r\n    /**\r\n     * 查看两个刚体是否允许发生碰撞\r\n     * @param bodyA\r\n     * @param bodyB\r\n     */\r\n    canCollide(bodyA, bodyB) {\r\n        // 若bodies[i]的碰撞过滤器过滤了bodies[i]，不进行检测\r\n        if (bodyA.mask !== 0 && bodyB.mask !== 0 && bodyA.mask === bodyB.mask)\r\n            return false;\r\n        // 若刚体已经移出可视区了，跳过\r\n        if (this.isBodyOutWindow(bodyA.bound) || this.isBodyOutWindow(bodyB.bound))\r\n            return false;\r\n        // 两个静态刚体 ，跳过\r\n        if ((bodyA.static || bodyA.kinetic) && (bodyB.static || bodyB.kinetic))\r\n            return false;\r\n        // 两个睡眠刚体，跳过\r\n        if (bodyA.sleeping && bodyB.sleeping)\r\n            return false;\r\n        return true;\r\n    }\r\n    /**\r\n     * Sweep & Prune\r\n     * @param bodies\r\n     */\r\n    sweepAndPrune(bodies) {\r\n        let broadPhasePairList = [], i, j, len = bodies.length;\r\n        // 包围盒在x轴上排序 （直接插入排序）\r\n        // 第一次排序时包围盒趋向于无序，这时复杂度为O(n^2) \r\n        // 而因为时间相干性，在之后的每帧包围盒趋向有序，此时直接插入排序效率最高，为O(nlogn)\r\n        util_1.Util.insertSort(bodies, (bodyA, bodyB) => bodyA.bound.min.x - bodyB.bound.min.x);\r\n        for (i = 0; i < len; i++) {\r\n            for (j = i + 1; j < len; j++) {\r\n                let boundA = bodies[i].bound, boundB = bodies[j].bound;\r\n                // 已经不可能发生碰撞了，跳出循环\r\n                if (boundA.max.x < boundB.min.x)\r\n                    break;\r\n                // 若A，B不可以发生碰撞，返回\r\n                if (!this.canCollide(bodies[i], bodies[j]))\r\n                    continue;\r\n                // 一个个对比包围盒是否相交\r\n                if (boundA.min.y <= boundB.max.y && boundB.min.y <= boundA.max.y) {\r\n                    broadPhasePairList.push({\r\n                        bodyA: bodies[i],\r\n                        bodyB: bodies[j],\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return broadPhasePairList;\r\n    }\r\n    // --------------------------------------------- 细阶段 --------------------------------\r\n    /**\r\n     * 细检测阶段\r\n     * @param broadPhasePairList 粗检查生成的潜在碰撞对\r\n     */\r\n    narrowPhase(broadPhasePairList) {\r\n        let collisions = [], prevCollision = null, pair, partsA, partsB, partA, partB, i, j, k;\r\n        for (i = 0; i < broadPhasePairList.length; i++) {\r\n            pair = broadPhasePairList[i];\r\n            partsA = pair.bodyA.parts;\r\n            partsB = pair.bodyB.parts;\r\n            for (j = 0; j < partsA.length; j++) {\r\n                partA = partsA[j];\r\n                for (k = 0; k < partsB.length; k++) {\r\n                    partB = partsB[k];\r\n                    // 两个子图形包围盒不相交，跳过\r\n                    if (!partA.bound.isIntersect(partB.bound))\r\n                        continue;\r\n                    prevCollision = this.getPrevCollision(partA, partB, this.engine.manifoldTable);\r\n                    // A,B皆为圆形\r\n                    if (partA.type === body_1.bodyType.circle && partB.type === body_1.bodyType.circle) {\r\n                        collisions.push(this.NFSP_SAT.circleCollideCircle(partA, partB, prevCollision));\r\n                    }\r\n                    // A为多边形，B为圆形\r\n                    else if (partA.type === body_1.bodyType.polygon && partB.type === body_1.bodyType.circle) {\r\n                        collisions.push(this.NFSP_SAT.polygonCollideBody(partA, partB, prevCollision));\r\n                    }\r\n                    // A为圆形，B为多边形\r\n                    else if (partA.type === body_1.bodyType.circle && partB.type === body_1.bodyType.polygon) {\r\n                        collisions.push(this.NFSP_SAT.polygonCollideBody(partB, partA, prevCollision));\r\n                    }\r\n                    // A,B皆为多边形\r\n                    else {\r\n                        collisions.push(this.NFSP_SAT.polygonCollideBody(partA, partB, prevCollision));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return collisions;\r\n    }\r\n    /**\r\n     * 获取上一次碰撞\r\n     * @param partA\r\n     * @param partB\r\n     * @param manifoldTable\r\n     */\r\n    getPrevCollision(partA, partB, manifoldTable) {\r\n        let id = util_1.Util.compositeId(partA.id, partB.id), manifold = manifoldTable.table[id];\r\n        if (this.engine.manifoldTable.enableCache && manifold && manifold.isActive) {\r\n            return manifold.collision;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\nexports.Detector = Detector;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL2RldGVjdG9yLnRzPzhiODYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsc0NBQXNDO0FBQ3RDLHNDQUE4QztBQUs5QywyQ0FBc0M7QUFjdEMsTUFBYSxRQUFRO0lBS2pCLFlBQVksTUFBYyxFQUFFLEdBQWM7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVEOzs7T0FHRztJQUNILE1BQU0sQ0FBQyxNQUFjO1FBQ2pCLElBQUksZUFBaUMsRUFDakMsVUFBdUIsQ0FBQztRQUU1QixRQUFRO1FBQ1IsZUFBZSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFMUMsZ0NBQWdDO1FBRWhDLFFBQVE7UUFDUixVQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUUvQywyQkFBMkI7UUFFM0IsT0FBTyxVQUFVLENBQUM7SUFDdEIsQ0FBQztJQUVELHFGQUFxRjtJQUVyRjs7O09BR0c7SUFDSCxVQUFVLENBQUMsTUFBYztRQUNyQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVEOzs7T0FHRztJQUNLLGVBQWUsQ0FBQyxLQUFZO1FBQ2hDLE9BQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNySCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNL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Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW5naW5lLCBFbmdpbmVPcHQgfSBmcm9tIFwiLi4vY29yZS9lbmdpbmVcIjtcclxuaW1wb3J0IHsgQm91bmQgfSBmcm9tIFwiLi4vY29tbW9uL2JvdW5kXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgQm9keSwgYm9keVR5cGUgfSBmcm9tIFwiLi4vYm9keS9ib2R5XCI7XHJcbmltcG9ydCB7IENvbGxpc2lvbiB9IGZyb20gXCIuL21hbmlmb2xkXCI7XHJcbmltcG9ydCB7IE1hbmlmb2xkVGFibGUgfSBmcm9tIFwiLi9tYW5pZm9sZFRhYmxlXCI7XHJcbmltcG9ydCB7IENpcmNsZSB9IGZyb20gXCIuLi9ib2R5L2NpcmNsZVwiO1xyXG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4uL2JvZHkvcG9seWdvblwiO1xyXG5pbXBvcnQgeyBORlNQX1NBVCB9IGZyb20gXCIuL25mc3Atc2F0XCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOeisOaSnuajgOa1i1xyXG4gKi9cclxuXHJcblxyXG4vLyDnspfmo4DmtYvpmLbmrrXnlJ/miJDnmoTnu5Pmnpzlr7nnu5PmnoRcclxuZXhwb3J0IHR5cGUgYnJvYWRQaGFzZVBhaXIgPSB7XHJcbiAgICBib2R5QTogQm9keTtcclxuICAgIGJvZHlCOiBCb2R5O1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIERldGVjdG9yIHtcclxuICAgIHByaXZhdGUgZW5naW5lOiBFbmdpbmU7XHJcbiAgICAvLyDliIbnprvovbTmtYvor5VcclxuICAgIHByaXZhdGUgTkZTUF9TQVQ6IE5GU1BfU0FUO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVuZ2luZTogRW5naW5lLCBvcHQ6IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lID0gZW5naW5lO1xyXG4gICAgICAgIHRoaXMuTkZTUF9TQVQgPSBuZXcgTkZTUF9TQVQob3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeisOaSnuajgOa1i+WHveaVsFxyXG4gICAgICogQHBhcmFtIGJvZGllcyBcclxuICAgICAqL1xyXG4gICAgZGV0ZWN0KGJvZGllczogQm9keVtdKTogQ29sbGlzaW9uW10ge1xyXG4gICAgICAgIGxldCBicm9hZFBoYXNlUGFpcnM6IGJyb2FkUGhhc2VQYWlyW10sXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbnM6IENvbGxpc2lvbltdO1xyXG5cclxuICAgICAgICAvLyDnspfpmLbmrrXmo4DmtYtcclxuICAgICAgICBicm9hZFBoYXNlUGFpcnMgPSB0aGlzLmJyb2FkUGhhc2UoYm9kaWVzKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coYnJvYWRQaGFzZVBhaXJzKTtcclxuXHJcbiAgICAgICAgLy8g57uG6Zi25q615qOA5rWLXHJcbiAgICAgICAgY29sbGlzaW9ucyA9IHRoaXMubmFycm93UGhhc2UoYnJvYWRQaGFzZVBhaXJzKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY29sbGlzaW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xsaXNpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSDnspfpmLbmrrUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeyl+ajgOa1i+mYtuautVxyXG4gICAgICogQHBhcmFtIGJvZGllcyDmiYDmnInliJrkvZNcclxuICAgICAqL1xyXG4gICAgYnJvYWRQaGFzZShib2RpZXM6IEJvZHlbXSk6IGJyb2FkUGhhc2VQYWlyW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN3ZWVwQW5kUHJ1bmUoYm9kaWVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOafpeeci+WImuS9k+aYr+WQpuWHuuS6huWPr+inhuWMulxyXG4gICAgICogQHBhcmFtIGJvdW5kIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzQm9keU91dFdpbmRvdyhib3VuZDogQm91bmQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gYm91bmQubWF4LnkgPCAwIHx8IGJvdW5kLm1pbi54ID4gdGhpcy5lbmdpbmUud2lkdGggfHwgYm91bmQubWluLnkgPiB0aGlzLmVuZ2luZS5oZWlnaHQgfHwgYm91bmQubWF4LnggPCAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l55yL5Lik5Liq5Yia5L2T5piv5ZCm5YWB6K645Y+R55Sf56Kw5pKeXHJcbiAgICAgKiBAcGFyYW0gYm9keUEgXHJcbiAgICAgKiBAcGFyYW0gYm9keUIgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2FuQ29sbGlkZShib2R5QTogQm9keSwgYm9keUI6IEJvZHkpOiBib29sZWFuIHtcclxuICAgICAgICAvLyDoi6Vib2RpZXNbaV3nmoTnorDmkp7ov4fmu6Tlmajov4fmu6TkuoZib2RpZXNbaV3vvIzkuI3ov5vooYzmo4DmtYtcclxuICAgICAgICBpZihib2R5QS5tYXNrICE9PSAwICYmIGJvZHlCLm1hc2sgIT09IDAgJiYgYm9keUEubWFzayA9PT0gYm9keUIubWFzaykgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOiLpeWImuS9k+W3sue7j+enu+WHuuWPr+inhuWMuuS6hu+8jOi3s+i/h1xyXG4gICAgICAgIGlmKHRoaXMuaXNCb2R5T3V0V2luZG93KGJvZHlBLmJvdW5kKSB8fCB0aGlzLmlzQm9keU91dFdpbmRvdyhib2R5Qi5ib3VuZCkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8g5Lik5Liq6Z2Z5oCB5Yia5L2TIO+8jOi3s+i/h1xyXG4gICAgICAgIGlmKChib2R5QS5zdGF0aWMgfHwgYm9keUEua2luZXRpYykgJiYgKGJvZHlCLnN0YXRpYyB8fCBib2R5Qi5raW5ldGljKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAvLyDkuKTkuKrnnaHnnKDliJrkvZPvvIzot7Pov4dcclxuICAgICAgICBpZihib2R5QS5zbGVlcGluZyAmJiBib2R5Qi5zbGVlcGluZykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN3ZWVwICYgUHJ1bmVcclxuICAgICAqIEBwYXJhbSBib2RpZXMgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3dlZXBBbmRQcnVuZShib2RpZXM6IEJvZHlbXSk6IGJyb2FkUGhhc2VQYWlyW10ge1xyXG4gICAgICAgIGxldCBicm9hZFBoYXNlUGFpckxpc3Q6IGJyb2FkUGhhc2VQYWlyW10gPSBbXSxcclxuICAgICAgICAgICAgaSwgaiwgbGVuID0gYm9kaWVzLmxlbmd0aDtcclxuICAgICAgICBcclxuICAgICAgICAvLyDljIXlm7Tnm5LlnKh46L205LiK5o6S5bqPIO+8iOebtOaOpeaPkuWFpeaOkuW6j++8iVxyXG4gICAgICAgIC8vIOesrOS4gOasoeaOkuW6j+aXtuWMheWbtOebkui2i+WQkeS6juaXoOW6j++8jOi/meaXtuWkjeadguW6puS4uk8obl4yKSBcclxuICAgICAgICAvLyDogIzlm6DkuLrml7bpl7Tnm7jlubLmgKfvvIzlnKjkuYvlkI7nmoTmr4/luKfljIXlm7Tnm5LotovlkJHmnInluo/vvIzmraTml7bnm7TmjqXmj5LlhaXmjpLluo/mlYjnjofmnIDpq5jvvIzkuLpPKG5sb2duKVxyXG4gICAgICAgIFV0aWwuaW5zZXJ0U29ydDxCb2R5Pihib2RpZXMsIChib2R5QSwgYm9keUIpID0+IGJvZHlBLmJvdW5kLm1pbi54IC0gYm9keUIuYm91bmQubWluLngpO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBmb3IoaiA9IGkgKyAxOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBib3VuZEEgPSBib2RpZXNbaV0uYm91bmQsXHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmRCID0gYm9kaWVzW2pdLmJvdW5kO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOW3sue7j+S4jeWPr+iDveWPkeeUn+eisOaSnuS6hu+8jOi3s+WHuuW+queOr1xyXG4gICAgICAgICAgICAgICAgaWYoYm91bmRBLm1heC54IDwgYm91bmRCLm1pbi54KSBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoi6VB77yMQuS4jeWPr+S7peWPkeeUn+eisOaSnu+8jOi/lOWbnlxyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuY2FuQ29sbGlkZShib2RpZXNbaV0sIGJvZGllc1tqXSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOS4gOS4quS4quWvueavlOWMheWbtOebkuaYr+WQpuebuOS6pFxyXG4gICAgICAgICAgICAgICAgaWYoYm91bmRBLm1pbi55IDw9IGJvdW5kQi5tYXgueSAmJiBib3VuZEIubWluLnkgPD0gYm91bmRBLm1heC55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJvYWRQaGFzZVBhaXJMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5QTogYm9kaWVzW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5QjogYm9kaWVzW2pdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYnJvYWRQaGFzZVBhaXJMaXN0O1xyXG4gICAgfSBcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g57uG6Zi25q61IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnu4bmo4DmtYvpmLbmrrVcclxuICAgICAqIEBwYXJhbSBicm9hZFBoYXNlUGFpckxpc3Qg57KX5qOA5p+l55Sf5oiQ55qE5r2c5Zyo56Kw5pKe5a+5XHJcbiAgICAgKi9cclxuICAgIG5hcnJvd1BoYXNlKGJyb2FkUGhhc2VQYWlyTGlzdDogYnJvYWRQaGFzZVBhaXJbXSk6IENvbGxpc2lvbltdIHtcclxuICAgICAgICBsZXQgY29sbGlzaW9ucyA9IFtdLFxyXG4gICAgICAgICAgICBwcmV2Q29sbGlzaW9uID0gbnVsbCxcclxuICAgICAgICAgICAgcGFpcjogYnJvYWRQaGFzZVBhaXIsXHJcbiAgICAgICAgICAgIHBhcnRzQTogQm9keVtdLFxyXG4gICAgICAgICAgICBwYXJ0c0I6IEJvZHlbXSxcclxuICAgICAgICAgICAgcGFydEE6IEJvZHksXHJcbiAgICAgICAgICAgIHBhcnRCOiBCb2R5LFxyXG4gICAgICAgICAgICBpLCBqLCBrO1xyXG5cclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBicm9hZFBoYXNlUGFpckxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcGFpciA9IGJyb2FkUGhhc2VQYWlyTGlzdFtpXTtcclxuICAgICAgICAgICAgcGFydHNBID0gcGFpci5ib2R5QS5wYXJ0cztcclxuICAgICAgICAgICAgcGFydHNCID0gcGFpci5ib2R5Qi5wYXJ0cztcclxuXHJcbiAgICAgICAgICAgIGZvcihqID0gMDsgaiA8IHBhcnRzQS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgcGFydEEgPSBwYXJ0c0Fbal07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGsgPSAwOyBrIDwgcGFydHNCLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydEIgPSBwYXJ0c0Jba107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS4pOS4quWtkOWbvuW9ouWMheWbtOebkuS4jeebuOS6pO+8jOi3s+i/h1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFwYXJ0QS5ib3VuZC5pc0ludGVyc2VjdChwYXJ0Qi5ib3VuZCkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcmV2Q29sbGlzaW9uID0gdGhpcy5nZXRQcmV2Q29sbGlzaW9uKHBhcnRBLCBwYXJ0QiwgdGhpcy5lbmdpbmUubWFuaWZvbGRUYWJsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEsQueahuS4uuWchuW9olxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBhcnRBLnR5cGUgPT09IGJvZHlUeXBlLmNpcmNsZSAmJiBwYXJ0Qi50eXBlID09PSBib2R5VHlwZS5jaXJjbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9ucy5wdXNoKHRoaXMuTkZTUF9TQVQuY2lyY2xlQ29sbGlkZUNpcmNsZSg8Q2lyY2xlPnBhcnRBLCA8Q2lyY2xlPnBhcnRCLCBwcmV2Q29sbGlzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEHkuLrlpJrovrnlvaLvvIxC5Li65ZyG5b2iXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwYXJ0QS50eXBlID09PSBib2R5VHlwZS5wb2x5Z29uICYmIHBhcnRCLnR5cGUgPT09IGJvZHlUeXBlLmNpcmNsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25zLnB1c2godGhpcy5ORlNQX1NBVC5wb2x5Z29uQ29sbGlkZUJvZHkoPFBvbHlnb24+cGFydEEsIHBhcnRCLCBwcmV2Q29sbGlzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEHkuLrlnIblvaLvvIxC5Li65aSa6L655b2iXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwYXJ0QS50eXBlID09PSBib2R5VHlwZS5jaXJjbGUgJiYgcGFydEIudHlwZSA9PT0gYm9keVR5cGUucG9seWdvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25zLnB1c2godGhpcy5ORlNQX1NBVC5wb2x5Z29uQ29sbGlkZUJvZHkoPFBvbHlnb24+cGFydEIsIHBhcnRBLCBwcmV2Q29sbGlzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEsQueahuS4uuWkmui+ueW9olxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb25zLnB1c2godGhpcy5ORlNQX1NBVC5wb2x5Z29uQ29sbGlkZUJvZHkoPFBvbHlnb24+cGFydEEsIDxQb2x5Z29uPnBhcnRCLCBwcmV2Q29sbGlzaW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29sbGlzaW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluS4iuS4gOasoeeisOaSnlxyXG4gICAgICogQHBhcmFtIHBhcnRBIFxyXG4gICAgICogQHBhcmFtIHBhcnRCIFxyXG4gICAgICogQHBhcmFtIG1hbmlmb2xkVGFibGUgXHJcbiAgICAgKi9cclxuICAgIGdldFByZXZDb2xsaXNpb24ocGFydEE6IEJvZHksIHBhcnRCOiBCb2R5LCBtYW5pZm9sZFRhYmxlOiBNYW5pZm9sZFRhYmxlKTogQ29sbGlzaW9uIHtcclxuICAgICAgICBsZXQgaWQgPSBVdGlsLmNvbXBvc2l0ZUlkKHBhcnRBLmlkLCBwYXJ0Qi5pZCksXHJcbiAgICAgICAgICAgIG1hbmlmb2xkID0gbWFuaWZvbGRUYWJsZS50YWJsZVtpZF07XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZW5naW5lLm1hbmlmb2xkVGFibGUuZW5hYmxlQ2FjaGUgJiYgbWFuaWZvbGQgJiYgbWFuaWZvbGQuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hbmlmb2xkLmNvbGxpc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.NFSP_SAT = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst vertices_1 = __webpack_require__(3);\r\nconst arcs_1 = __webpack_require__(6);\r\nconst manifold_1 = __webpack_require__(10);\r\nconst contact_1 = __webpack_require__(7);\r\nconst util_1 = __webpack_require__(1);\r\nconst axesFilter_1 = __webpack_require__(20);\r\nconst vClip_1 = __webpack_require__(21);\r\nconst circle_1 = __webpack_require__(11);\r\nconst body_1 = __webpack_require__(2);\r\n/**\r\n * 分离轴算法\r\n * 参考：https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169\r\n */\r\nclass NFSP_SAT {\r\n    constructor(opt) {\r\n        // 是否开启SAT加速\r\n        this.enableSATBoost = true;\r\n        this.reuseCollisionThreshold = 0.4;\r\n        util_1.Util.merge(this, opt);\r\n    }\r\n    /**\r\n     * 多边形 - 多边形或圆形（geometry）\r\n     * @param poly\r\n     * @param geometry\r\n     * @param prevCollision\r\n     */\r\n    polygonCollideBody(poly, geometry, prevCollision) {\r\n        let canReuse = this.canReuseCollision(poly, geometry, prevCollision), collision = null, minOverlap, axes;\r\n        // 若能用缓存，使用缓存\r\n        if (canReuse) {\r\n            collision = prevCollision;\r\n            minOverlap = this.detect(poly, geometry, [collision.axis], collision.oppositeClosestIndex);\r\n            if (minOverlap === null) {\r\n                collision.collide = false;\r\n                return collision;\r\n            }\r\n            collision.prevContacts = collision.contacts;\r\n            collision.isReuse = true;\r\n        }\r\n        // 若不能用缓存，则进行完整的测试\r\n        else {\r\n            if (prevCollision) {\r\n                prevCollision.isReuse = false;\r\n            }\r\n            collision = new manifold_1.Collision();\r\n            axes = this.getTestAxes(poly, geometry);\r\n            minOverlap = this.detect(poly, geometry, axes);\r\n            // 若发现两个刚体投影的重叠部分是负的，即表示它们没相交\r\n            if (minOverlap === null) {\r\n                collision.collide = false;\r\n                return collision;\r\n            }\r\n            collision.partA = poly;\r\n            collision.partB = geometry;\r\n            collision.bodyA = poly.parent || poly;\r\n            collision.bodyB = geometry.parent || geometry;\r\n            let axis = minOverlap.axis, normal = this.reviseNormal(minOverlap.axis.value, poly, geometry);\r\n            // 此处collision.axis与minOverlap.axis不能共享一个对象，因为collision.axis是根据不同碰撞而变化的，而minOverlap.axis不能变\r\n            collision.axis.value = axis.value;\r\n            collision.axis.supportVertexIndex = axis.supportVertexIndex;\r\n            collision.axis.oppositeVertexIndex = axis.oppositeVertexIndex;\r\n            collision.axis.opposite = axis.opposite;\r\n            collision.axis.origin = axis.origin;\r\n            collision.axis.edge = axis.edge;\r\n            collision.oppositeClosestIndex = minOverlap.oppositeClosestIndex;\r\n            collision.normal = normal;\r\n            collision.tangent = normal.nor();\r\n        }\r\n        // 计算碰撞点\r\n        collision.contacts = this.findContacts(poly, geometry, minOverlap, collision.normal);\r\n        collision.collide = true;\r\n        return collision;\r\n    }\r\n    /**\r\n     * 圆形 - 圆形\r\n     * @param circleA\r\n     * @param circleB\r\n     * @param prevCollision\r\n     */\r\n    circleCollideCircle(circleA, circleB, prevCollision) {\r\n        let axis = circleA.position.sub(circleB.position, vector_1._tempVector1), overlaps = (circleA.radius + circleB.radius) - axis.len(), minOverlap = {\r\n            value: overlaps,\r\n            axis: {\r\n                value: axis,\r\n                origin: null,\r\n                opposite: null,\r\n                edge: null,\r\n                supportVertexIndex: -1,\r\n                oppositeVertexIndex: -1\r\n            },\r\n            oppositeClosestIndex: -1\r\n        }, collision = new manifold_1.Collision(), normal;\r\n        // 两圆心距离比两圆半径和要大，即没有发生碰撞\r\n        if (overlaps < 0) {\r\n            collision.collide = false;\r\n            return collision;\r\n        }\r\n        normal = this.reviseNormal(axis, circleA, circleB).nol();\r\n        minOverlap.axis.value = normal;\r\n        collision.axis = minOverlap.axis;\r\n        collision.partA = circleA;\r\n        collision.partB = circleB;\r\n        collision.bodyA = circleA.parent || circleA;\r\n        collision.bodyB = circleB.parent || circleB;\r\n        collision.normal = normal;\r\n        collision.tangent = normal.nor();\r\n        let position = circleB.position.loc(normal, circleB.radius - minOverlap.value / 2);\r\n        collision.contacts = [contact_1.ContactConstraint.create(null, position, minOverlap.value)];\r\n        collision.collide = true;\r\n        return collision;\r\n    }\r\n    /**\r\n     * --------------------------------------------------------------------------------------------------\r\n     */\r\n    /**\r\n     * 进行分离轴检测\r\n     * @param poly\r\n     * @param geometry\r\n     * @param axes\r\n     * @param prevOppositeClosestIndex\r\n     */\r\n    detect(poly, geometry, axes, prevOppositeClosestIndex) {\r\n        let minOverlap = Infinity, oppositeClosestIndex, getOverlaps = this.enableSATBoost ? this.selectiveProjectionMethod : this.fullProjectionMethod, overlaps, i, index;\r\n        // 将两个刚体投影到所有轴上\r\n        for (i = 0; i < axes.length; i++) {\r\n            if (axes[i] === null) {\r\n                continue;\r\n            }\r\n            overlaps = getOverlaps(poly, geometry, axes[i], prevOppositeClosestIndex);\r\n            if (overlaps.depth < 0) {\r\n                return null;\r\n            }\r\n            if (overlaps.depth < minOverlap) {\r\n                minOverlap = overlaps.depth;\r\n                oppositeClosestIndex = overlaps.oppositeClosestIndex;\r\n                index = i;\r\n            }\r\n        }\r\n        return {\r\n            value: minOverlap,\r\n            oppositeClosestIndex,\r\n            axis: axes[index],\r\n        };\r\n    }\r\n    /**\r\n     * 获取测试轴\r\n     * @param poly\r\n     * @param geometry\r\n     */\r\n    getTestAxes(poly, geometry) {\r\n        let axes, circleAxis;\r\n        // 若geometry是圆形，计算一条动态轴\r\n        if (geometry.type === body_1.bodyType.circle) {\r\n            circleAxis = arcs_1.Arcs.getAxes(geometry, poly);\r\n        }\r\n        // 如果开启了加速功能，首先进行轴过滤\r\n        if (this.enableSATBoost) {\r\n            axes = axesFilter_1.axesFilter(poly, geometry);\r\n            if (circleAxis) {\r\n                axes.push(circleAxis);\r\n            }\r\n        }\r\n        else {\r\n            let opposite = geometry.type === body_1.bodyType.circle ? geometry : geometry.vertexList, oppositeAxes, i;\r\n            axes = [];\r\n            for (i = 0; i < poly.axes.length; i++) {\r\n                if (poly.axes[i]) {\r\n                    poly.axes[i].opposite = opposite;\r\n                    axes.push(poly.axes[i]);\r\n                }\r\n            }\r\n            if (circleAxis) {\r\n                axes.push(circleAxis);\r\n            }\r\n            else {\r\n                oppositeAxes = geometry.axes;\r\n                for (i = 0; i < oppositeAxes.length; i++) {\r\n                    if (oppositeAxes[i]) {\r\n                        oppositeAxes[i].opposite = poly.vertexList;\r\n                        axes.push(oppositeAxes[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return axes;\r\n    }\r\n    /**\r\n     * 全投影法（传统）\r\n     * @param poly\r\n     * @param geometry\r\n     * @param axis\r\n     */\r\n    fullProjectionMethod(poly, geometry, axis, prevOppositeClosestIndex) {\r\n        let axisVector = axis.value, partA = poly.vertexList, partB = geometry.type === body_1.bodyType.polygon ? geometry.vertexList : geometry, projection1, projection2;\r\n        // 若geometry是多边形\r\n        if (Array.isArray(partB)) {\r\n            projection1 = vertices_1.Vertices.projection(partA, axisVector),\r\n                projection2 = vertices_1.Vertices.projection(partB, axisVector);\r\n        }\r\n        // 是圆形\r\n        else {\r\n            projection1 = vertices_1.Vertices.projection(partA, axisVector),\r\n                projection2 = arcs_1.Arcs.projection(partB, axisVector);\r\n        }\r\n        return {\r\n            depth: Math.min(projection1.max - projection2.min, projection2.max - projection1.min),\r\n            oppositeClosestIndex: -1\r\n        };\r\n    }\r\n    /**\r\n     * 选择投影法\r\n     * @param poly\r\n     * @param geometry\r\n     * @param axis\r\n     * @param oppositeClosestIndex\r\n     */\r\n    selectiveProjectionMethod(poly, geometry, axis, oppositeClosestIndex) {\r\n        let axisVector = axis.value, opposite = axis.opposite;\r\n        // 该轴是圆形和多边形的动态轴\r\n        if (opposite === null) {\r\n            let projection1 = vertices_1.Vertices.projection(poly.vertexList, axisVector), projection2 = arcs_1.Arcs.projection(geometry, axisVector);\r\n            return {\r\n                depth: Math.min(projection1.max - projection2.min, projection2.max - projection1.min),\r\n                oppositeClosestIndex\r\n            };\r\n        }\r\n        let supportVertex = axis.origin[axis.supportVertexIndex], supportProjection = supportVertex.dot(axisVector);\r\n        // 对面是圆形\r\n        if (opposite instanceof circle_1.Circle) {\r\n            let circleProjection = arcs_1.Arcs.projection(opposite, axisVector);\r\n            return {\r\n                depth: supportProjection - circleProjection.min,\r\n                oppositeClosestIndex\r\n            };\r\n        }\r\n        let maxOverlap = -Infinity;\r\n        // 若最近点没有缓存，执行爬山法重新计算最近点\r\n        if (oppositeClosestIndex === undefined) {\r\n            let oppositeIndex = axis.oppositeVertexIndex, prev, next, seekPrev = true, seekNext = true, lastPrevPro, lastNextPro, projection;\r\n            projection = opposite[oppositeIndex].dot(axisVector);\r\n            prev = next = oppositeIndex;\r\n            lastPrevPro = lastNextPro = projection;\r\n            oppositeClosestIndex = oppositeIndex;\r\n            do {\r\n                if (!seekPrev && !seekNext) {\r\n                    break;\r\n                }\r\n                if (seekPrev) {\r\n                    prev = prev > 0 ? prev - 1 : opposite.length - 1;\r\n                    projection = opposite[prev].dot(axisVector);\r\n                    if (projection > lastPrevPro) {\r\n                        seekPrev = false;\r\n                        prev = (prev + 1) % opposite.length;\r\n                    }\r\n                    else {\r\n                        oppositeClosestIndex = prev;\r\n                        lastPrevPro = projection;\r\n                    }\r\n                }\r\n                if (seekNext) {\r\n                    next = (next + 1) % opposite.length;\r\n                    projection = opposite[next].dot(axisVector);\r\n                    if (projection > lastNextPro) {\r\n                        seekNext = false;\r\n                        next = next > 0 ? next - 1 : opposite.length - 1;\r\n                    }\r\n                    else {\r\n                        oppositeClosestIndex = next;\r\n                        lastNextPro = projection;\r\n                    }\r\n                }\r\n            } while (prev !== next);\r\n        }\r\n        maxOverlap = supportProjection - opposite[oppositeClosestIndex].dot(axisVector);\r\n        return {\r\n            depth: maxOverlap,\r\n            oppositeClosestIndex\r\n        };\r\n    }\r\n    /**\r\n     * 修正碰撞法线方向，使其始终背向刚体A\r\n     * @param normal 要修正的法线\r\n     * @param bodyA 刚体A\r\n     * @param bodyB 刚体B\r\n     */\r\n    reviseNormal(normal, bodyA, bodyB) {\r\n        if (normal.dot(bodyB.position.sub(bodyA.position, vector_1._tempVector1)) > 0) {\r\n            return normal.inv();\r\n        }\r\n        return normal;\r\n    }\r\n    /**\r\n     * 查看碰撞缓存是否可以复用\r\n     * @param bodyA\r\n     * @param bodyB\r\n     * @param prevCollision 上一次的碰撞\r\n     */\r\n    canReuseCollision(bodyA, bodyB, prevCollision) {\r\n        // 若上次碰撞的缓存存在\r\n        if (prevCollision && bodyB.type !== body_1.bodyType.circle) {\r\n            let parentA = bodyA.parent || bodyA, parentB = bodyB.parent || bodyB, motion = Math.sqrt(parentA.motion + parentB.motion);\r\n            // 若上次碰撞判定为真，且当前碰撞对刚体趋于静止，可复用\r\n            return prevCollision.collide && motion < this.reuseCollisionThreshold;\r\n        }\r\n        // 碰撞缓存不存在，直接判定无法复用\r\n        return false;\r\n    }\r\n    /**\r\n     * 求解碰撞点\r\n     * @param geometry\r\n     * @param minOverlap\r\n     * @param normal\r\n     */\r\n    findContacts(polygon, geometry, minOverlap, normal) {\r\n        if (geometry.type === body_1.bodyType.polygon) {\r\n            return vClip_1.vClip(minOverlap);\r\n        }\r\n        else {\r\n            return vClip_1.vClipCircle(polygon, geometry, normal, minOverlap.value);\r\n        }\r\n    }\r\n}\r\nexports.NFSP_SAT = NFSP_SAT;\r\n;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL25mc3Atc2F0LnRzPzdhMTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsd0NBQW9FO0FBQ3BFLDBDQUFvRDtBQUNwRCxzQ0FBc0M7QUFDdEMsMkNBQXVDO0FBQ3ZDLHlDQUFtRTtBQUVuRSxzQ0FBc0M7QUFDdEMsNkNBQTBDO0FBQzFDLHdDQUE2QztBQUU3Qyx5Q0FBd0M7QUFDeEMsc0NBQThDO0FBVzlDOzs7R0FHRztBQUVILE1BQWEsUUFBUTtJQUtqQixZQUFZLEdBQWM7UUFKMUIsWUFBWTtRQUNKLG1CQUFjLEdBQVksSUFBSSxDQUFDO1FBQy9CLDRCQUF1QixHQUFXLEdBQUcsQ0FBQztRQUcxQyxXQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxrQkFBa0IsQ0FBQyxJQUFhLEVBQUUsUUFBYyxFQUFFLGFBQXdCO1FBQ3RFLElBQUksUUFBUSxHQUFZLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLGFBQWEsQ0FBQyxFQUN6RSxTQUFTLEdBQWMsSUFBSSxFQUMzQixVQUFzQixFQUN0QixJQUFZLENBQUM7UUFFakIsYUFBYTtRQUNiLElBQUcsUUFBUSxFQUFFO1lBQ1QsU0FBUyxHQUFHLGFBQWEsQ0FBQztZQUMxQixVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBRTNGLElBQUcsVUFBVSxLQUFLLElBQUksRUFBRTtnQkFDcEIsU0FBUyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQzFCLE9BQU8sU0FBUyxDQUFDO2FBQ3BCO1lBRUQsU0FBUyxDQUFDLFlBQVksR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDO1lBQzVDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1NBQzVCO1FBQ0Qsa0JBQWtCO2FBQ2I7WUFDRCxJQUFHLGFBQWEsRUFBRTtnQkFDZCxhQUFhLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzthQUNqQztZQUVELFNBQVMsR0FBRyxJQUFJLG9CQUFTLEVBQUUsQ0FBQztZQUM1QixJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDeEMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUUvQyw2QkFBNkI7WUFDN0IsSUFBRyxVQUFVLEtBQUssSUFBSSxFQUFFO2dCQUNwQixTQUFTLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztnQkFDMUIsT0FBTyxTQUFTLENBQUM7YUFDcEI7WUFFRCxTQUFTLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUN2QixTQUFTLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztZQUMzQixTQUFTLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDO1lBQ3RDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLE1BQU0sSUFBSSxRQUFRLENBQUM7WUFFOUMsSUFBSSxJQUFJLEdBQUcsVUFBVSxDQUFDLElBQUksRUFDdEIsTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRXRFLDJGQUEyRjtZQUMzRixTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2xDLFNBQVMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1lBQzVELFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1lBQzlELFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDeEMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNwQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBRWhDLFNBQVMsQ0FBQyxvQkFBb0IsR0FBRyxVQUFVLENBQUMsb0JBQW9CLENBQUM7WUFDakUsU0FBUyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDMUIsU0FBUyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7U0FDcEM7UUFFRCxRQUFRO1FBQ1IsU0FBUyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyRixTQUFTLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUV6QixPQUFPLFNBQVMsQ0FBQztJQUNyQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxtQkFBbUIsQ0FBQyxPQUFlLEVBQUUsT0FBZSxFQUFFLGFBQXdCO1FBQzFFLElBQUksSUFBSSxHQUFXLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUscUJBQVksQ0FBQyxFQUNuRSxRQUFRLEdBQVcsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQ2pFLFVBQVUsR0FBZTtZQUNyQixLQUFLLEVBQUUsUUFBUTtZQUNmLElBQUksRUFBRTtnQkFDRixLQUFLLEVBQUUsSUFBSTtnQkFDWCxNQUFNLEVBQUUsSUFBSTtnQkFDWixRQUFRLEVBQUUsSUFBSTtnQkFDZCxJQUFJLEVBQUUsSUFBSTtnQkFDVixrQkFBa0IsRUFBRSxDQUFDLENBQUM7Z0JBQ3RCLG1CQUFtQixFQUFFLENBQUMsQ0FBQzthQUMxQjtZQUNELG9CQUFvQixFQUFFLENBQUMsQ0FBQztTQUMzQixFQUNELFNBQVMsR0FBYyxJQUFJLG9CQUFTLEVBQUUsRUFDdEMsTUFBYyxDQUFDO1FBRW5CLHdCQUF3QjtRQUN4QixJQUFHLFFBQVEsR0FBRyxDQUFDLEVBQUU7WUFDYixTQUFTLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUMxQixPQUFPLFNBQVMsQ0FBQztTQUNwQjtRQUVELE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDekQsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1FBRS9CLFNBQVMsQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQztRQUNqQyxTQUFTLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztRQUMxQixTQUFTLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztRQUMxQixTQUFTLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDO1FBQzVDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUM7UUFFNUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDMUIsU0FBUyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFakMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUVuRixTQUFTLENBQUMsUUFBUSxHQUFHLENBQUMsMkJBQWlCLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDbEYsU0FBUyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFFekIsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQztJQUlEOztPQUVHO0lBRUg7Ozs7OztPQU1HO0lBQ0ssTUFBTSxDQUFDLElBQWEsRUFBRSxRQUFjLEVBQUUsSUFBWSxFQUFFLHdCQUFpQztRQUN6RixJQUFJLFVBQVUsR0FBVyxRQUFRLEVBQzdCLG9CQUE0QixFQUM1QixXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsRUFBQyxDQUFDLElBQUksQ0FBQyx5QkFBeUIsRUFBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFDNUYsUUFBdUQsRUFDdkQsQ0FBQyxFQUFFLEtBQUssQ0FBQztRQUViLGVBQWU7UUFDZixLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDN0IsSUFBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO2dCQUNqQixTQUFTO2FBQ1o7WUFFRCxRQUFRLEdBQUcsV0FBVyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLHdCQUF3QixDQUFDLENBQUM7WUFFMUUsSUFBRyxRQUFRLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRTtnQkFDbkIsT0FBTyxJQUFJLENBQUM7YUFDZjtZQUVELElBQUcsUUFBUSxDQUFDLEtBQUssR0FBRyxVQUFVLEVBQUU7Z0JBQzVCLFVBQVUsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDO2dCQUM1QixvQkFBb0IsR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUM7Z0JBQ3JELEtBQUssR0FBRyxDQUFDLENBQUM7YUFDYjtTQUNKO1FBRUQsT0FBTztZQUNILEtBQUssRUFBRSxVQUFVO1lBQ2pCLG9CQUFvQjtZQUNwQixJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQztTQUNwQjtJQUNMLENBQUM7SUFHRDs7OztPQUlHO0lBQ0ssV0FBVyxDQUFDLElBQWEsRUFBRSxRQUFjO1FBQzdDLElBQUksSUFBWSxFQUNaLFVBQWdCLENBQUM7UUFFckIsdUJBQXVCO1FBQ3ZCLElBQUcsUUFBUSxDQUFDLElBQUksS0FBSyxlQUFRLENBQUMsTUFBTSxFQUFFO1lBQ2xDLFVBQVUsR0FBRyxXQUFJLENBQUMsT0FBTyxDQUFTLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUNyRDtRQUVELG9CQUFvQjtRQUNwQixJQUFHLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsSUFBSSxHQUFHLHVCQUFVLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRWxDLElBQUcsVUFBVSxFQUFFO2dCQUNYLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDekI7U0FDSjthQUNJO1lBQ0QsSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLElBQUksS0FBSyxlQUFRLENBQUMsTUFBTSxFQUFDLENBQVMsUUFBUSxFQUFDLENBQVcsUUFBUyxDQUFDLFVBQVUsRUFDOUYsWUFBb0IsRUFBRSxDQUFDLENBQUM7WUFFNUIsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUVWLEtBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2xDLElBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDYixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7b0JBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUMzQjthQUNKO1lBRUQsSUFBRyxVQUFVLEVBQUU7Z0JBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUN6QjtpQkFDSTtnQkFDRCxZQUFZLEdBQWEsUUFBUyxDQUFDLElBQUksQ0FBQztnQkFDeEMsS0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUNyQyxJQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDaEIsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO3dCQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3FCQUM5QjtpQkFDSjthQUNKO1NBQ0o7UUFFRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxvQkFBb0IsQ0FBQyxJQUFhLEVBQUUsUUFBYyxFQUFFLElBQVUsRUFBRSx3QkFBZ0M7UUFDcEcsSUFBSSxVQUFVLEdBQVcsSUFBSSxDQUFDLEtBQUssRUFDL0IsS0FBSyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQ3ZCLEtBQUssR0FBRyxRQUFRLENBQUMsSUFBSSxLQUFLLGVBQVEsQ0FBQyxPQUFPLEVBQUMsQ0FBVyxRQUFTLENBQUMsVUFBVSxFQUFDLENBQVMsUUFBUSxFQUM1RixXQUFXLEVBQ1gsV0FBVyxDQUFDO1FBRWhCLGdCQUFnQjtRQUNoQixJQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDckIsV0FBVyxHQUFHLG1CQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUM7Z0JBQ3BELFdBQVcsR0FBRyxtQkFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7U0FDeEQ7UUFDRCxNQUFNO2FBQ0Q7WUFDRCxXQUFXLEdBQUcsbUJBQVEsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQztnQkFDcEQsV0FBVyxHQUFHLFdBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1NBQ3BEO1FBRUQsT0FBTztZQUNILEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsR0FBRyxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUM7WUFDckYsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO1NBQzNCLENBQUM7SUFDTixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0sseUJBQXlCLENBQUMsSUFBYSxFQUFFLFFBQWMsRUFBRSxJQUFVLEVBQUUsb0JBQTZCO1FBQ3RHLElBQUksVUFBVSxHQUFXLElBQUksQ0FBQyxLQUFLLEVBQy9CLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBRTdCLGdCQUFnQjtRQUNoQixJQUFHLFFBQVEsS0FBSyxJQUFJLEVBQUU7WUFDbEIsSUFBSSxXQUFXLEdBQUcsbUJBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsRUFDOUQsV0FBVyxHQUFHLFdBQUksQ0FBQyxVQUFVLENBQVMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRWhFLE9BQU87Z0JBQ0gsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxHQUFHLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQztnQkFDckYsb0JBQW9CO2FBQ3ZCLENBQUM7U0FDTDtRQUVELElBQUksYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEVBQ3BELGlCQUFpQixHQUFXLGFBQWEsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFOUQsUUFBUTtRQUNSLElBQUcsUUFBUSxZQUFZLGVBQU0sRUFBRTtZQUMzQixJQUFJLGdCQUFnQixHQUFHLFdBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzdELE9BQU87Z0JBQ0gsS0FBSyxFQUFFLGlCQUFpQixHQUFHLGdCQUFnQixDQUFDLEdBQUc7Z0JBQy9DLG9CQUFvQjthQUN2QixDQUFDO1NBQ0w7UUFFRCxJQUFJLFVBQVUsR0FBVyxDQUFDLFFBQVEsQ0FBQztRQUVuQyx3QkFBd0I7UUFDeEIsSUFBRyxvQkFBb0IsS0FBSyxTQUFTLEVBQUU7WUFDbkMsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUN4QyxJQUFZLEVBQUUsSUFBWSxFQUMxQixRQUFRLEdBQVksSUFBSSxFQUN4QixRQUFRLEdBQVksSUFBSSxFQUN4QixXQUFtQixFQUNuQixXQUFtQixFQUNuQixVQUFrQixDQUFDO1lBRXZCLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3JELElBQUksR0FBRyxJQUFJLEdBQUcsYUFBYSxDQUFDO1lBQzVCLFdBQVcsR0FBRyxXQUFXLEdBQUcsVUFBVSxDQUFDO1lBQ3ZDLG9CQUFvQixHQUFHLGFBQWEsQ0FBQztZQUVyQyxHQUFHO2dCQUNDLElBQUcsQ0FBQyxRQUFRLElBQUksQ0FBQyxRQUFRLEVBQUU7b0JBQ3ZCLE1BQU07aUJBQ1Q7Z0JBRUQsSUFBRyxRQUFRLEVBQUU7b0JBQ1QsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7b0JBQy9DLFVBQVUsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO29CQUU1QyxJQUFHLFVBQVUsR0FBRyxXQUFXLEVBQUU7d0JBQ3pCLFFBQVEsR0FBRyxLQUFLLENBQUM7d0JBQ2pCLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO3FCQUN2Qzt5QkFDSTt3QkFDRCxvQkFBb0IsR0FBRyxJQUFJLENBQUM7d0JBQzVCLFdBQVcsR0FBRyxVQUFVLENBQUM7cUJBQzVCO2lCQUNKO2dCQUVELElBQUcsUUFBUSxFQUFFO29CQUNULElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO29CQUNwQyxVQUFVLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFFNUMsSUFBRyxVQUFVLEdBQUcsV0FBVyxFQUFFO3dCQUN6QixRQUFRLEdBQUcsS0FBSyxDQUFDO3dCQUNqQixJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztxQkFDbEQ7eUJBQ0k7d0JBQ0Qsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO3dCQUM1QixXQUFXLEdBQUcsVUFBVSxDQUFDO3FCQUM1QjtpQkFDSjthQUVKLFFBQU8sSUFBSSxLQUFLLElBQUksRUFBRTtTQUMxQjtRQUVELFVBQVUsR0FBRyxpQkFBaUIsR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFFaEYsT0FBTztZQUNILEtBQUssRUFBRSxVQUFVO1lBQ2pCLG9CQUFvQjtTQUN2QixDQUFDO0lBQ04sQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ssWUFBWSxDQUFDLE1BQWMsRUFBRSxLQUFXLEVBQUUsS0FBVztRQUN6RCxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxxQkFBWSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDbEUsT0FBTyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7U0FDdkI7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSyxpQkFBaUIsQ0FBQyxLQUFXLEVBQUUsS0FBVyxFQUFFLGFBQXdCO1FBQ3hFLGFBQWE7UUFDYixJQUFHLGFBQWEsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLGVBQVEsQ0FBQyxNQUFNLEVBQUU7WUFDaEQsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLE1BQU0sSUFBSSxLQUFLLEVBQy9CLE9BQU8sR0FBRyxLQUFLLENBQUMsTUFBTSxJQUFJLEtBQUssRUFDL0IsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFeEQsNkJBQTZCO1lBQzdCLE9BQU8sYUFBYSxDQUFDLE9BQU8sSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUFDO1NBQ3pFO1FBRUQsbUJBQW1CO1FBQ25CLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNLLFlBQVksQ0FBQyxPQUFnQixFQUFFLFFBQWMsRUFBRSxVQUFzQixFQUFFLE1BQWM7UUFDekYsSUFBRyxRQUFRLENBQUMsSUFBSSxLQUFLLGVBQVEsQ0FBQyxPQUFPLEVBQUU7WUFDbkMsT0FBTyxhQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDNUI7YUFDSTtZQUNELE9BQU8sbUJBQVcsQ0FBQyxPQUFPLEVBQVUsUUFBUSxFQUFFLE1BQU0sRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDM0U7SUFDTCxDQUFDO0NBQ0o7QUFqWkQsNEJBaVpDO0FBQUEsQ0FBQyIsImZpbGUiOiIxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvciwgX3RlbXBWZWN0b3IxLCBfdGVtcFZlY3RvcjQgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgQXhpcywgVmVydGljZXMgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcbmltcG9ydCB7IEFyY3MgfSBmcm9tIFwiLi4vY29tbW9uL2FyY3NcIjtcclxuaW1wb3J0IHsgQ29sbGlzaW9uIH0gZnJvbSBcIi4vbWFuaWZvbGRcIjtcclxuaW1wb3J0IHsgQ29udGFjdCwgQ29udGFjdENvbnN0cmFpbnQgfSBmcm9tIFwiLi4vY29uc3RyYWludC9jb250YWN0XCI7XHJcbmltcG9ydCB7IEVuZ2luZU9wdCB9IGZyb20gXCIuLi9jb3JlL2VuZ2luZVwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IGF4ZXNGaWx0ZXIgfSBmcm9tIFwiLi9heGVzRmlsdGVyXCI7XHJcbmltcG9ydCB7IHZDbGlwLCB2Q2xpcENpcmNsZSB9IGZyb20gXCIuL3ZDbGlwXCI7XHJcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi4vYm9keS9wb2x5Z29uXCI7XHJcbmltcG9ydCB7IENpcmNsZSB9IGZyb20gXCIuLi9ib2R5L2NpcmNsZVwiO1xyXG5pbXBvcnQgeyBCb2R5LCBib2R5VHlwZSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuXHJcblxyXG4vLyDmipXlvbHph43lj6DnsbvlnotcclxuZXhwb3J0IHR5cGUgTWluT3ZlcmxhcCA9IHtcclxuICAgIHZhbHVlOiBudW1iZXI7XHJcbiAgICBheGlzOiBBeGlzO1xyXG4gICAgb3Bwb3NpdGVDbG9zZXN0SW5kZXg6IG51bWJlcjtcclxufTtcclxuXHJcblxyXG4vKipcclxuICog5YiG56a76L20566X5rOVXHJcbiAqIOWPguiAg++8mmh0dHBzOi8vZ2FtZWRldmVsb3BtZW50LnR1dHNwbHVzLmNvbS90dXRvcmlhbHMvY29sbGlzaW9uLWRldGVjdGlvbi11c2luZy10aGUtc2VwYXJhdGluZy1heGlzLXRoZW9yZW0tLWdhbWVkZXYtMTY5XHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIE5GU1BfU0FUIHtcclxuICAgIC8vIOaYr+WQpuW8gOWQr1NBVOWKoOmAn1xyXG4gICAgcHJpdmF0ZSBlbmFibGVTQVRCb29zdDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIHJldXNlQ29sbGlzaW9uVGhyZXNob2xkOiBudW1iZXIgPSAwLjQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBFbmdpbmVPcHQpIHtcclxuICAgICAgICBVdGlsLm1lcmdlKHRoaXMsIG9wdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlpJrovrnlvaIgLSDlpJrovrnlvaLmiJblnIblvaLvvIhnZW9tZXRyee+8iVxyXG4gICAgICogQHBhcmFtIHBvbHlcclxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSBcclxuICAgICAqIEBwYXJhbSBwcmV2Q29sbGlzaW9uXHJcbiAgICAgKi9cclxuICAgIHBvbHlnb25Db2xsaWRlQm9keShwb2x5OiBQb2x5Z29uLCBnZW9tZXRyeTogQm9keSwgcHJldkNvbGxpc2lvbjogQ29sbGlzaW9uKTogQ29sbGlzaW9uIHtcclxuICAgICAgICBsZXQgY2FuUmV1c2U6IGJvb2xlYW4gPSB0aGlzLmNhblJldXNlQ29sbGlzaW9uKHBvbHksIGdlb21ldHJ5LCBwcmV2Q29sbGlzaW9uKSxcclxuICAgICAgICAgICAgY29sbGlzaW9uOiBDb2xsaXNpb24gPSBudWxsLFxyXG4gICAgICAgICAgICBtaW5PdmVybGFwOiBNaW5PdmVybGFwLFxyXG4gICAgICAgICAgICBheGVzOiBBeGlzW107XHJcblxyXG4gICAgICAgIC8vIOiLpeiDveeUqOe8k+WtmO+8jOS9v+eUqOe8k+WtmFxyXG4gICAgICAgIGlmKGNhblJldXNlKSB7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbiA9IHByZXZDb2xsaXNpb247XHJcbiAgICAgICAgICAgIG1pbk92ZXJsYXAgPSB0aGlzLmRldGVjdChwb2x5LCBnZW9tZXRyeSwgW2NvbGxpc2lvbi5heGlzXSwgY29sbGlzaW9uLm9wcG9zaXRlQ2xvc2VzdEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIGlmKG1pbk92ZXJsYXAgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvbi5jb2xsaWRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb2xsaXNpb24ucHJldkNvbnRhY3RzID0gY29sbGlzaW9uLmNvbnRhY3RzO1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uaXNSZXVzZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOiLpeS4jeiDveeUqOe8k+WtmO+8jOWImei/m+ihjOWujOaVtOeahOa1i+ivlVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZihwcmV2Q29sbGlzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2Q29sbGlzaW9uLmlzUmV1c2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29sbGlzaW9uID0gbmV3IENvbGxpc2lvbigpO1xyXG4gICAgICAgICAgICBheGVzID0gdGhpcy5nZXRUZXN0QXhlcyhwb2x5LCBnZW9tZXRyeSk7XHJcbiAgICAgICAgICAgIG1pbk92ZXJsYXAgPSB0aGlzLmRldGVjdChwb2x5LCBnZW9tZXRyeSwgYXhlcyk7XHJcblxyXG4gICAgICAgICAgICAvLyDoi6Xlj5HnjrDkuKTkuKrliJrkvZPmipXlvbHnmoTph43lj6Dpg6jliIbmmK/otJ/nmoTvvIzljbPooajnpLrlroPku6zmsqHnm7jkuqRcclxuICAgICAgICAgICAgaWYobWluT3ZlcmxhcCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uLmNvbGxpZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xsaXNpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbGxpc2lvbi5wYXJ0QSA9IHBvbHk7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbi5wYXJ0QiA9IGdlb21ldHJ5O1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uYm9keUEgPSBwb2x5LnBhcmVudCB8fCBwb2x5O1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uYm9keUIgPSBnZW9tZXRyeS5wYXJlbnQgfHwgZ2VvbWV0cnk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYXhpcyA9IG1pbk92ZXJsYXAuYXhpcyxcclxuICAgICAgICAgICAgICAgIG5vcm1hbCA9IHRoaXMucmV2aXNlTm9ybWFsKG1pbk92ZXJsYXAuYXhpcy52YWx1ZSwgcG9seSwgZ2VvbWV0cnkpO1xyXG5cclxuICAgICAgICAgICAgLy8g5q2k5aSEY29sbGlzaW9uLmF4aXPkuI5taW5PdmVybGFwLmF4aXPkuI3og73lhbHkuqvkuIDkuKrlr7nosaHvvIzlm6DkuLpjb2xsaXNpb24uYXhpc+aYr+agueaNruS4jeWQjOeisOaSnuiAjOWPmOWMlueahO+8jOiAjG1pbk92ZXJsYXAuYXhpc+S4jeiDveWPmFxyXG4gICAgICAgICAgICBjb2xsaXNpb24uYXhpcy52YWx1ZSA9IGF4aXMudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbi5heGlzLnN1cHBvcnRWZXJ0ZXhJbmRleCA9IGF4aXMuc3VwcG9ydFZlcnRleEluZGV4O1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uYXhpcy5vcHBvc2l0ZVZlcnRleEluZGV4ID0gYXhpcy5vcHBvc2l0ZVZlcnRleEluZGV4O1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uYXhpcy5vcHBvc2l0ZSA9IGF4aXMub3Bwb3NpdGU7XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbi5heGlzLm9yaWdpbiA9IGF4aXMub3JpZ2luO1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uYXhpcy5lZGdlID0gYXhpcy5lZGdlO1xyXG5cclxuICAgICAgICAgICAgY29sbGlzaW9uLm9wcG9zaXRlQ2xvc2VzdEluZGV4ID0gbWluT3ZlcmxhcC5vcHBvc2l0ZUNsb3Nlc3RJbmRleDtcclxuICAgICAgICAgICAgY29sbGlzaW9uLm5vcm1hbCA9IG5vcm1hbDtcclxuICAgICAgICAgICAgY29sbGlzaW9uLnRhbmdlbnQgPSBub3JtYWwubm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDorqHnrpfnorDmkp7ngrlcclxuICAgICAgICBjb2xsaXNpb24uY29udGFjdHMgPSB0aGlzLmZpbmRDb250YWN0cyhwb2x5LCBnZW9tZXRyeSwgbWluT3ZlcmxhcCwgY29sbGlzaW9uLm5vcm1hbCk7XHJcbiAgICAgICAgY29sbGlzaW9uLmNvbGxpZGUgPSB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZyG5b2iIC0g5ZyG5b2iXHJcbiAgICAgKiBAcGFyYW0gY2lyY2xlQSBcclxuICAgICAqIEBwYXJhbSBjaXJjbGVCIFxyXG4gICAgICogQHBhcmFtIHByZXZDb2xsaXNpb25cclxuICAgICAqL1xyXG4gICAgY2lyY2xlQ29sbGlkZUNpcmNsZShjaXJjbGVBOiBDaXJjbGUsIGNpcmNsZUI6IENpcmNsZSwgcHJldkNvbGxpc2lvbjogQ29sbGlzaW9uKTogQ29sbGlzaW9uIHtcclxuICAgICAgICBsZXQgYXhpczogVmVjdG9yID0gY2lyY2xlQS5wb3NpdGlvbi5zdWIoY2lyY2xlQi5wb3NpdGlvbiwgX3RlbXBWZWN0b3IxKSxcclxuICAgICAgICAgICAgb3ZlcmxhcHM6IG51bWJlciA9IChjaXJjbGVBLnJhZGl1cyArIGNpcmNsZUIucmFkaXVzKSAtIGF4aXMubGVuKCksXHJcbiAgICAgICAgICAgIG1pbk92ZXJsYXA6IE1pbk92ZXJsYXAgPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogb3ZlcmxhcHMsXHJcbiAgICAgICAgICAgICAgICBheGlzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF4aXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wcG9zaXRlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydFZlcnRleEluZGV4OiAtMSxcclxuICAgICAgICAgICAgICAgICAgICBvcHBvc2l0ZVZlcnRleEluZGV4OiAtMVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9wcG9zaXRlQ2xvc2VzdEluZGV4OiAtMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb2xsaXNpb246IENvbGxpc2lvbiA9IG5ldyBDb2xsaXNpb24oKSxcclxuICAgICAgICAgICAgbm9ybWFsOiBWZWN0b3I7XHJcblxyXG4gICAgICAgIC8vIOS4pOWchuW/g+i3neemu+avlOS4pOWchuWNiuW+hOWSjOimgeWkp++8jOWNs+ayoeacieWPkeeUn+eisOaSnlxyXG4gICAgICAgIGlmKG92ZXJsYXBzIDwgMCkge1xyXG4gICAgICAgICAgICBjb2xsaXNpb24uY29sbGlkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm9ybWFsID0gdGhpcy5yZXZpc2VOb3JtYWwoYXhpcywgY2lyY2xlQSwgY2lyY2xlQikubm9sKCk7XHJcbiAgICAgICAgbWluT3ZlcmxhcC5heGlzLnZhbHVlID0gbm9ybWFsO1xyXG5cclxuICAgICAgICBjb2xsaXNpb24uYXhpcyA9IG1pbk92ZXJsYXAuYXhpcztcclxuICAgICAgICBjb2xsaXNpb24ucGFydEEgPSBjaXJjbGVBO1xyXG4gICAgICAgIGNvbGxpc2lvbi5wYXJ0QiA9IGNpcmNsZUI7XHJcbiAgICAgICAgY29sbGlzaW9uLmJvZHlBID0gY2lyY2xlQS5wYXJlbnQgfHwgY2lyY2xlQTtcclxuICAgICAgICBjb2xsaXNpb24uYm9keUIgPSBjaXJjbGVCLnBhcmVudCB8fCBjaXJjbGVCO1xyXG5cclxuICAgICAgICBjb2xsaXNpb24ubm9ybWFsID0gbm9ybWFsO1xyXG4gICAgICAgIGNvbGxpc2lvbi50YW5nZW50ID0gbm9ybWFsLm5vcigpO1xyXG5cclxuICAgICAgICBsZXQgcG9zaXRpb24gPSBjaXJjbGVCLnBvc2l0aW9uLmxvYyhub3JtYWwsIGNpcmNsZUIucmFkaXVzIC0gbWluT3ZlcmxhcC52YWx1ZSAvIDIpO1xyXG5cclxuICAgICAgICBjb2xsaXNpb24uY29udGFjdHMgPSBbQ29udGFjdENvbnN0cmFpbnQuY3JlYXRlKG51bGwsIHBvc2l0aW9uLCBtaW5PdmVybGFwLnZhbHVlKV07XHJcbiAgICAgICAgY29sbGlzaW9uLmNvbGxpZGUgPSB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDov5vooYzliIbnprvovbTmo4DmtYtcclxuICAgICAqIEBwYXJhbSBwb2x5IFxyXG4gICAgICogQHBhcmFtIGdlb21ldHJ5IFxyXG4gICAgICogQHBhcmFtIGF4ZXMgXHJcbiAgICAgKiBAcGFyYW0gcHJldk9wcG9zaXRlQ2xvc2VzdEluZGV4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZGV0ZWN0KHBvbHk6IFBvbHlnb24sIGdlb21ldHJ5OiBCb2R5LCBheGVzOiBBeGlzW10sIHByZXZPcHBvc2l0ZUNsb3Nlc3RJbmRleD86IG51bWJlcik6IE1pbk92ZXJsYXAge1xyXG4gICAgICAgIGxldCBtaW5PdmVybGFwOiBudW1iZXIgPSBJbmZpbml0eSxcclxuICAgICAgICAgICAgb3Bwb3NpdGVDbG9zZXN0SW5kZXg6IG51bWJlcixcclxuICAgICAgICAgICAgZ2V0T3ZlcmxhcHMgPSB0aGlzLmVuYWJsZVNBVEJvb3N0PyB0aGlzLnNlbGVjdGl2ZVByb2plY3Rpb25NZXRob2Q6IHRoaXMuZnVsbFByb2plY3Rpb25NZXRob2QsXHJcbiAgICAgICAgICAgIG92ZXJsYXBzOiB7ZGVwdGg6IG51bWJlciwgb3Bwb3NpdGVDbG9zZXN0SW5kZXg6IG51bWJlcn0sIFxyXG4gICAgICAgICAgICBpLCBpbmRleDtcclxuXHJcbiAgICAgICAgLy8g5bCG5Lik5Liq5Yia5L2T5oqV5b2x5Yiw5omA5pyJ6L205LiKXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZihheGVzW2ldID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3ZlcmxhcHMgPSBnZXRPdmVybGFwcyhwb2x5LCBnZW9tZXRyeSwgYXhlc1tpXSwgcHJldk9wcG9zaXRlQ2xvc2VzdEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIGlmKG92ZXJsYXBzLmRlcHRoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKG92ZXJsYXBzLmRlcHRoIDwgbWluT3ZlcmxhcCkge1xyXG4gICAgICAgICAgICAgICAgbWluT3ZlcmxhcCA9IG92ZXJsYXBzLmRlcHRoO1xyXG4gICAgICAgICAgICAgICAgb3Bwb3NpdGVDbG9zZXN0SW5kZXggPSBvdmVybGFwcy5vcHBvc2l0ZUNsb3Nlc3RJbmRleDtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsdWU6IG1pbk92ZXJsYXAsXHJcbiAgICAgICAgICAgIG9wcG9zaXRlQ2xvc2VzdEluZGV4LFxyXG4gICAgICAgICAgICBheGlzOiBheGVzW2luZGV4XSxcclxuICAgICAgICB9XHJcbiAgICB9IFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlua1i+ivlei9tFxyXG4gICAgICogQHBhcmFtIHBvbHkgXHJcbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnkgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0VGVzdEF4ZXMocG9seTogUG9seWdvbiwgZ2VvbWV0cnk6IEJvZHkpOiBBeGlzW10ge1xyXG4gICAgICAgIGxldCBheGVzOiBBeGlzW10sXHJcbiAgICAgICAgICAgIGNpcmNsZUF4aXM6IEF4aXM7XHJcblxyXG4gICAgICAgIC8vIOiLpWdlb21ldHJ55piv5ZyG5b2i77yM6K6h566X5LiA5p2h5Yqo5oCB6L20XHJcbiAgICAgICAgaWYoZ2VvbWV0cnkudHlwZSA9PT0gYm9keVR5cGUuY2lyY2xlKSB7XHJcbiAgICAgICAgICAgIGNpcmNsZUF4aXMgPSBBcmNzLmdldEF4ZXMoPENpcmNsZT5nZW9tZXRyeSwgcG9seSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDlpoLmnpzlvIDlkK/kuobliqDpgJ/lip/og73vvIzpppblhYjov5vooYzovbTov4fmu6RcclxuICAgICAgICBpZih0aGlzLmVuYWJsZVNBVEJvb3N0KSB7XHJcbiAgICAgICAgICAgIGF4ZXMgPSBheGVzRmlsdGVyKHBvbHksIGdlb21ldHJ5KTtcclxuXHJcbiAgICAgICAgICAgIGlmKGNpcmNsZUF4aXMpIHtcclxuICAgICAgICAgICAgICAgIGF4ZXMucHVzaChjaXJjbGVBeGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG9wcG9zaXRlID0gZ2VvbWV0cnkudHlwZSA9PT0gYm9keVR5cGUuY2lyY2xlPyA8Q2lyY2xlPmdlb21ldHJ5OiAoPFBvbHlnb24+Z2VvbWV0cnkpLnZlcnRleExpc3QsIFxyXG4gICAgICAgICAgICAgICAgb3Bwb3NpdGVBeGVzOiBBeGlzW10sIGk7XHJcblxyXG4gICAgICAgICAgICBheGVzID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBwb2x5LmF4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKHBvbHkuYXhlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvbHkuYXhlc1tpXS5vcHBvc2l0ZSA9IG9wcG9zaXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF4ZXMucHVzaChwb2x5LmF4ZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihjaXJjbGVBeGlzKSB7XHJcbiAgICAgICAgICAgICAgICBheGVzLnB1c2goY2lyY2xlQXhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcHBvc2l0ZUF4ZXMgPSAoPFBvbHlnb24+Z2VvbWV0cnkpLmF4ZXM7XHJcbiAgICAgICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBvcHBvc2l0ZUF4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihvcHBvc2l0ZUF4ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3Bwb3NpdGVBeGVzW2ldLm9wcG9zaXRlID0gcG9seS52ZXJ0ZXhMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBheGVzLnB1c2gob3Bwb3NpdGVBeGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGF4ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlhajmipXlvbHms5XvvIjkvKDnu5/vvIlcclxuICAgICAqIEBwYXJhbSBwb2x5IFxyXG4gICAgICogQHBhcmFtIGdlb21ldHJ5IFxyXG4gICAgICogQHBhcmFtIGF4aXMgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZnVsbFByb2plY3Rpb25NZXRob2QocG9seTogUG9seWdvbiwgZ2VvbWV0cnk6IEJvZHksIGF4aXM6IEF4aXMsIHByZXZPcHBvc2l0ZUNsb3Nlc3RJbmRleDogbnVtYmVyKToge2RlcHRoOiBudW1iZXIsIG9wcG9zaXRlQ2xvc2VzdEluZGV4OiBudW1iZXJ9IHtcclxuICAgICAgICBsZXQgYXhpc1ZlY3RvcjogVmVjdG9yID0gYXhpcy52YWx1ZSxcclxuICAgICAgICAgICAgcGFydEEgPSBwb2x5LnZlcnRleExpc3QsXHJcbiAgICAgICAgICAgIHBhcnRCID0gZ2VvbWV0cnkudHlwZSA9PT0gYm9keVR5cGUucG9seWdvbj8gKDxQb2x5Z29uPmdlb21ldHJ5KS52ZXJ0ZXhMaXN0OiA8Q2lyY2xlPmdlb21ldHJ5LFxyXG4gICAgICAgICAgICBwcm9qZWN0aW9uMSxcclxuICAgICAgICAgICAgcHJvamVjdGlvbjI7XHJcblxyXG4gICAgICAgIC8vIOiLpWdlb21ldHJ55piv5aSa6L655b2iXHJcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShwYXJ0QikpIHtcclxuICAgICAgICAgICAgcHJvamVjdGlvbjEgPSBWZXJ0aWNlcy5wcm9qZWN0aW9uKHBhcnRBLCBheGlzVmVjdG9yKSxcclxuICAgICAgICAgICAgcHJvamVjdGlvbjIgPSBWZXJ0aWNlcy5wcm9qZWN0aW9uKHBhcnRCLCBheGlzVmVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5piv5ZyG5b2iXHJcbiAgICAgICAgZWxzZSB7IFxyXG4gICAgICAgICAgICBwcm9qZWN0aW9uMSA9IFZlcnRpY2VzLnByb2plY3Rpb24ocGFydEEsIGF4aXNWZWN0b3IpLFxyXG4gICAgICAgICAgICBwcm9qZWN0aW9uMiA9IEFyY3MucHJvamVjdGlvbihwYXJ0QiwgYXhpc1ZlY3Rvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkZXB0aDogTWF0aC5taW4ocHJvamVjdGlvbjEubWF4IC0gcHJvamVjdGlvbjIubWluLCBwcm9qZWN0aW9uMi5tYXggLSBwcm9qZWN0aW9uMS5taW4pLFxyXG4gICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleDogLTFcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6YCJ5oup5oqV5b2x5rOVXHJcbiAgICAgKiBAcGFyYW0gcG9seSBcclxuICAgICAqIEBwYXJhbSBnZW9tZXRyeSBcclxuICAgICAqIEBwYXJhbSBheGlzIFxyXG4gICAgICogQHBhcmFtIG9wcG9zaXRlQ2xvc2VzdEluZGV4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2VsZWN0aXZlUHJvamVjdGlvbk1ldGhvZChwb2x5OiBQb2x5Z29uLCBnZW9tZXRyeTogQm9keSwgYXhpczogQXhpcywgb3Bwb3NpdGVDbG9zZXN0SW5kZXg/OiBudW1iZXIpOiB7ZGVwdGg6IG51bWJlciwgb3Bwb3NpdGVDbG9zZXN0SW5kZXg6IG51bWJlcn0ge1xyXG4gICAgICAgIGxldCBheGlzVmVjdG9yOiBWZWN0b3IgPSBheGlzLnZhbHVlLFxyXG4gICAgICAgICAgICBvcHBvc2l0ZSA9IGF4aXMub3Bwb3NpdGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vIOivpei9tOaYr+WchuW9ouWSjOWkmui+ueW9oueahOWKqOaAgei9tFxyXG4gICAgICAgIGlmKG9wcG9zaXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxldCBwcm9qZWN0aW9uMSA9IFZlcnRpY2VzLnByb2plY3Rpb24ocG9seS52ZXJ0ZXhMaXN0LCBheGlzVmVjdG9yKSxcclxuICAgICAgICAgICAgICAgIHByb2plY3Rpb24yID0gQXJjcy5wcm9qZWN0aW9uKDxDaXJjbGU+Z2VvbWV0cnksIGF4aXNWZWN0b3IpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRlcHRoOiBNYXRoLm1pbihwcm9qZWN0aW9uMS5tYXggLSBwcm9qZWN0aW9uMi5taW4sIHByb2plY3Rpb24yLm1heCAtIHByb2plY3Rpb24xLm1pbiksXHJcbiAgICAgICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHN1cHBvcnRWZXJ0ZXggPSBheGlzLm9yaWdpbltheGlzLnN1cHBvcnRWZXJ0ZXhJbmRleF0sXHJcbiAgICAgICAgICAgIHN1cHBvcnRQcm9qZWN0aW9uOiBudW1iZXIgPSBzdXBwb3J0VmVydGV4LmRvdChheGlzVmVjdG9yKTtcclxuXHJcbiAgICAgICAgLy8g5a+56Z2i5piv5ZyG5b2iXHJcbiAgICAgICAgaWYob3Bwb3NpdGUgaW5zdGFuY2VvZiBDaXJjbGUpIHtcclxuICAgICAgICAgICAgbGV0IGNpcmNsZVByb2plY3Rpb24gPSBBcmNzLnByb2plY3Rpb24ob3Bwb3NpdGUsIGF4aXNWZWN0b3IpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZGVwdGg6IHN1cHBvcnRQcm9qZWN0aW9uIC0gY2lyY2xlUHJvamVjdGlvbi5taW4sXHJcbiAgICAgICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgbWF4T3ZlcmxhcDogbnVtYmVyID0gLUluZmluaXR5O1xyXG5cclxuICAgICAgICAvLyDoi6XmnIDov5HngrnmsqHmnInnvJPlrZjvvIzmiafooYzniKzlsbHms5Xph43mlrDorqHnrpfmnIDov5HngrlcclxuICAgICAgICBpZihvcHBvc2l0ZUNsb3Nlc3RJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBvcHBvc2l0ZUluZGV4ID0gYXhpcy5vcHBvc2l0ZVZlcnRleEluZGV4LFxyXG4gICAgICAgICAgICAgICAgcHJldjogbnVtYmVyLCBuZXh0OiBudW1iZXIsIFxyXG4gICAgICAgICAgICAgICAgc2Vla1ByZXY6IGJvb2xlYW4gPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2Vla05leHQ6IGJvb2xlYW4gPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGFzdFByZXZQcm86IG51bWJlcixcclxuICAgICAgICAgICAgICAgIGxhc3ROZXh0UHJvOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICBwcm9qZWN0aW9uID0gb3Bwb3NpdGVbb3Bwb3NpdGVJbmRleF0uZG90KGF4aXNWZWN0b3IpO1xyXG4gICAgICAgICAgICBwcmV2ID0gbmV4dCA9IG9wcG9zaXRlSW5kZXg7XHJcbiAgICAgICAgICAgIGxhc3RQcmV2UHJvID0gbGFzdE5leHRQcm8gPSBwcm9qZWN0aW9uO1xyXG4gICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleCA9IG9wcG9zaXRlSW5kZXg7XHJcblxyXG4gICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICBpZighc2Vla1ByZXYgJiYgIXNlZWtOZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZihzZWVrUHJldikge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXYgPSBwcmV2ID4gMD8gcHJldiAtIDE6IG9wcG9zaXRlLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbiA9IG9wcG9zaXRlW3ByZXZdLmRvdChheGlzVmVjdG9yKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHByb2plY3Rpb24gPiBsYXN0UHJldlBybykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWVrUHJldiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0gKHByZXYgKyAxKSAlIG9wcG9zaXRlLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wcG9zaXRlQ2xvc2VzdEluZGV4ID0gcHJldjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFByZXZQcm8gPSBwcm9qZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoc2Vla05leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gKG5leHQgKyAxKSAlIG9wcG9zaXRlLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uID0gb3Bwb3NpdGVbbmV4dF0uZG90KGF4aXNWZWN0b3IpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJvamVjdGlvbiA+IGxhc3ROZXh0UHJvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZWtOZXh0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBuZXh0ID4gMD8gbmV4dCAtIDE6IG9wcG9zaXRlLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleCA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROZXh0UHJvID0gcHJvamVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgfSB3aGlsZShwcmV2ICE9PSBuZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1heE92ZXJsYXAgPSBzdXBwb3J0UHJvamVjdGlvbiAtIG9wcG9zaXRlW29wcG9zaXRlQ2xvc2VzdEluZGV4XS5kb3QoYXhpc1ZlY3Rvcik7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRlcHRoOiBtYXhPdmVybGFwLFxyXG4gICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkv67mraPnorDmkp7ms5Xnur/mlrnlkJHvvIzkvb/lhbblp4vnu4jog4zlkJHliJrkvZNBXHJcbiAgICAgKiBAcGFyYW0gbm9ybWFsIOimgeS/ruato+eahOazlee6v1xyXG4gICAgICogQHBhcmFtIGJvZHlBIOWImuS9k0FcclxuICAgICAqIEBwYXJhbSBib2R5QiDliJrkvZNCXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmV2aXNlTm9ybWFsKG5vcm1hbDogVmVjdG9yLCBib2R5QTogQm9keSwgYm9keUI6IEJvZHkpOiBWZWN0b3Ige1xyXG4gICAgICAgIGlmIChub3JtYWwuZG90KGJvZHlCLnBvc2l0aW9uLnN1Yihib2R5QS5wb3NpdGlvbiwgX3RlbXBWZWN0b3IxKSkgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub3JtYWwuaW52KCk7XHJcbiAgICAgICAgfSBcclxuXHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOafpeeci+eisOaSnue8k+WtmOaYr+WQpuWPr+S7peWkjeeUqFxyXG4gICAgICogQHBhcmFtIGJvZHlBXHJcbiAgICAgKiBAcGFyYW0gYm9keUJcclxuICAgICAqIEBwYXJhbSBwcmV2Q29sbGlzaW9uIOS4iuS4gOasoeeahOeisOaSnlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhblJldXNlQ29sbGlzaW9uKGJvZHlBOiBCb2R5LCBib2R5QjogQm9keSwgcHJldkNvbGxpc2lvbjogQ29sbGlzaW9uKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8g6Iul5LiK5qyh56Kw5pKe55qE57yT5a2Y5a2Y5ZyoXHJcbiAgICAgICAgaWYocHJldkNvbGxpc2lvbiAmJiBib2R5Qi50eXBlICE9PSBib2R5VHlwZS5jaXJjbGUpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudEEgPSBib2R5QS5wYXJlbnQgfHwgYm9keUEsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRCID0gYm9keUIucGFyZW50IHx8IGJvZHlCLFxyXG4gICAgICAgICAgICAgICAgbW90aW9uID0gTWF0aC5zcXJ0KHBhcmVudEEubW90aW9uICsgcGFyZW50Qi5tb3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgLy8g6Iul5LiK5qyh56Kw5pKe5Yik5a6a5Li655yf77yM5LiU5b2T5YmN56Kw5pKe5a+55Yia5L2T6LaL5LqO6Z2Z5q2i77yM5Y+v5aSN55SoXHJcbiAgICAgICAgICAgIHJldHVybiBwcmV2Q29sbGlzaW9uLmNvbGxpZGUgJiYgbW90aW9uIDwgdGhpcy5yZXVzZUNvbGxpc2lvblRocmVzaG9sZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g56Kw5pKe57yT5a2Y5LiN5a2Y5Zyo77yM55u05o6l5Yik5a6a5peg5rOV5aSN55SoXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC6Kej56Kw5pKe54K5XHJcbiAgICAgKiBAcGFyYW0gZ2VvbWV0cnkgXHJcbiAgICAgKiBAcGFyYW0gbWluT3ZlcmxhcFxyXG4gICAgICogQHBhcmFtIG5vcm1hbFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZpbmRDb250YWN0cyhwb2x5Z29uOiBQb2x5Z29uLCBnZW9tZXRyeTogQm9keSwgbWluT3ZlcmxhcDogTWluT3ZlcmxhcCwgbm9ybWFsOiBWZWN0b3IpOiBDb250YWN0W10ge1xyXG4gICAgICAgIGlmKGdlb21ldHJ5LnR5cGUgPT09IGJvZHlUeXBlLnBvbHlnb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZDbGlwKG1pbk92ZXJsYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZDbGlwQ2lyY2xlKHBvbHlnb24sIDxDaXJjbGU+Z2VvbWV0cnksIG5vcm1hbCwgbWluT3ZlcmxhcC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.axesFilter = void 0;\r\nconst body_1 = __webpack_require__(2);\r\nconst vector_1 = __webpack_require__(0);\r\nfunction axesFilter(poly, geometry) {\r\n    let centroidVector = geometry.position.sub(poly.position, vector_1._tempVector1), axesA, axesB, supportIndexA, supportIndexB, i, res = [];\r\n    axesA = findClosestAxes(poly, geometry, centroidVector);\r\n    supportIndexA = axesA[0].supportVertexIndex;\r\n    if (geometry.type === body_1.bodyType.polygon) {\r\n        axesB = findClosestAxes(geometry, poly, centroidVector.inv(centroidVector));\r\n        supportIndexB = axesB[0].supportVertexIndex;\r\n    }\r\n    for (i = 0; i < axesA.length; i++) {\r\n        axesA[i].oppositeVertexIndex = supportIndexB;\r\n        res.push(axesA[i]);\r\n    }\r\n    if (axesB) {\r\n        for (i = 0; i < axesB.length; i++) {\r\n            axesB[i].oppositeVertexIndex = supportIndexA;\r\n            res.push(axesB[i]);\r\n        }\r\n    }\r\n    return res;\r\n}\r\nexports.axesFilter = axesFilter;\r\n/**\r\n * @param poly\r\n * @param geometry\r\n * @param centroidVector\r\n * @param oppositeCentroid\r\n */\r\nfunction findClosestAxes(poly, geometry, centroidVector) {\r\n    let v = poly.vertexList, axes = poly.axes, vertex, axis, distance, minDistance = Infinity, dot, lastDot = axes[axes.length - 1].value.dot(centroidVector), index = -1, opposite = geometry.type === body_1.bodyType.polygon ? geometry.vertexList : geometry, oppositeCentroid = geometry.position;\r\n    for (let i = 0; i < v.length; i++) {\r\n        vertex = v[i];\r\n        axis = axes[i];\r\n        dot = axis.value.dot(centroidVector);\r\n        if (dot < 0 && lastDot < 0) {\r\n            continue;\r\n        }\r\n        distance = (vertex.x - oppositeCentroid.x) ** 2 + (vertex.y - oppositeCentroid.y) ** 2;\r\n        if (distance < minDistance) {\r\n            minDistance = distance;\r\n            index = i;\r\n        }\r\n        lastDot = dot;\r\n    }\r\n    let prev = index > 0 ? index - 1 : v.length - 1, prevAxis = axes[prev], indexAxis = axes[index];\r\n    prevAxis.supportVertexIndex = index;\r\n    prevAxis.opposite = opposite;\r\n    prevAxis.origin = poly.vertexList;\r\n    indexAxis.supportVertexIndex = index;\r\n    indexAxis.opposite = opposite;\r\n    indexAxis.origin = poly.vertexList;\r\n    return [prevAxis, indexAxis];\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL2F4ZXNGaWx0ZXIudHM/NGRkZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxzQ0FBOEM7QUFJOUMsd0NBQWtGO0FBSWxGLFNBQWdCLFVBQVUsQ0FBQyxJQUFhLEVBQUUsUUFBYztJQUNwRCxJQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLHFCQUFZLENBQUMsRUFDbkUsS0FBYSxFQUFFLEtBQWEsRUFDNUIsYUFBcUIsRUFBRSxhQUFxQixFQUM1QyxDQUFDLEVBQUUsR0FBRyxHQUFXLEVBQUUsQ0FBQztJQUV4QixLQUFLLEdBQUcsZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFDeEQsYUFBYSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQztJQUU1QyxJQUFHLFFBQVEsQ0FBQyxJQUFJLEtBQUssZUFBUSxDQUFDLE9BQU8sRUFBRTtRQUNuQyxLQUFLLEdBQUcsZUFBZSxDQUFVLFFBQVEsRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLGFBQWEsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUM7S0FDL0M7SUFFRCxLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDOUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixHQUFHLGFBQWEsQ0FBQztRQUM3QyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3RCO0lBRUQsSUFBRyxLQUFLLEVBQUU7UUFDTixLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixHQUFHLGFBQWEsQ0FBQztZQUM3QyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3RCO0tBQ0o7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNmLENBQUM7QUEzQkQsZ0NBMkJDO0FBR0Q7Ozs7O0dBS0c7QUFDSCxTQUFTLGVBQWUsQ0FBQyxJQUFhLEVBQUUsUUFBYyxFQUFFLGNBQXNCO0lBQzFFLElBQUksQ0FBQyxHQUFlLElBQUksQ0FBQyxVQUFVLEVBQy9CLElBQUksR0FBVyxJQUFJLENBQUMsSUFBSSxFQUN4QixNQUFjLEVBQ2QsSUFBVSxFQUNWLFFBQWdCLEVBQ2hCLFdBQVcsR0FBVyxRQUFRLEVBQzlCLEdBQVcsRUFDWCxPQUFPLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFDakUsS0FBSyxHQUFXLENBQUMsQ0FBQyxFQUNsQixRQUFRLEdBQUcsUUFBUSxDQUFDLElBQUksS0FBSyxlQUFRLENBQUMsT0FBTyxFQUFDLENBQVcsUUFBUyxDQUFDLFVBQVUsRUFBQyxDQUFTLFFBQVEsRUFDL0YsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUV6QyxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUM5QixNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2QsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVmLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUVyQyxJQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRTtZQUN2QixTQUFTO1NBQ1o7UUFFRCxRQUFRLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXZGLElBQUcsUUFBUSxHQUFHLFdBQVcsRUFBRTtZQUN2QixXQUFXLEdBQUcsUUFBUSxDQUFDO1lBQ3ZCLEtBQUssR0FBRyxDQUFDLENBQUM7U0FDYjtRQUVELE9BQU8sR0FBRyxHQUFHLENBQUM7S0FDakI7SUFFRCxJQUFJLElBQUksR0FBRyxLQUFLLEdBQUcsQ0FBQyxFQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUN6QyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUNyQixTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRTVCLFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7SUFDcEMsUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDN0IsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBRWxDLFNBQVMsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7SUFDckMsU0FBUyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDOUIsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBRW5DLE9BQU8sQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDakMsQ0FBQyIsImZpbGUiOiIyMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvZHksIGJvZHlUeXBlIH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBDaXJjbGUgfSBmcm9tIFwiLi4vYm9keS9jaXJjbGVcIjtcclxuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuLi9ib2R5L3BvbHlnb25cIjtcclxuaW1wb3J0IHsgQXhpcywgVmVydGV4TGlzdCB9IGZyb20gXCIuLi9jb21tb24vdmVydGljZXNcIjtcclxuaW1wb3J0IHsgVmVjdG9yLCBfdGVtcFZlY3RvcjEsIF90ZW1wVmVjdG9yMiwgX3RlbXBWZWN0b3IzIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBheGVzRmlsdGVyKHBvbHk6IFBvbHlnb24sIGdlb21ldHJ5OiBCb2R5KTogQXhpc1tdIHtcclxuICAgIGxldCBjZW50cm9pZFZlY3RvciA9IGdlb21ldHJ5LnBvc2l0aW9uLnN1Yihwb2x5LnBvc2l0aW9uLCBfdGVtcFZlY3RvcjEpLFxyXG4gICAgICAgIGF4ZXNBOiBBeGlzW10sIGF4ZXNCOiBBeGlzW10sXHJcbiAgICAgICAgc3VwcG9ydEluZGV4QTogbnVtYmVyLCBzdXBwb3J0SW5kZXhCOiBudW1iZXIsXHJcbiAgICAgICAgaSwgcmVzOiBBeGlzW10gPSBbXTtcclxuXHJcbiAgICBheGVzQSA9IGZpbmRDbG9zZXN0QXhlcyhwb2x5LCBnZW9tZXRyeSwgY2VudHJvaWRWZWN0b3IpO1xyXG4gICAgc3VwcG9ydEluZGV4QSA9IGF4ZXNBWzBdLnN1cHBvcnRWZXJ0ZXhJbmRleDtcclxuXHJcbiAgICBpZihnZW9tZXRyeS50eXBlID09PSBib2R5VHlwZS5wb2x5Z29uKSB7XHJcbiAgICAgICAgYXhlc0IgPSBmaW5kQ2xvc2VzdEF4ZXMoPFBvbHlnb24+Z2VvbWV0cnksIHBvbHksIGNlbnRyb2lkVmVjdG9yLmludihjZW50cm9pZFZlY3RvcikpO1xyXG4gICAgICAgIHN1cHBvcnRJbmRleEIgPSBheGVzQlswXS5zdXBwb3J0VmVydGV4SW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGkgPSAwOyBpIDwgYXhlc0EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBheGVzQVtpXS5vcHBvc2l0ZVZlcnRleEluZGV4ID0gc3VwcG9ydEluZGV4QjtcclxuICAgICAgICByZXMucHVzaChheGVzQVtpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoYXhlc0IpIHtcclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBheGVzQi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBheGVzQltpXS5vcHBvc2l0ZVZlcnRleEluZGV4ID0gc3VwcG9ydEluZGV4QTtcclxuICAgICAgICAgICAgcmVzLnB1c2goYXhlc0JbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSBwb2x5IFxyXG4gKiBAcGFyYW0gZ2VvbWV0cnlcclxuICogQHBhcmFtIGNlbnRyb2lkVmVjdG9yIFxyXG4gKiBAcGFyYW0gb3Bwb3NpdGVDZW50cm9pZFxyXG4gKi9cclxuZnVuY3Rpb24gZmluZENsb3Nlc3RBeGVzKHBvbHk6IFBvbHlnb24sIGdlb21ldHJ5OiBCb2R5LCBjZW50cm9pZFZlY3RvcjogVmVjdG9yKTogQXhpc1tdIHtcclxuICAgIGxldCB2OiBWZXJ0ZXhMaXN0ID0gcG9seS52ZXJ0ZXhMaXN0LFxyXG4gICAgICAgIGF4ZXM6IEF4aXNbXSA9IHBvbHkuYXhlcyxcclxuICAgICAgICB2ZXJ0ZXg6IFZlY3RvcixcclxuICAgICAgICBheGlzOiBBeGlzLFxyXG4gICAgICAgIGRpc3RhbmNlOiBudW1iZXIsXHJcbiAgICAgICAgbWluRGlzdGFuY2U6IG51bWJlciA9IEluZmluaXR5LFxyXG4gICAgICAgIGRvdDogbnVtYmVyLFxyXG4gICAgICAgIGxhc3REb3Q6IG51bWJlciA9IGF4ZXNbYXhlcy5sZW5ndGggLSAxXS52YWx1ZS5kb3QoY2VudHJvaWRWZWN0b3IpLFxyXG4gICAgICAgIGluZGV4OiBudW1iZXIgPSAtMSxcclxuICAgICAgICBvcHBvc2l0ZSA9IGdlb21ldHJ5LnR5cGUgPT09IGJvZHlUeXBlLnBvbHlnb24/ICg8UG9seWdvbj5nZW9tZXRyeSkudmVydGV4TGlzdDogPENpcmNsZT5nZW9tZXRyeSxcclxuICAgICAgICBvcHBvc2l0ZUNlbnRyb2lkID0gZ2VvbWV0cnkucG9zaXRpb247XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHYubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2ZXJ0ZXggPSB2W2ldO1xyXG4gICAgICAgIGF4aXMgPSBheGVzW2ldO1xyXG5cclxuICAgICAgICBkb3QgPSBheGlzLnZhbHVlLmRvdChjZW50cm9pZFZlY3Rvcik7XHJcbiBcclxuICAgICAgICBpZihkb3QgPCAwICYmIGxhc3REb3QgPCAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGlzdGFuY2UgPSAodmVydGV4LnggLSBvcHBvc2l0ZUNlbnRyb2lkLngpICoqIDIgKyAodmVydGV4LnkgLSBvcHBvc2l0ZUNlbnRyb2lkLnkpICoqIDI7XHJcblxyXG4gICAgICAgIGlmKGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIGxhc3REb3QgPSBkb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByZXYgPSBpbmRleCA+IDA/IGluZGV4IC0gMTogdi5sZW5ndGggLSAxLFxyXG4gICAgICAgIHByZXZBeGlzID0gYXhlc1twcmV2XSxcclxuICAgICAgICBpbmRleEF4aXMgPSBheGVzW2luZGV4XTtcclxuXHJcbiAgICBwcmV2QXhpcy5zdXBwb3J0VmVydGV4SW5kZXggPSBpbmRleDtcclxuICAgIHByZXZBeGlzLm9wcG9zaXRlID0gb3Bwb3NpdGU7XHJcbiAgICBwcmV2QXhpcy5vcmlnaW4gPSBwb2x5LnZlcnRleExpc3Q7XHJcblxyXG4gICAgaW5kZXhBeGlzLnN1cHBvcnRWZXJ0ZXhJbmRleCA9IGluZGV4O1xyXG4gICAgaW5kZXhBeGlzLm9wcG9zaXRlID0gb3Bwb3NpdGU7XHJcbiAgICBpbmRleEF4aXMub3JpZ2luID0gcG9seS52ZXJ0ZXhMaXN0O1xyXG4gICAgXHJcbiAgICByZXR1cm4gW3ByZXZBeGlzLCBpbmRleEF4aXNdO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///20\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.vClipCircle = exports.vClip = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nconst contact_1 = __webpack_require__(7);\r\nconst arcs_1 = __webpack_require__(6);\r\n/**\r\n * 寻找 incident edge\r\n * @param oppositeVertexList\r\n * @param normal\r\n * @param oppositeClosestIndex\r\n */\r\nfunction findIncidentEdge(oppositeVertexList, normal, oppositeClosestIndex) {\r\n    let prev, cur, next, index;\r\n    if (oppositeClosestIndex === null) {\r\n        let min = Infinity, dot;\r\n        for (let i = 0; i < oppositeVertexList.length; i++) {\r\n            dot = oppositeVertexList[i].dot(normal);\r\n            if (dot < min) {\r\n                min = dot;\r\n                oppositeClosestIndex = i;\r\n            }\r\n        }\r\n    }\r\n    index = oppositeClosestIndex;\r\n    let prevIndex = index === 0 ? oppositeVertexList.length - 1 : index - 1, nextIndex = (index + 1) % oppositeVertexList.length, edge = { start: null, end: null, index: [-1, -1] };\r\n    cur = oppositeVertexList[index];\r\n    prev = oppositeVertexList[prevIndex];\r\n    next = oppositeVertexList[nextIndex];\r\n    cur.sub(prev, vector_1._tempVector1);\r\n    cur.sub(next, vector_1._tempVector2);\r\n    let d1 = Math.abs(vector_1._tempVector1.dot(normal)), d2 = Math.abs(vector_1._tempVector2.dot(normal));\r\n    if (d1 < d2) {\r\n        edge.start = prev;\r\n        edge.end = cur;\r\n        edge.index = [prevIndex, index];\r\n    }\r\n    else {\r\n        edge.start = cur;\r\n        edge.end = next;\r\n        edge.index = [index, nextIndex];\r\n    }\r\n    return edge;\r\n}\r\n/**\r\n * 筛选两边\r\n * @param incEdge\r\n * @param refV\r\n * @param d\r\n */\r\nfunction clipSide(incEdge, refV, d) {\r\n    let d1 = incEdge.start.dot(refV) - d, d2 = incEdge.end.dot(refV) - d;\r\n    if (d1 >= 0) {\r\n        return 0;\r\n    }\r\n    if (d2 >= 0) {\r\n        return 1;\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * V-Clip 算法寻找碰撞点\r\n * 详见：https://github.com/phenomLi/Blog/issues/42\r\n * @param poly1\r\n * @param poly2\r\n * @param normal\r\n * @param depth\r\n */\r\nfunction vClip(minOverlap) {\r\n    let axis = minOverlap.axis, normal = axis.value, incEdge, refEdge, ids = [], contacts = [];\r\n    incEdge = findIncidentEdge(axis.opposite, normal, minOverlap.oppositeClosestIndex);\r\n    refEdge = axis.edge;\r\n    // ------------------------------------- 首先向 refEdge 的内部进行筛选 -------------------\r\n    let refV = refEdge.end.sub(refEdge.start).nol(), refN = normal, d = refEdge.start.dot(refN), d1 = incEdge.start.dot(refN) - d, d2 = incEdge.end.dot(refN) - d, incVertex = [], removeIndex = -1;\r\n    if (d1 <= 0) {\r\n        ids[0] = [incEdge.index[0], incEdge.index[0]];\r\n        incVertex[0] = incEdge.start;\r\n    }\r\n    if (d2 <= 0) {\r\n        ids[1] = [incEdge.index[1], incEdge.index[1]];\r\n        incVertex[1] = incEdge.end;\r\n    }\r\n    // ------------------------------------- 接下来进行两边筛选 -------------------\r\n    removeIndex = clipSide(incEdge, refV, refEdge.end.dot(refV));\r\n    if (removeIndex !== -1 && incVertex[removeIndex]) {\r\n        ids[removeIndex][0] = refEdge.index[1];\r\n        incVertex[removeIndex] = refEdge.end;\r\n    }\r\n    removeIndex = clipSide(incEdge, refV.inv(refV), refEdge.start.dot(refV));\r\n    if (removeIndex !== -1 && incVertex[removeIndex]) {\r\n        ids[removeIndex][0] = refEdge.index[0];\r\n        incVertex[removeIndex] = refEdge.start;\r\n    }\r\n    if (incVertex[0]) {\r\n        contacts.push(contact_1.ContactConstraint.create(ids[0], incVertex[0], Math.abs(d1)));\r\n    }\r\n    if (incVertex[1]) {\r\n        contacts.push(contact_1.ContactConstraint.create(ids[1], incVertex[1], Math.abs(d2)));\r\n    }\r\n    return contacts;\r\n}\r\nexports.vClip = vClip;\r\n/**\r\n * 多边形与圆形的碰撞点求解算法\r\n * @param polygon\r\n * @param circle\r\n * @param normal\r\n * @param depth\r\n */\r\nfunction vClipCircle(polygon, circle, normal, depth) {\r\n    let incEdge = findIncidentEdge(polygon.vertexList, normal, null), vertex = circle.position.loc(normal, circle.radius - depth / 2), contacts = [contact_1.ContactConstraint.create(null, vertex, depth)];\r\n    if (arcs_1.Arcs.isContains(circle, incEdge.start)) {\r\n        contacts.push(contact_1.ContactConstraint.create(null, incEdge.start, depth));\r\n    }\r\n    if (arcs_1.Arcs.isContains(circle, incEdge.end)) {\r\n        contacts.push(contact_1.ContactConstraint.create(null, incEdge.end, depth));\r\n    }\r\n    return contacts;\r\n}\r\nexports.vClipCircle = vClipCircle;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL3ZDbGlwLnRzPzhlYjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0Esd0NBQW9FO0FBQ3BFLHlDQUFtRTtBQUluRSxzQ0FBc0M7QUFHdEM7Ozs7O0dBS0c7QUFDSCxTQUFTLGdCQUFnQixDQUFDLGtCQUE4QixFQUFFLE1BQWMsRUFBRSxvQkFBNEI7SUFDbEcsSUFBSSxJQUFZLEVBQUUsR0FBVyxFQUFFLElBQVksRUFDdkMsS0FBYSxDQUFDO0lBRWxCLElBQUcsb0JBQW9CLEtBQUssSUFBSSxFQUFFO1FBQzlCLElBQUksR0FBRyxHQUFXLFFBQVEsRUFDdEIsR0FBVyxDQUFDO1FBRWhCLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDL0MsR0FBRyxHQUFHLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUV4QyxJQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUU7Z0JBQ1YsR0FBRyxHQUFHLEdBQUcsQ0FBQztnQkFDVixvQkFBb0IsR0FBRyxDQUFDLENBQUM7YUFDNUI7U0FDSjtLQUNKO0lBRUQsS0FBSyxHQUFHLG9CQUFvQixDQUFDO0lBRTdCLElBQUksU0FBUyxHQUFHLEtBQUssS0FBSyxDQUFDLEVBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsRUFDakUsU0FBUyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLE1BQU0sRUFDbkQsSUFBSSxHQUFTLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUU3RCxHQUFHLEdBQUcsa0JB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QUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztLQUNoQztJQUVELElBQUcsRUFBRSxJQUFJLENBQUMsRUFBRTtRQUNSLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO0tBQzlCO0lBR0Qsc0VBQXNFO0lBQ3RFLFdBQVcsR0FBRyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzdELElBQUcsV0FBVyxLQUFLLENBQUMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRTtRQUM3QyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxTQUFTLENBQUMsV0FBVyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztLQUN4QztJQUVELFdBQVcsR0FBRyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6RSxJQUFHLFdBQVcsS0FBSyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsV0FBVyxDQUFDLEVBQUU7UUFDN0MsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7S0FDMUM7SUFJRCxJQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNiLFFBQVEsQ0FBQyxJQUFJLENBQUMsMkJBQWlCLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDL0U7SUFFRCxJQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNiLFFBQVEsQ0FBQyxJQUFJLENBQUMsMkJBQWlCLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDL0U7SUFHRCxPQUFPLFFBQVEsQ0FBQztBQUNwQixDQUFDO0FBekRELHNCQXlEQztBQUtEOzs7Ozs7R0FNRztBQUNILFNBQWdCLFdBQVcsQ0FBQyxPQUFnQixFQUFFLE1BQWMsRUFBRSxNQUFjLEVBQUUsS0FBYTtJQUN2RixJQUFJLE9BQU8sR0FBUyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFDbEUsTUFBTSxHQUFXLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsRUFDdkUsUUFBUSxHQUFjLENBQUMsMkJBQWlCLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUUxRSxJQUFHLFdBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUN2QyxRQUFRLENBQUMsSUFBSSxDQUFDLDJCQUFpQixDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQ3ZFO0lBRUQsSUFBRyxXQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7UUFDckMsUUFBUSxDQUFDLElBQUksQ0FBQywyQkFBaUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztLQUNyRTtJQUVELE9BQU8sUUFBUSxDQUFDO0FBQ3BCLENBQUM7QUFkRCxrQ0FjQyIsImZpbGUiOiIyMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVkZ2UsIFZlcnRleExpc3QgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcbmltcG9ydCB7IFZlY3RvciwgX3RlbXBWZWN0b3IxLCBfdGVtcFZlY3RvcjIgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgQ29udGFjdCwgQ29udGFjdENvbnN0cmFpbnQgfSBmcm9tIFwiLi4vY29uc3RyYWludC9jb250YWN0XCI7XHJcbmltcG9ydCB7IE1pbk92ZXJsYXAgfSBmcm9tIFwiLi9uZnNwLXNhdFwiO1xyXG5pbXBvcnQgeyBDaXJjbGUgfSBmcm9tIFwiLi4vYm9keS9jaXJjbGVcIjtcclxuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuLi9ib2R5L3BvbHlnb25cIjtcclxuaW1wb3J0IHsgQXJjcyB9IGZyb20gXCIuLi9jb21tb24vYXJjc1wiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDlr7vmib4gaW5jaWRlbnQgZWRnZVxyXG4gKiBAcGFyYW0gb3Bwb3NpdGVWZXJ0ZXhMaXN0IFxyXG4gKiBAcGFyYW0gbm9ybWFsIFxyXG4gKiBAcGFyYW0gb3Bwb3NpdGVDbG9zZXN0SW5kZXggXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kSW5jaWRlbnRFZGdlKG9wcG9zaXRlVmVydGV4TGlzdDogVmVydGV4TGlzdCwgbm9ybWFsOiBWZWN0b3IsIG9wcG9zaXRlQ2xvc2VzdEluZGV4OiBudW1iZXIpOiBFZGdlIHtcclxuICAgIGxldCBwcmV2OiBWZWN0b3IsIGN1cjogVmVjdG9yLCBuZXh0OiBWZWN0b3IsIFxyXG4gICAgICAgIGluZGV4OiBudW1iZXI7XHJcblxyXG4gICAgaWYob3Bwb3NpdGVDbG9zZXN0SW5kZXggPT09IG51bGwpIHtcclxuICAgICAgICBsZXQgbWluOiBudW1iZXIgPSBJbmZpbml0eSxcclxuICAgICAgICAgICAgZG90OiBudW1iZXI7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvcHBvc2l0ZVZlcnRleExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZG90ID0gb3Bwb3NpdGVWZXJ0ZXhMaXN0W2ldLmRvdChub3JtYWwpO1xyXG5cclxuICAgICAgICAgICAgaWYoZG90IDwgbWluKSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBkb3Q7XHJcbiAgICAgICAgICAgICAgICBvcHBvc2l0ZUNsb3Nlc3RJbmRleCA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5kZXggPSBvcHBvc2l0ZUNsb3Nlc3RJbmRleDtcclxuXHJcbiAgICBsZXQgcHJldkluZGV4ID0gaW5kZXggPT09IDA/IG9wcG9zaXRlVmVydGV4TGlzdC5sZW5ndGggLSAxOiBpbmRleCAtIDEsXHJcbiAgICAgICAgbmV4dEluZGV4ID0gKGluZGV4ICsgMSkgJSBvcHBvc2l0ZVZlcnRleExpc3QubGVuZ3RoLFxyXG4gICAgICAgIGVkZ2U6IEVkZ2UgPSB7IHN0YXJ0OiBudWxsLCBlbmQ6IG51bGwsIGluZGV4OiBbLTEsIC0xXSB9O1xyXG4gICBcclxuICAgIGN1ciA9IG9wcG9zaXRlVmVydGV4TGlzdFtpbmRleF07XHJcbiAgICBwcmV2ID0gb3Bwb3NpdGVWZXJ0ZXhMaXN0W3ByZXZJbmRleF07XHJcbiAgICBuZXh0ID0gb3Bwb3NpdGVWZXJ0ZXhMaXN0W25leHRJbmRleF07XHJcbiAgICBjdXIuc3ViKHByZXYsIF90ZW1wVmVjdG9yMSk7XHJcbiAgICBjdXIuc3ViKG5leHQsIF90ZW1wVmVjdG9yMik7XHJcblxyXG4gICAgbGV0IGQxID0gTWF0aC5hYnMoX3RlbXBWZWN0b3IxLmRvdChub3JtYWwpKSxcclxuICAgICAgICBkMiA9IE1hdGguYWJzKF90ZW1wVmVjdG9yMi5kb3Qobm9ybWFsKSk7XHJcblxyXG4gICAgaWYoZDEgPCBkMikge1xyXG4gICAgICAgIGVkZ2Uuc3RhcnQgPSBwcmV2O1xyXG4gICAgICAgIGVkZ2UuZW5kID0gY3VyO1xyXG4gICAgICAgIGVkZ2UuaW5kZXggPSBbcHJldkluZGV4LCBpbmRleF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBlZGdlLnN0YXJ0ID0gY3VyO1xyXG4gICAgICAgIGVkZ2UuZW5kID0gbmV4dDtcclxuICAgICAgICBlZGdlLmluZGV4ID0gW2luZGV4LCBuZXh0SW5kZXhdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gZWRnZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOetm+mAieS4pOi+uVxyXG4gKiBAcGFyYW0gaW5jRWRnZVxyXG4gKiBAcGFyYW0gcmVmViBcclxuICogQHBhcmFtIGQgXHJcbiAqL1xyXG5mdW5jdGlvbiBjbGlwU2lkZShpbmNFZGdlOiBFZGdlLCByZWZWOiBWZWN0b3IsIGQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBsZXQgZDEgPSBpbmNFZGdlLnN0YXJ0LmRvdChyZWZWKSAtIGQsXHJcbiAgICAgICAgZDIgPSBpbmNFZGdlLmVuZC5kb3QocmVmVikgLSBkO1xyXG5cclxuICAgIGlmKGQxID49IDApIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICBpZihkMiA+PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9XHJcbiAgICAgICAgXHJcbiAgICByZXR1cm4gLTE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVi1DbGlwIOeul+azleWvu+aJvueisOaSnueCuVxyXG4gKiDor6bop4HvvJpodHRwczovL2dpdGh1Yi5jb20vcGhlbm9tTGkvQmxvZy9pc3N1ZXMvNDJcclxuICogQHBhcmFtIHBvbHkxXHJcbiAqIEBwYXJhbSBwb2x5MlxyXG4gKiBAcGFyYW0gbm9ybWFsIFxyXG4gKiBAcGFyYW0gZGVwdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2Q2xpcChtaW5PdmVybGFwOiBNaW5PdmVybGFwKTogQ29udGFjdFtdIHtcclxuICAgIGxldCBheGlzID0gbWluT3ZlcmxhcC5heGlzLFxyXG4gICAgICAgIG5vcm1hbCA9IGF4aXMudmFsdWUsXHJcbiAgICAgICAgaW5jRWRnZTogRWRnZSxcclxuICAgICAgICByZWZFZGdlOiBFZGdlLFxyXG4gICAgICAgIGlkcyA9IFtdLFxyXG4gICAgICAgIGNvbnRhY3RzOiBDb250YWN0W10gPSBbXTtcclxuXHJcbiAgICBpbmNFZGdlID0gZmluZEluY2lkZW50RWRnZSg8VmVydGV4TGlzdD5heGlzLm9wcG9zaXRlLCBub3JtYWwsIG1pbk92ZXJsYXAub3Bwb3NpdGVDbG9zZXN0SW5kZXgpO1xyXG4gICAgcmVmRWRnZSA9IGF4aXMuZWRnZTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIOmmluWFiOWQkSByZWZFZGdlIOeahOWGhemDqOi/m+ihjOetm+mAiSAtLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgbGV0IHJlZlYgPSByZWZFZGdlLmVuZC5zdWIocmVmRWRnZS5zdGFydCkubm9sKCksXHJcbiAgICAgICAgcmVmTiA9IG5vcm1hbCxcclxuICAgICAgICBkID0gcmVmRWRnZS5zdGFydC5kb3QocmVmTiksXHJcbiAgICAgICAgZDEgPSBpbmNFZGdlLnN0YXJ0LmRvdChyZWZOKSAtIGQsXHJcbiAgICAgICAgZDIgPSBpbmNFZGdlLmVuZC5kb3QocmVmTikgLSBkLFxyXG4gICAgICAgIGluY1ZlcnRleDogVmVjdG9yW10gPSBbXSxcclxuICAgICAgICByZW1vdmVJbmRleDogbnVtYmVyID0gLTE7XHJcblxyXG4gICAgaWYoZDEgPD0gMCkge1xyXG4gICAgICAgIGlkc1swXSA9IFtpbmNFZGdlLmluZGV4WzBdLCBpbmNFZGdlLmluZGV4WzBdXTtcclxuICAgICAgICBpbmNWZXJ0ZXhbMF0gPSBpbmNFZGdlLnN0YXJ0O1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGQyIDw9IDApIHtcclxuICAgICAgICBpZHNbMV0gPSBbaW5jRWRnZS5pbmRleFsxXSwgaW5jRWRnZS5pbmRleFsxXV07XHJcbiAgICAgICAgaW5jVmVydGV4WzFdID0gaW5jRWRnZS5lbmQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0g5o6l5LiL5p2l6L+b6KGM5Lik6L65562b6YCJIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHJlbW92ZUluZGV4ID0gY2xpcFNpZGUoaW5jRWRnZSwgcmVmViwgcmVmRWRnZS5lbmQuZG90KHJlZlYpKTtcclxuICAgIGlmKHJlbW92ZUluZGV4ICE9PSAtMSAmJiBpbmNWZXJ0ZXhbcmVtb3ZlSW5kZXhdKSB7XHJcbiAgICAgICAgaWRzW3JlbW92ZUluZGV4XVswXSA9IHJlZkVkZ2UuaW5kZXhbMV07XHJcbiAgICAgICAgaW5jVmVydGV4W3JlbW92ZUluZGV4XSA9IHJlZkVkZ2UuZW5kO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUluZGV4ID0gY2xpcFNpZGUoaW5jRWRnZSwgcmVmVi5pbnYocmVmViksIHJlZkVkZ2Uuc3RhcnQuZG90KHJlZlYpKTtcclxuICAgIGlmKHJlbW92ZUluZGV4ICE9PSAtMSAmJiBpbmNWZXJ0ZXhbcmVtb3ZlSW5kZXhdKSB7XHJcbiAgICAgICAgaWRzW3JlbW92ZUluZGV4XVswXSA9IHJlZkVkZ2UuaW5kZXhbMF07XHJcbiAgICAgICAgaW5jVmVydGV4W3JlbW92ZUluZGV4XSA9IHJlZkVkZ2Uuc3RhcnQ7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBpZihpbmNWZXJ0ZXhbMF0pIHtcclxuICAgICAgICBjb250YWN0cy5wdXNoKENvbnRhY3RDb25zdHJhaW50LmNyZWF0ZShpZHNbMF0sIGluY1ZlcnRleFswXSwgTWF0aC5hYnMoZDEpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoaW5jVmVydGV4WzFdKSB7XHJcbiAgICAgICAgY29udGFjdHMucHVzaChDb250YWN0Q29uc3RyYWludC5jcmVhdGUoaWRzWzFdLCBpbmNWZXJ0ZXhbMV0sIE1hdGguYWJzKGQyKSkpO1xyXG4gICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgIHJldHVybiBjb250YWN0cztcclxufVxyXG5cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIOWkmui+ueW9ouS4juWchuW9oueahOeisOaSnueCueaxguino+eul+azlVxyXG4gKiBAcGFyYW0gcG9seWdvbiBcclxuICogQHBhcmFtIGNpcmNsZSBcclxuICogQHBhcmFtIG5vcm1hbCBcclxuICogQHBhcmFtIGRlcHRoXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdkNsaXBDaXJjbGUocG9seWdvbjogUG9seWdvbiwgY2lyY2xlOiBDaXJjbGUsIG5vcm1hbDogVmVjdG9yLCBkZXB0aDogbnVtYmVyKSB7XHJcbiAgICBsZXQgaW5jRWRnZTogRWRnZSA9IGZpbmRJbmNpZGVudEVkZ2UocG9seWdvbi52ZXJ0ZXhMaXN0LCBub3JtYWwsIG51bGwpLFxyXG4gICAgICAgIHZlcnRleDogVmVjdG9yID0gY2lyY2xlLnBvc2l0aW9uLmxvYyhub3JtYWwsIGNpcmNsZS5yYWRpdXMgLSBkZXB0aCAvIDIpLFxyXG4gICAgICAgIGNvbnRhY3RzOiBDb250YWN0W10gPSBbQ29udGFjdENvbnN0cmFpbnQuY3JlYXRlKG51bGwsIHZlcnRleCwgZGVwdGgpXTtcclxuXHJcbiAgICBpZihBcmNzLmlzQ29udGFpbnMoY2lyY2xlLCBpbmNFZGdlLnN0YXJ0KSkge1xyXG4gICAgICAgIGNvbnRhY3RzLnB1c2goQ29udGFjdENvbnN0cmFpbnQuY3JlYXRlKG51bGwsIGluY0VkZ2Uuc3RhcnQsIGRlcHRoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoQXJjcy5pc0NvbnRhaW5zKGNpcmNsZSwgaW5jRWRnZS5lbmQpKSB7XHJcbiAgICAgICAgY29udGFjdHMucHVzaChDb250YWN0Q29uc3RyYWludC5jcmVhdGUobnVsbCwgaW5jRWRnZS5lbmQsIGRlcHRoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnRhY3RzO1xyXG59XHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Sleeping = void 0;\r\nconst util_1 = __webpack_require__(1);\r\n/**\r\n * 休眠管理器\r\n */\r\nclass Sleeping {\r\n    constructor(opt) {\r\n        this.sleepDelayThreshold = 60;\r\n        this.sleepMotionThreshold = 0.0006;\r\n        this.wakeMotionThreshold = 0.7;\r\n        util_1.Util.merge(this, opt);\r\n    }\r\n    /**\r\n     * 使刚体睡眠\r\n     * @param body\r\n     */\r\n    sleep(body) {\r\n        if (body.kinetic || body.jointed)\r\n            return;\r\n        body.sleeping = true;\r\n        body.sleepCounter = this.sleepDelayThreshold;\r\n        body.velocity.x = 0;\r\n        body.velocity.y = 0;\r\n        body.angularVelocity = 0;\r\n        body.motion = 0;\r\n        body.sleepStart();\r\n        if (body.parts[0] !== body) {\r\n            for (let i = 0; i < body.parts.length; i++) {\r\n                this.sleep(body.parts[i]);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 唤醒刚体\r\n     * @param body\r\n     */\r\n    wake(body) {\r\n        if (body.static)\r\n            return;\r\n        body.sleeping = false;\r\n        body.sleepCounter = 0;\r\n        body.sleepEnd();\r\n        if (body.parts[0] !== body) {\r\n            for (let i = 0; i < body.parts.length; i++) {\r\n                this.wake(body.parts[i]);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 改变刚体的状态，使其唤醒或休眠\r\n     * @param bodies\r\n     */\r\n    update(bodies) {\r\n        let body, i;\r\n        for (i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            let motion = body.motion;\r\n            // 若刚体合外力不为0，则唤醒\r\n            if (body.force.x !== 0 || body.force.y !== 0) {\r\n                this.wake(body);\r\n                continue;\r\n            }\r\n            // 若刚体已经休眠，则返回\r\n            if (body.sleeping)\r\n                continue;\r\n            // 若刚体动量 < 休眠阈值，则刚体休眠计算 + 1\r\n            if (motion < this.sleepMotionThreshold) {\r\n                body.sleepCounter += 1;\r\n                // 若刚体休眠计数器达到休眠阈值，则进行休眠\r\n                if (body.sleepCounter >= this.sleepDelayThreshold) {\r\n                    this.sleep(body);\r\n                }\r\n            }\r\n            else {\r\n                if (body.sleepCounter > 0) {\r\n                    body.sleepCounter -= 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 刚体碰撞后，判断是否需要唤醒\r\n     * @param manifolds\r\n     */\r\n    afterCollision(manifolds) {\r\n        let manifold, bodyA, bodyB;\r\n        // wake up bodies involved in collisions\r\n        for (var i = 0; i < manifolds.length; i++) {\r\n            manifold = manifolds[i];\r\n            bodyA = manifold.bodyA;\r\n            bodyB = manifold.bodyB;\r\n            // 若A为休眠状态且B的动量大于休眠阈值，唤醒A\r\n            if (bodyB.kinetic || bodyA.sleeping && bodyB.motion > this.wakeMotionThreshold) {\r\n                this.wake(bodyA);\r\n                continue;\r\n            }\r\n            // B同理上面\r\n            if (bodyA.kinetic || bodyB.sleeping && bodyA.motion > this.wakeMotionThreshold) {\r\n                this.wake(bodyB);\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.Sleeping = Sleeping;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9zbGVlcGluZy50cz9kNWNkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLHNDQUFzQztBQUl0Qzs7R0FFRztBQUVILE1BQWEsUUFBUTtJQVdqQixZQUFZLEdBQWM7UUFDdEIsSUFBSSxDQUFDLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsb0JBQW9CLEdBQUcsTUFBTSxDQUFDO1FBQ25DLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxHQUFHLENBQUM7UUFFL0IsV0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7T0FHRztJQUNILEtBQUssQ0FBQyxJQUFVO1FBQ1osSUFBRyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxPQUFPO1lBQUUsT0FBTztRQUV4QyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztRQUU3QyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRWhCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUVsQixJQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3ZCLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENB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Q0wsQ0FBQztDQUNKO0FBaElELDRCQWdJQyIsImZpbGUiOiIyMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvZHkgfSBmcm9tIFwiLi4vYm9keS9ib2R5XCI7XHJcbmltcG9ydCB7IEVuZ2luZU9wdCB9IGZyb20gXCIuL2VuZ2luZVwiO1xyXG5pbXBvcnQgeyBVdGlsIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsXCI7XHJcbmltcG9ydCB7IE1hbmlmb2xkIH0gZnJvbSBcIi4uL2NvbGxpc2lvbi9tYW5pZm9sZFwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDkvJHnnKDnrqHnkIblmahcclxuICovXHJcblxyXG5leHBvcnQgY2xhc3MgU2xlZXBpbmcge1xyXG5cclxuICAgIC8vIOWIpOWumuS8keecoOeahOaXtumXtOmYiOWAvFxyXG4gICAgc2xlZXBEZWxheVRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5Yik5a6a5LyR55yg5Yqo6YeP6ZiI5YC8XHJcbiAgICBzbGVlcE1vdGlvblRocmVzaG9sZDogbnVtYmVyO1xyXG4gICAgLy8g5Yik5a6a5ZSk6YaS5Yqo6YeP6ZiI5YC8XHJcbiAgICB3YWtlTW90aW9uVGhyZXNob2xkOiBudW1iZXI7XHJcbiAgICAvLyDlgY/lt67ns7vmlbBcclxuICAgIG1pbkJpYXM6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHQ6IEVuZ2luZU9wdCkge1xyXG4gICAgICAgIHRoaXMuc2xlZXBEZWxheVRocmVzaG9sZCA9IDYwO1xyXG4gICAgICAgIHRoaXMuc2xlZXBNb3Rpb25UaHJlc2hvbGQgPSAwLjAwMDY7XHJcbiAgICAgICAgdGhpcy53YWtlTW90aW9uVGhyZXNob2xkID0gMC43O1xyXG5cclxuICAgICAgICBVdGlsLm1lcmdlKHRoaXMsIG9wdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkvb/liJrkvZPnnaHnnKBcclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICovXHJcbiAgICBzbGVlcChib2R5OiBCb2R5KSB7XHJcbiAgICAgICAgaWYoYm9keS5raW5ldGljIHx8IGJvZHkuam9pbnRlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBib2R5LnNsZWVwaW5nID0gdHJ1ZTtcclxuICAgICAgICBib2R5LnNsZWVwQ291bnRlciA9IHRoaXMuc2xlZXBEZWxheVRocmVzaG9sZDtcclxuXHJcbiAgICAgICAgYm9keS52ZWxvY2l0eS54ID0gMDtcclxuICAgICAgICBib2R5LnZlbG9jaXR5LnkgPSAwO1xyXG4gICAgICAgIGJvZHkuYW5ndWxhclZlbG9jaXR5ID0gMDtcclxuICAgICAgICBib2R5Lm1vdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIGJvZHkuc2xlZXBTdGFydCgpO1xyXG5cclxuICAgICAgICBpZihib2R5LnBhcnRzWzBdICE9PSBib2R5KSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBib2R5LnBhcnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNsZWVwKGJvZHkucGFydHNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5ZSk6YaS5Yia5L2TXHJcbiAgICAgKiBAcGFyYW0gYm9keSBcclxuICAgICAqL1xyXG4gICAgd2FrZShib2R5OiBCb2R5KSB7XHJcbiAgICAgICAgaWYoYm9keS5zdGF0aWMpIHJldHVybjtcclxuXHJcbiAgICAgICAgYm9keS5zbGVlcGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGJvZHkuc2xlZXBDb3VudGVyID0gMDtcclxuXHJcbiAgICAgICAgYm9keS5zbGVlcEVuZCgpO1xyXG5cclxuICAgICAgICBpZihib2R5LnBhcnRzWzBdICE9PSBib2R5KSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBib2R5LnBhcnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndha2UoYm9keS5wYXJ0c1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmlLnlj5jliJrkvZPnmoTnirbmgIHvvIzkvb/lhbbllKTphpLmiJbkvJHnnKBcclxuICAgICAqIEBwYXJhbSBib2RpZXNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlKGJvZGllczogQm9keVtdKSB7XHJcbiAgICAgICAgbGV0IGJvZHk6IEJvZHksXHJcbiAgICAgICAgICAgIGk7XHJcblxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBib2R5ID0gYm9kaWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgbGV0IG1vdGlvbiA9IGJvZHkubW90aW9uO1xyXG5cclxuICAgICAgICAgICAgLy8g6Iul5Yia5L2T5ZCI5aSW5Yqb5LiN5Li6MO+8jOWImeWUpOmGklxyXG4gICAgICAgICAgICBpZiAoYm9keS5mb3JjZS54ICE9PSAwIHx8IGJvZHkuZm9yY2UueSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWtlKGJvZHkpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOiLpeWImuS9k+W3sue7j+S8keecoO+8jOWImei/lOWbnlxyXG4gICAgICAgICAgICBpZihib2R5LnNsZWVwaW5nKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIOiLpeWImuS9k+WKqOmHjyA8IOS8keecoOmYiOWAvO+8jOWImeWImuS9k+S8keecoOiuoeeulyArIDFcclxuICAgICAgICAgICAgaWYgKG1vdGlvbiA8IHRoaXMuc2xlZXBNb3Rpb25UaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgIGJvZHkuc2xlZXBDb3VudGVyICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6Iul5Yia5L2T5LyR55yg6K6h5pWw5Zmo6L6+5Yiw5LyR55yg6ZiI5YC877yM5YiZ6L+b6KGM5LyR55ygXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zbGVlcENvdW50ZXIgPj0gdGhpcy5zbGVlcERlbGF5VGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGVlcChib2R5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zbGVlcENvdW50ZXIgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keS5zbGVlcENvdW50ZXIgLT0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWImuS9k+eisOaSnuWQju+8jOWIpOaWreaYr+WQpumcgOimgeWUpOmGklxyXG4gICAgICogQHBhcmFtIG1hbmlmb2xkc1xyXG4gICAgICovXHJcbiAgICBhZnRlckNvbGxpc2lvbihtYW5pZm9sZHM6IE1hbmlmb2xkW10pIHtcclxuICAgICAgICBsZXQgbWFuaWZvbGQ6IE1hbmlmb2xkLFxyXG4gICAgICAgICAgICBib2R5QTogQm9keSwgYm9keUI6IEJvZHk7XHJcblxyXG4gICAgICAgIC8vIHdha2UgdXAgYm9kaWVzIGludm9sdmVkIGluIGNvbGxpc2lvbnNcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hbmlmb2xkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtYW5pZm9sZCA9IG1hbmlmb2xkc1tpXTtcclxuICAgICAgICAgICAgYm9keUEgPSBtYW5pZm9sZC5ib2R5QTtcclxuICAgICAgICAgICAgYm9keUIgPSBtYW5pZm9sZC5ib2R5QjtcclxuXHJcbiAgICAgICAgICAgIC8vIOiLpUHkuLrkvJHnnKDnirbmgIHkuJRC55qE5Yqo6YeP5aSn5LqO5LyR55yg6ZiI5YC877yM5ZSk6YaSQVxyXG4gICAgICAgICAgICBpZihib2R5Qi5raW5ldGljIHx8IGJvZHlBLnNsZWVwaW5nICYmIGJvZHlCLm1vdGlvbiA+IHRoaXMud2FrZU1vdGlvblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWtlKGJvZHlBKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBC5ZCM55CG5LiK6Z2iXHJcbiAgICAgICAgICAgIGlmKGJvZHlBLmtpbmV0aWMgfHwgYm9keUIuc2xlZXBpbmcgJiYgYm9keUEubW90aW9uID4gdGhpcy53YWtlTW90aW9uVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndha2UoYm9keUIpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///22\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.ManifoldTable = void 0;\r\nconst manifold_1 = __webpack_require__(10);\r\nconst util_1 = __webpack_require__(1);\r\nclass ManifoldTable {\r\n    constructor(opt) {\r\n        this.enableCache = false;\r\n        this.manifoldRemoveThreshold = 1000;\r\n        this.table = {};\r\n        this.list = [];\r\n        this.collisionStart = [];\r\n        this.collisionEnd = [];\r\n        this.collisionActive = [];\r\n        util_1.Util.merge(this, opt);\r\n    }\r\n    /**\r\n     * 更新所有流形\r\n     * @param collisions\r\n     * @param timeStamp\r\n     */\r\n    update(collisions, timeStamp) {\r\n        let manifold, id, collision, i;\r\n        this.collisionStart.length = 0;\r\n        this.collisionEnd.length = 0;\r\n        this.collisionActive.length = 0;\r\n        // 清空确认激活状态\r\n        for (i = 0; i < this.list.length; i++) {\r\n            this.list[i].confirmedActive = false;\r\n        }\r\n        for (i = 0; i < collisions.length; i++) {\r\n            collision = collisions[i];\r\n            // 只有真实发生碰撞的碰撞对才会更新对应的流形\r\n            if (collision.collide) {\r\n                id = util_1.Util.compositeId(collision.partA.id, collision.partB.id);\r\n                manifold = this.table[id];\r\n                // 若对应流形存在\r\n                if (manifold) {\r\n                    // 若流形上一刻已经被激活\r\n                    if (manifold.isActive) {\r\n                        this.collisionActive.push(manifold);\r\n                    }\r\n                    // 否则表明该流形第一次发生碰撞\r\n                    else {\r\n                        this.collisionStart.push(manifold);\r\n                    }\r\n                    manifold.update(collision, timeStamp);\r\n                    manifold.confirmedActive = true;\r\n                }\r\n                // 若不存在，则创建对应流形\r\n                else {\r\n                    manifold = new manifold_1.Manifold(collision, timeStamp);\r\n                    this.table[id] = manifold;\r\n                    this.list.push(manifold);\r\n                    this.collisionStart.push(manifold);\r\n                }\r\n                collision.bodyA.onCollide(collision.bodyB);\r\n                collision.bodyB.onCollide(collision.bodyA);\r\n            }\r\n        }\r\n        // 遍历查找上一次发生碰撞且当前没有发生碰撞的流形\r\n        for (i = 0; i < this.list.length; i++) {\r\n            manifold = this.list[i];\r\n            collision = manifold.collision;\r\n            // 将其激活状态取消\r\n            if (manifold.isActive && !manifold.confirmedActive) {\r\n                manifold.toggleActive(false, timeStamp);\r\n                // 标记为碰撞结束\r\n                this.collisionEnd.push(manifold);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 过滤超时的碰撞流形\r\n     * @param timeStamp\r\n     */\r\n    filter(timeStamp) {\r\n        let manifold, collision, i;\r\n        for (i = 0; i < this.list.length; i++) {\r\n            manifold = this.list[i];\r\n            collision = manifold.collision;\r\n            // 若流形的两刚体有其一处于休眠状态，更新时间，不清除\r\n            if (manifold.bodyA.sleeping || manifold.bodyB.sleeping) {\r\n                manifold.timeUpdated = timeStamp;\r\n                continue;\r\n            }\r\n            // 若流形上次更新的时间离现在已经大于设定阈值，则需要清除\r\n            if (timeStamp - manifold.timeUpdated > this.manifoldRemoveThreshold) {\r\n                let bodyA = collision.bodyA, bodyB = collision.bodyB;\r\n                delete bodyA.contactBodies[bodyB.stringId];\r\n                delete bodyB.contactBodies[bodyA.stringId];\r\n                delete this.table[manifold.id];\r\n                this.list.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 清空流形表和队列\r\n     */\r\n    clear() {\r\n        this.table = {};\r\n        this.list.length = 0;\r\n        this.collisionStart.length = 0;\r\n        this.collisionEnd.length = 0;\r\n        this.collisionActive.length = 0;\r\n    }\r\n}\r\nexports.ManifoldTable = ManifoldTable;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29sbGlzaW9uL21hbmlmb2xkVGFibGUudHM/MzVjOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSwyQ0FBaUQ7QUFDakQsc0NBQXNDO0FBTXRDLE1BQWEsYUFBYTtJQWdCdEIsWUFBWSxHQUFjO1FBQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUM7UUFDcEMsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDZixJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUUxQixXQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILE1BQU0sQ0FBQyxVQUF1QixFQUFFLFNBQWlCO1FBQzdDLElBQUksUUFBa0IsRUFDbEIsRUFBVSxFQUNWLFNBQW9CLEVBQ3BCLENBQUMsQ0FBQztRQUVOLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBRWhDLFdBQVc7UUFDWCxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ25DLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztTQUN4QztRQUVELEtBQUksQ0FBQyxHQUFHLENBQUMs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QUFDLHVCQUF1QixFQUFFO2dCQUNoRSxJQUFJLEtBQUssR0FBUyxTQUFTLENBQUMsS0FBSyxFQUM3QixLQUFLLEdBQVMsU0FBUyxDQUFDLEtBQUssQ0FBQztnQkFFbEMsT0FBTyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDM0MsT0FBTyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDM0MsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFFL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixDQUFDLEVBQUUsQ0FBQzthQUNQO1NBQ0o7SUFDTCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLO1FBQ0QsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7Q0FDSjtBQTlJRCxzQ0E4SUMiLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbmdpbmVPcHQgfSBmcm9tIFwiLi4vY29yZS9lbmdpbmVcIjtcclxuaW1wb3J0IHsgTWFuaWZvbGQsIENvbGxpc2lvbiB9IGZyb20gXCIuL21hbmlmb2xkXCI7XHJcbmltcG9ydCB7IFV0aWwgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWxcIjtcclxuaW1wb3J0IHsgQm9keSB9IGZyb20gXCIuLi9ib2R5L2JvZHlcIjtcclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBNYW5pZm9sZFRhYmxlIHtcclxuICAgIC8vIOaYr+WQpuW8gOWQr+e8k+WtmFxyXG4gICAgZW5hYmxlQ2FjaGU6IGJvb2xlYW47XHJcbiAgICAvLyDnvJPlrZjnp7vpmaTml7bpl7TpmIjlgLxcclxuICAgIG1hbmlmb2xkUmVtb3ZlVGhyZXNob2xkOiBudW1iZXI7XHJcbiAgICAvLyDmtYHlvaLooahcclxuICAgIHRhYmxlOiB7W2tleTogc3RyaW5nXTogTWFuaWZvbGR9O1xyXG4gICAgLy8g5rWB5b2i6Zif5YiXXHJcbiAgICBsaXN0OiBNYW5pZm9sZFtdO1xyXG4gICAgLy8g5byA5aeL56Kw5pKe55qE56Kw5pKe5a+5XHJcbiAgICBjb2xsaXNpb25TdGFydDogTWFuaWZvbGRbXTtcclxuICAgIC8vIOa/gOa0u+eisOaSnueahOeisOaSnuWvuVxyXG4gICAgY29sbGlzaW9uQWN0aXZlOiBNYW5pZm9sZFtdO1xyXG4gICAgLy8g57uT5p2f56Kw5pKe55qE56Kw5pKe5a+5XHJcbiAgICBjb2xsaXNpb25FbmQ6IE1hbmlmb2xkW107XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBFbmdpbmVPcHQpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZUNhY2hlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tYW5pZm9sZFJlbW92ZVRocmVzaG9sZCA9IDEwMDA7XHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHt9O1xyXG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQgPSBbXTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbkVuZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uQWN0aXZlID0gW107XHJcblxyXG4gICAgICAgIFV0aWwubWVyZ2UodGhpcywgb3B0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOabtOaWsOaJgOaciea1geW9olxyXG4gICAgICogQHBhcmFtIGNvbGxpc2lvbnMgXHJcbiAgICAgKiBAcGFyYW0gdGltZVN0YW1wIFxyXG4gICAgICovXHJcbiAgICB1cGRhdGUoY29sbGlzaW9uczogQ29sbGlzaW9uW10sIHRpbWVTdGFtcDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IG1hbmlmb2xkOiBNYW5pZm9sZCxcclxuICAgICAgICAgICAgaWQ6IHN0cmluZyxcclxuICAgICAgICAgICAgY29sbGlzaW9uOiBDb2xsaXNpb24sXHJcbiAgICAgICAgICAgIGk7XHJcblxyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbkVuZC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uQWN0aXZlLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIC8vIOa4heepuuehruiupOa/gOa0u+eKtuaAgVxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0W2ldLmNvbmZpcm1lZEFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgY29sbGlzaW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb2xsaXNpb24gPSBjb2xsaXNpb25zW2ldO1xyXG5cclxuICAgICAgICAgICAgLy8g5Y+q5pyJ55yf5a6e5Y+R55Sf56Kw5pKe55qE56Kw5pKe5a+55omN5Lya5pu05paw5a+55bqU55qE5rWB5b2iXHJcbiAgICAgICAgICAgIGlmKGNvbGxpc2lvbi5jb2xsaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9IFV0aWwuY29tcG9zaXRlSWQoY29sbGlzaW9uLnBhcnRBLmlkLCBjb2xsaXNpb24ucGFydEIuaWQpO1xyXG4gICAgICAgICAgICAgICAgbWFuaWZvbGQgPSB0aGlzLnRhYmxlW2lkXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoi6Xlr7nlupTmtYHlvaLlrZjlnKhcclxuICAgICAgICAgICAgICAgIGlmKG1hbmlmb2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6Iul5rWB5b2i5LiK5LiA5Yi75bey57uP6KKr5r+A5rS7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobWFuaWZvbGQuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25BY3RpdmUucHVzaChtYW5pZm9sZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWQpuWImeihqOaYjuivpea1geW9ouesrOS4gOasoeWPkeeUn+eisOaSnlxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvblN0YXJ0LnB1c2gobWFuaWZvbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWFuaWZvbGQudXBkYXRlKGNvbGxpc2lvbiwgdGltZVN0YW1wKTtcclxuICAgICAgICAgICAgICAgICAgICBtYW5pZm9sZC5jb25maXJtZWRBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6Iul5LiN5a2Y5Zyo77yM5YiZ5Yib5bu65a+55bqU5rWB5b2iXHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYW5pZm9sZCA9IG5ldyBNYW5pZm9sZChjb2xsaXNpb24sIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZVtpZF0gPSBtYW5pZm9sZDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QucHVzaChtYW5pZm9sZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uU3RhcnQucHVzaChtYW5pZm9sZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uLmJvZHlBLm9uQ29sbGlkZShjb2xsaXNpb24uYm9keUIpO1xyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uLmJvZHlCLm9uQ29sbGlkZShjb2xsaXNpb24uYm9keUEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDpgY3ljobmn6Xmib7kuIrkuIDmrKHlj5HnlJ/norDmkp7kuJTlvZPliY3msqHmnInlj5HnlJ/norDmkp7nmoTmtYHlvaJcclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbWFuaWZvbGQgPSB0aGlzLmxpc3RbaV07XHJcbiAgICAgICAgICAgIGNvbGxpc2lvbiA9IG1hbmlmb2xkLmNvbGxpc2lvbjtcclxuXHJcbiAgICAgICAgICAgIC8vIOWwhuWFtua/gOa0u+eKtuaAgeWPlua2iFxyXG4gICAgICAgICAgICBpZihtYW5pZm9sZC5pc0FjdGl2ZSAmJiAhbWFuaWZvbGQuY29uZmlybWVkQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBtYW5pZm9sZC50b2dnbGVBY3RpdmUoZmFsc2UsIHRpbWVTdGFtcCk7XHJcbiAgICAgICAgICAgICAgICAvLyDmoIforrDkuLrnorDmkp7nu5PmnZ9cclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uRW5kLnB1c2gobWFuaWZvbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6L+H5ruk6LaF5pe255qE56Kw5pKe5rWB5b2iXHJcbiAgICAgKiBAcGFyYW0gdGltZVN0YW1wIFxyXG4gICAgICovXHJcbiAgICBmaWx0ZXIodGltZVN0YW1wOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbWFuaWZvbGQ6IE1hbmlmb2xkLFxyXG4gICAgICAgICAgICBjb2xsaXNpb246IENvbGxpc2lvbixcclxuICAgICAgICAgICAgaTtcclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1hbmlmb2xkID0gdGhpcy5saXN0W2ldO1xyXG4gICAgICAgICAgICBjb2xsaXNpb24gPSBtYW5pZm9sZC5jb2xsaXNpb247XHJcblxyXG4gICAgICAgICAgICAvLyDoi6XmtYHlvaLnmoTkuKTliJrkvZPmnInlhbbkuIDlpITkuo7kvJHnnKDnirbmgIHvvIzmm7TmlrDml7bpl7TvvIzkuI3muIXpmaRcclxuICAgICAgICAgICAgaWYobWFuaWZvbGQuYm9keUEuc2xlZXBpbmcgfHwgbWFuaWZvbGQuYm9keUIuc2xlZXBpbmcpIHtcclxuICAgICAgICAgICAgICAgIG1hbmlmb2xkLnRpbWVVcGRhdGVkID0gdGltZVN0YW1wO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOiLpea1geW9ouS4iuasoeabtOaWsOeahOaXtumXtOemu+eOsOWcqOW3sue7j+Wkp+S6juiuvuWumumYiOWAvO+8jOWImemcgOimgea4hemZpFxyXG4gICAgICAgICAgICBpZih0aW1lU3RhbXAgLSBtYW5pZm9sZC50aW1lVXBkYXRlZCA+IHRoaXMubWFuaWZvbGRSZW1vdmVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBib2R5QTogQm9keSA9IGNvbGxpc2lvbi5ib2R5QSxcclxuICAgICAgICAgICAgICAgICAgICBib2R5QjogQm9keSA9IGNvbGxpc2lvbi5ib2R5QjtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgYm9keUEuY29udGFjdEJvZGllc1tib2R5Qi5zdHJpbmdJZF07XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgYm9keUIuY29udGFjdEJvZGllc1tib2R5QS5zdHJpbmdJZF07XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50YWJsZVttYW5pZm9sZC5pZF07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0LnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa4heepuua1geW9ouihqOWSjOmYn+WIl1xyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnRhYmxlID0ge307XHJcbiAgICAgICAgdGhpcy5saXN0Lmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TdGFydC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uRW5kLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25BY3RpdmUubGVuZ3RoID0gMDtcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///23\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\n/**\r\n * 矩形刚体\r\n */\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Rect = void 0;\r\nconst polygon_1 = __webpack_require__(13);\r\nconst vector_1 = __webpack_require__(0);\r\nclass Rect extends polygon_1.Polygon {\r\n    constructor(opt) {\r\n        super(opt);\r\n    }\r\n    getVertexList() {\r\n        let leftTop = this.origin.col(), rightTop = leftTop.add(new vector_1.Vector(this.width, 0)), rightBottom = leftTop.add(new vector_1.Vector(this.width, this.height)), leftBottom = leftTop.add(new vector_1.Vector(0, this.height));\r\n        return [leftTop, rightTop, rightBottom, leftBottom];\r\n    }\r\n    getArea() {\r\n        return this.width * this.height;\r\n    }\r\n    getCentroid() {\r\n        return this.origin.add(new vector_1.Vector(this.width / 2, this.height / 2));\r\n    }\r\n    getInertia() {\r\n        return this.mass * (this.width * this.width + this.height * this.height) / 12;\r\n    }\r\n}\r\nexports.Rect = Rect;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9yZWN0LnRzPzJkYWIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFFSCwwQ0FBZ0Q7QUFDaEQsd0NBQXdDO0FBV3hDLE1BQWEsSUFBSyxTQUFRLGlCQUFPO0lBTTdCLFlBQVksR0FBWTtRQUNwQixLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDZixDQUFDO0lBRUQsYUFBYTtRQUNULElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEVBQzNCLFFBQVEsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDakQsV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxlQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFDOUQsVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxlQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBRXpELE9BQU8sQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3BDLENBQUM7SUFFRCxXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLGVBQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUVELFVBQVU7UUFDTixPQUFPLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2xGLENBQUM7Q0FDSjtBQTlCRCxvQkE4QkMiLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog55+p5b2i5Yia5L2TXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUG9seWdvbiwgUG9seWdvbk9wdCB9IGZyb20gXCIuL3BvbHlnb25cIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IFZlcnRleExpc3QgfSBmcm9tIFwiLi4vY29tbW9uL3ZlcnRpY2VzXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVjdE9wdCBleHRlbmRzIFBvbHlnb25PcHQge1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFJlY3QgZXh0ZW5kcyBQb2x5Z29uIHtcclxuICAgIC8vIOWuvVxyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIC8vIOmrmFxyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0OiBSZWN0T3B0KSB7XHJcbiAgICAgICAgc3VwZXIob3B0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWZXJ0ZXhMaXN0KCk6IFZlcnRleExpc3Qge1xyXG4gICAgICAgIGxldCBsZWZ0VG9wID0gdGhpcy5vcmlnaW4uY29sKCksXHJcbiAgICAgICAgICAgIHJpZ2h0VG9wID0gbGVmdFRvcC5hZGQobmV3IFZlY3Rvcih0aGlzLndpZHRoLCAwKSksXHJcbiAgICAgICAgICAgIHJpZ2h0Qm90dG9tID0gbGVmdFRvcC5hZGQobmV3IFZlY3Rvcih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCkpLFxyXG4gICAgICAgICAgICBsZWZ0Qm90dG9tID0gbGVmdFRvcC5hZGQobmV3IFZlY3RvcigwLCB0aGlzLmhlaWdodCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gW2xlZnRUb3AsIHJpZ2h0VG9wLCByaWdodEJvdHRvbSwgbGVmdEJvdHRvbV07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXJlYSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2VudHJvaWQoKTogVmVjdG9yIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW4uYWRkKG5ldyBWZWN0b3IodGhpcy53aWR0aCAvIDIsIHRoaXMuaGVpZ2h0IC8gMikpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluZXJ0aWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXNzICogKHRoaXMud2lkdGggKiB0aGlzLndpZHRoICsgdGhpcy5oZWlnaHQgKiB0aGlzLmhlaWdodCkgLyAxMjtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///24\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Composite = void 0;\r\nconst bound_1 = __webpack_require__(5);\r\nconst Compose_1 = __webpack_require__(26);\r\nconst body_1 = __webpack_require__(2);\r\nclass Composite extends body_1.Body {\r\n    constructor(opt) {\r\n        super(opt, body_1.bodyType.composite);\r\n    }\r\n    // -------------------------- 内部方法 ------------------------\r\n    beforeInitializeProperties(opt) {\r\n        this.parts.length = 0;\r\n        for (let i = 0; i < opt.bodies.length; i++) {\r\n            this.parts.push(...opt.bodies[i].parts);\r\n        }\r\n        if (this.useParentProps === undefined) {\r\n            this.useParentProps = false;\r\n        }\r\n        if (!this.useParentProps) {\r\n            this.mass = Compose_1.Compose.getMass(this.parts);\r\n        }\r\n    }\r\n    afterInitializeProperties(opt) {\r\n        if (this.useParentProps) {\r\n            this.density = this.mass / this.area;\r\n            for (let i = 0; i < this.parts.length; i++) {\r\n                this.parts[i].mass = this.parts[i].area * this.density;\r\n                this.parts[i].friction = this.friction;\r\n                this.parts[i].restitution = this.restitution;\r\n            }\r\n            this.position = this.getCentroid();\r\n            for (let i = 0; i < this.parts.length; i++) {\r\n                this.parts[i].inertia = this.parts[i].getInertia(this.position);\r\n            }\r\n            this.inertia = this.getInertia();\r\n            this.invInertia = this.getInvInertia();\r\n        }\r\n        for (let i = 0; i < this.parts.length; i++) {\r\n            this.parts[i].rotateCenter = this.position;\r\n            this.parts[i].parent = this;\r\n            this.parts[i].static = this.static;\r\n            this.parts[i].kinetic = this.kinetic;\r\n            this.parts[i].mask = this.mask;\r\n        }\r\n    }\r\n    getArea() {\r\n        return Compose_1.Compose.getArea(this.parts);\r\n    }\r\n    getCentroid() {\r\n        return Compose_1.Compose.getCentroid(this.parts, this.mass);\r\n    }\r\n    getInertia() {\r\n        return Compose_1.Compose.getInertia(this.parts);\r\n    }\r\n    getBound() {\r\n        let firstChildBound = this.parts[0].bound, bound = new bound_1.Bound(firstChildBound.min, firstChildBound.max);\r\n        for (let i = 0; i < this.parts.length; i++) {\r\n            bound = this.parts[i].bound.union(bound);\r\n        }\r\n        return bound;\r\n    }\r\n    translate(dx, dy) {\r\n        let part;\r\n        for (let i = 0; i < this.parts.length; i++) {\r\n            part = this.parts[i];\r\n            part.position.x += dx;\r\n            part.position.y += dy;\r\n            part.translate(dx, dy);\r\n        }\r\n        this.bound.translate(dx, dy);\r\n    }\r\n    rotate(radian) {\r\n        let part;\r\n        for (let i = 0; i < this.parts.length; i++) {\r\n            part = this.parts[i];\r\n            part.rotation += radian;\r\n            part.position = part.position.rot(radian, this.position, part.position);\r\n            part.rotate(radian);\r\n        }\r\n        this.bound.updateByBounds(this.parts);\r\n    }\r\n    isContains(x, y) {\r\n        for (let i = 0; i < this.parts.length; i++) {\r\n            if (this.parts[i].isContains(x, y))\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.Composite = Composite;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9keS9jb21wb3NpdGUudHM/M2NiZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx1Q0FBd0M7QUFDeEMsMENBQTRDO0FBRzVDLHNDQUFpRDtBQWVqRCxNQUFhLFNBQVUsU0FBUSxXQUFJO0lBRy9CLFlBQVksR0FBaUI7UUFDekIsS0FBSyxDQUFDLEdBQUcsRUFBRSxlQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVELDJEQUEyRDtJQUUzRCwwQkFBMEIsQ0FBQyxHQUFpQjtRQUN4QyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFFdEIsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMzQztRQUVELElBQUcsSUFBSSxDQUFDLGNBQWMsS0FBSyxTQUFTLEVBQUU7WUFDbEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7U0FDL0I7UUFFRCxJQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLGlCQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMzQztJQUNMLENBQUM7SUFFRCx5QkFBeUIsQ0FBQyxHQUFpQjtRQUN2QyxJQUFHLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFFckMsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUN2RCxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hEO1lBRUQsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFFbkMsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDbkU7WUFFRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNqQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUMxQztRQUVELEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN2QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQzNDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUM1QixJQUFJLENB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RSxFQUFFO1lBQ3ZDLElBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFBRSxPQUFPLElBQUksQ0FBQztTQUNsRDtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7Q0FDSjtBQWhIRCw4QkFnSEMiLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3VuZCB9IGZyb20gXCIuLi9jb21tb24vYm91bmRcIjtcclxuaW1wb3J0IHsgQ29tcG9zZSB9IGZyb20gXCIuLi9jb21tb24vQ29tcG9zZVwiO1xyXG5pbXBvcnQgeyBWZXJ0aWNlcyB9IGZyb20gXCIuLi9jb21tb24vdmVydGljZXNcIjtcclxuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL21hdGgvdmVjdG9yXCI7XHJcbmltcG9ydCB7IEJvZHksIEJvZHlPcHQsIGJvZHlUeXBlIH0gZnJvbSBcIi4vYm9keVwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDlpI3lkIjliJrkvZNcclxuICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvc2l0ZU9wdCBleHRlbmRzIEJvZHlPcHQge1xyXG4gICAgYm9kaWVzPzogQm9keVtdO1xyXG4gICAgLy8g5piv5ZCm5rK/55So54i25Zu+5b2i55qE5bGe5oCn77yI6LSo6YeP77yM5pGp5pOm5Yqb77yM5oGi5aSN57O75pWw562J77yJXHJcbiAgICB1c2VQYXJlbnRQcm9wczogYm9vbGVhbjtcclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRlIGV4dGVuZHMgQm9keSB7XHJcbiAgICB1c2VQYXJlbnRQcm9wczogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHQ6IENvbXBvc2l0ZU9wdCkge1xyXG4gICAgICAgIHN1cGVyKG9wdCwgYm9keVR5cGUuY29tcG9zaXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSDlhoXpg6jmlrnms5UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgYmVmb3JlSW5pdGlhbGl6ZVByb3BlcnRpZXMob3B0OiBDb21wb3NpdGVPcHQpIHtcclxuICAgICAgICB0aGlzLnBhcnRzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvcHQuYm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFydHMucHVzaCguLi5vcHQuYm9kaWVzW2ldLnBhcnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMudXNlUGFyZW50UHJvcHMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVzZVBhcmVudFByb3BzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCF0aGlzLnVzZVBhcmVudFByb3BzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFzcyA9IENvbXBvc2UuZ2V0TWFzcyh0aGlzLnBhcnRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWZ0ZXJJbml0aWFsaXplUHJvcGVydGllcyhvcHQ6IENvbXBvc2l0ZU9wdCkge1xyXG4gICAgICAgIGlmKHRoaXMudXNlUGFyZW50UHJvcHMpIHtcclxuICAgICAgICAgICAgdGhpcy5kZW5zaXR5ID0gdGhpcy5tYXNzIC8gdGhpcy5hcmVhO1xyXG5cclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFydHNbaV0ubWFzcyA9IHRoaXMucGFydHNbaV0uYXJlYSAqIHRoaXMuZGVuc2l0eTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFydHNbaV0uZnJpY3Rpb24gPSB0aGlzLmZyaWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXS5yZXN0aXR1dGlvbiA9IHRoaXMucmVzdGl0dXRpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLmdldENlbnRyb2lkKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXS5pbmVydGlhID0gdGhpcy5wYXJ0c1tpXS5nZXRJbmVydGlhKHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluZXJ0aWEgPSB0aGlzLmdldEluZXJ0aWEoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnZJbmVydGlhID0gdGhpcy5nZXRJbnZJbmVydGlhKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRzW2ldLnJvdGF0ZUNlbnRlciA9IHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIHRoaXMucGFydHNbaV0ucGFyZW50ID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXS5zdGF0aWMgPSB0aGlzLnN0YXRpYztcclxuICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXS5raW5ldGljID0gdGhpcy5raW5ldGljO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRzW2ldLm1hc2sgPSB0aGlzLm1hc2s7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEFyZWEoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gQ29tcG9zZS5nZXRBcmVhKHRoaXMucGFydHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENlbnRyb2lkKCk6IFZlY3RvciB7XHJcbiAgICAgICAgcmV0dXJuIENvbXBvc2UuZ2V0Q2VudHJvaWQodGhpcy5wYXJ0cywgdGhpcy5tYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbmVydGlhKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIENvbXBvc2UuZ2V0SW5lcnRpYSh0aGlzLnBhcnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCb3VuZCgpOiBCb3VuZCB7XHJcbiAgICAgICAgbGV0IGZpcnN0Q2hpbGRCb3VuZCA9IHRoaXMucGFydHNbMF0uYm91bmQsXHJcbiAgICAgICAgICAgIGJvdW5kOiBCb3VuZCA9IG5ldyBCb3VuZChmaXJzdENoaWxkQm91bmQubWluLCBmaXJzdENoaWxkQm91bmQubWF4KTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYm91bmQgPSB0aGlzLnBhcnRzW2ldLmJvdW5kLnVuaW9uKGJvdW5kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBib3VuZDtcclxuICAgIH1cclxuXHJcbiAgICB0cmFuc2xhdGUoZHg6IG51bWJlciwgZHk6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBwYXJ0OiBCb2R5O1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBwYXJ0ID0gdGhpcy5wYXJ0c1tpXTtcclxuXHJcbiAgICAgICAgICAgIHBhcnQucG9zaXRpb24ueCArPSBkeDtcclxuICAgICAgICAgICAgcGFydC5wb3NpdGlvbi55ICs9IGR5O1xyXG4gICAgICAgICAgICBwYXJ0LnRyYW5zbGF0ZShkeCwgZHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZC50cmFuc2xhdGUoZHgsIGR5KTtcclxuICAgIH1cclxuXHJcbiAgICByb3RhdGUocmFkaWFuOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgcGFydDogQm9keTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcGFydCA9IHRoaXMucGFydHNbaV07XHJcblxyXG4gICAgICAgICAgICBwYXJ0LnJvdGF0aW9uICs9IHJhZGlhbjtcclxuICAgICAgICAgICAgcGFydC5wb3NpdGlvbiA9IHBhcnQucG9zaXRpb24ucm90KHJhZGlhbiwgdGhpcy5wb3NpdGlvbiwgcGFydC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHBhcnQucm90YXRlKHJhZGlhbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJvdW5kLnVwZGF0ZUJ5Qm91bmRzKHRoaXMucGFydHMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29udGFpbnMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLnBhcnRzW2ldLmlzQ29udGFpbnMoeCwgeSkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///25\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Compose = void 0;\r\nconst vector_1 = __webpack_require__(0);\r\nexports.Compose = {\r\n    /**\r\n     * 获取质量\r\n     * @param bodies\r\n     */\r\n    getMass(bodies) {\r\n        let totalMass = 0, body;\r\n        for (let i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            totalMass += body.mass;\r\n        }\r\n        return totalMass;\r\n    },\r\n    /**\r\n     * 计算复合刚体的质心\r\n     * 参考：https://zhuanlan.zhihu.com/p/26395651\r\n     * @param composite\r\n     */\r\n    getCentroid(bodies, mass) {\r\n        let centroid = new vector_1.Vector(0, 0), body, i;\r\n        for (i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            centroid.x += body.position.x * body.mass;\r\n            centroid.y += body.position.y * body.mass;\r\n        }\r\n        centroid.x /= mass;\r\n        centroid.y /= mass;\r\n        return centroid;\r\n    },\r\n    /**\r\n     * 计算复合刚体的质量\r\n     * @param composite\r\n     */\r\n    getArea(bodies) {\r\n        let totalArea = 0, body, i;\r\n        for (let i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            totalArea += body.area;\r\n        }\r\n        return totalArea;\r\n    },\r\n    /**\r\n     * 获取转动惯量\r\n     * @param bodies\r\n     */\r\n    getInertia(bodies) {\r\n        let totalInertia = 0, body, i;\r\n        for (let i = 0; i < bodies.length; i++) {\r\n            body = bodies[i];\r\n            totalInertia += body.inertia;\r\n        }\r\n        return totalInertia;\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL0NvbXBvc2UudHM/NDcwMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx3Q0FBd0M7QUFPM0IsZUFBTyxHQUFHO0lBRW5COzs7T0FHRztJQUNILE9BQU8sQ0FBQyxNQUFjO1FBQ2xCLElBQUksU0FBUyxHQUFXLENBQUMsRUFDckIsSUFBVSxDQUFDO1FBRWYsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQixTQUFTLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQztTQUMxQjtRQUVELE9BQU8sU0FBUyxDQUFDO0lBQ3JCLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsV0FBVyxDQUFDLE1BQWMsRUFBRSxJQUFZO1FBQ3BDLElBQUksUUFBUSxHQUFHLElBQUksZUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDM0IsSUFBVSxFQUFFLENBQVMsQ0FBQztRQUUxQixLQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDL0IsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVqQixRQUFRLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDMUMsUUFBUSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1NBQzdDO1FBRUQsUUFBUSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7UUFDbkIsUUFBUSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7UUFFbkIsT0FBTyxRQUFRLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7T0FHRztJQUNILE9BQU8sQ0FBQyxNQUFjO1FBQ2xCLElBQUksU0FBUyxHQUFXLENBQUMsRUFDckIsSUFBVSxFQUFFLENBQVMsQ0FBQztRQUUxQixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLFNBQVMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDO1NBQzFCO1FBRUQsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQztJQUVEOzs7T0FHRztJQUNILFVBQVUsQ0FBQyxNQUFjO1FBQ3JCLElBQUksWUFBWSxHQUFXLENBQUMsRUFDeEIsSUFBVSxFQUFFLENBQVMsQ0FBQztRQUUxQixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNuQyxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLFlBQVksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO1NBQ2hDO1FBRUQsT0FBTyxZQUFZLENBQUM7SUFDeEIsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IENvbXBvc2UgPSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5botKjph49cclxuICAgICAqIEBwYXJhbSBib2RpZXMgXHJcbiAgICAgKi9cclxuICAgIGdldE1hc3MoYm9kaWVzOiBCb2R5W10pOiBudW1iZXIge1xyXG4gICAgICAgIGxldCB0b3RhbE1hc3M6IG51bWJlciA9IDAsXHJcbiAgICAgICAgICAgIGJvZHk6IEJvZHk7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYm9keSA9IGJvZGllc1tpXTtcclxuICAgICAgICAgICAgdG90YWxNYXNzICs9IGJvZHkubWFzcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0b3RhbE1hc3M7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5aSN5ZCI5Yia5L2T55qE6LSo5b+DXHJcbiAgICAgKiDlj4LogIPvvJpodHRwczovL3podWFubGFuLnpoaWh1LmNvbS9wLzI2Mzk1NjUxXHJcbiAgICAgKiBAcGFyYW0gY29tcG9zaXRlIFxyXG4gICAgICovXHJcbiAgICBnZXRDZW50cm9pZChib2RpZXM6IEJvZHlbXSwgbWFzczogbnVtYmVyKTogVmVjdG9yIHtcclxuICAgICAgICBsZXQgY2VudHJvaWQgPSBuZXcgVmVjdG9yKDAsIDApLFxyXG4gICAgICAgICAgICBib2R5OiBCb2R5LCBpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBib2R5ID0gYm9kaWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgY2VudHJvaWQueCArPSBib2R5LnBvc2l0aW9uLnggKiBib2R5Lm1hc3M7XHJcbiAgICAgICAgICAgIGNlbnRyb2lkLnkgKz0gYm9keS5wb3NpdGlvbi55ICogYm9keS5tYXNzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2VudHJvaWQueCAvPSBtYXNzO1xyXG4gICAgICAgIGNlbnRyb2lkLnkgLz0gbWFzcztcclxuXHJcbiAgICAgICAgcmV0dXJuIGNlbnRyb2lkO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+WkjeWQiOWImuS9k+eahOi0qOmHj1xyXG4gICAgICogQHBhcmFtIGNvbXBvc2l0ZSBcclxuICAgICAqL1xyXG4gICAgZ2V0QXJlYShib2RpZXM6IEJvZHlbXSk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHRvdGFsQXJlYTogbnVtYmVyID0gMCxcclxuICAgICAgICAgICAgYm9keTogQm9keSwgaTogbnVtYmVyO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJvZHkgPSBib2RpZXNbaV07XHJcbiAgICAgICAgICAgIHRvdGFsQXJlYSArPSBib2R5LmFyZWE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG90YWxBcmVhO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlui9rOWKqOaDr+mHj1xyXG4gICAgICogQHBhcmFtIGJvZGllcyBcclxuICAgICAqL1xyXG4gICAgZ2V0SW5lcnRpYShib2RpZXM6IEJvZHlbXSk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHRvdGFsSW5lcnRpYTogbnVtYmVyID0gMCxcclxuICAgICAgICAgICAgYm9keTogQm9keSwgaTogbnVtYmVyO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJvZHkgPSBib2RpZXNbaV07XHJcbiAgICAgICAgICAgIHRvdGFsSW5lcnRpYSArPSBib2R5LmluZXJ0aWE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG90YWxJbmVydGlhO1xyXG4gICAgfVxyXG59OyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///26\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.JointFactory = void 0;\r\nconst body_1 = __webpack_require__(2);\r\nconst joint_1 = __webpack_require__(8);\r\nconst anchor_1 = __webpack_require__(28);\r\nexports.JointFactory = {\r\n    /**\r\n     * 创造关节约束\r\n     * @param target\r\n     * @param body\r\n     * @param stiffness\r\n     */\r\n    create(targetA, targetB, stiffness = 1) {\r\n        if (targetA instanceof anchor_1.Anchor && targetB instanceof anchor_1.Anchor) {\r\n            if (targetA.position.x === targetB.position.x && targetA.position.y === targetB.position.y) {\r\n                targetB.body.setMask(targetA.anchorBody.mask);\r\n                let joint = joint_1.JointConstraint.create(targetA.anchorBody, targetB.body, 1);\r\n                joint.anchors.push(targetA);\r\n                targetB.setDiscard(true);\r\n                joint.setNeedRender(false);\r\n                return joint;\r\n            }\r\n            else {\r\n                let joint = joint_1.JointConstraint.create(targetA.anchorBody, targetB.anchorBody, stiffness);\r\n                joint.anchors.push(targetA, targetB);\r\n                return joint;\r\n            }\r\n        }\r\n        if (targetA instanceof anchor_1.Anchor && targetB instanceof body_1.Body) {\r\n            let joint = joint_1.JointConstraint.create(targetA.anchorBody, targetB, stiffness);\r\n            if (targetB.isContains(targetA.position.x, targetA.position.y)) {\r\n                if (targetB.mask !== 0) {\r\n                    targetA.anchorBody.setMask(targetB.mask);\r\n                }\r\n                else {\r\n                    targetB.setMask(targetA.anchorBody.mask);\r\n                }\r\n                joint.setNeedRender(false);\r\n            }\r\n            joint.anchors.push(targetA);\r\n            return joint;\r\n        }\r\n        if (targetA instanceof body_1.Body && targetB instanceof anchor_1.Anchor) {\r\n            let joint = joint_1.JointConstraint.create(targetA, targetB.anchorBody, stiffness);\r\n            joint.anchors.push(targetB);\r\n            return joint;\r\n        }\r\n        if (targetA instanceof body_1.Body && targetB instanceof body_1.Body) {\r\n            return joint_1.JointConstraint.create(targetA, targetB, stiffness);\r\n        }\r\n    },\r\n    /**\r\n     * 创造锚点\r\n     * @param position\r\n     * @param body\r\n     */\r\n    anchor(position, body = null) {\r\n        if (body) {\r\n            position.x += body.position.x;\r\n            position.y += body.position.y;\r\n        }\r\n        return new anchor_1.Anchor(position, body);\r\n    }\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9qb2ludEZhY3RvcnkudHM/N2IyOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxzQ0FBb0M7QUFDcEMsdUNBQXNEO0FBQ3RELHlDQUF5QztBQUs1QixvQkFBWSxHQUFHO0lBRXhCOzs7OztPQUtHO0lBQ0gsTUFBTSxDQUFDLE9BQXNCLEVBQUUsT0FBc0IsRUFBRSxZQUFvQixDQUFDO1FBRXhFLElBQUcsT0FBTyxZQUFZLGVBQU0sSUFBSSxPQUFPLFlBQVksZUFBTSxFQUFFO1lBQ3ZELElBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3ZGLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzlDLElBQUksS0FBSyxHQUFHLHVCQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDeEUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBRTVCLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3pCLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBRTNCLE9BQU8sS0FBSyxDQUFDO2FBQ2hCO2lCQUNJO2dCQUNELElBQUksS0FBSyxHQUFHLHVCQUFlLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztnQkFDdEYsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNyQyxPQUFPLEtBQUssQ0FBQzthQUNoQjtTQUNKO1FBRUQsSUFBRyxPQUFPLFlBQVksZUFBTSxJQUFJLE9BQU8sWUFBWSxXQUFJLEVBQUU7WUFDckQsSUFBSSxLQUFLLEdBQUcsdUJBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFFM0UsSUFBRyxPQUFPLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQzNELElBQUcsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUU7b0JBQ25CLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDNUM7cUJBQ0k7b0JBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUM1QztnQkFFRCxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzlCO1lBRUQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDNUIsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFFRCxJQUFHLE9BQU8sWUFBWSxXQUFJLElBQUksT0FBTyxZQUFZLGVBQU0sRUFBRTtZQUNyRCxJQUFJLEtBQUssR0FBRyx1QkFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUMzRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1QixPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUVELElBQUcsT0FBTyxZQUFZLFdBQUksSUFBSSxPQUFPLFlBQVksV0FBSSxFQUFFO1lBQ25ELE9BQU8sdUJBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQztTQUM5RDtJQUNMLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxDQUFDLFFBQWdCLEVBQUUsT0FBYSxJQUFJO1FBQ3RDLElBQUcsSUFBSSxFQUFFO1lBQ0wsUUFBUSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUM5QixRQUFRLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1NBQ2pDO1FBRUQsT0FBTyxJQUFJLGVBQU0sQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBKb2ludENvbnN0cmFpbnQgfSBmcm9tIFwiLi4vY29uc3RyYWludC9qb2ludFwiO1xyXG5pbXBvcnQgeyBBbmNob3IgfSBmcm9tIFwiLi4vam9pbnQvYW5jaG9yXCI7XHJcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi9tYXRoL3ZlY3RvclwiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY29uc3QgSm9pbnRGYWN0b3J5ID0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib6YCg5YWz6IqC57qm5p2fXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IFxyXG4gICAgICogQHBhcmFtIGJvZHkgXHJcbiAgICAgKiBAcGFyYW0gc3RpZmZuZXNzIFxyXG4gICAgICovXHJcbiAgICBjcmVhdGUodGFyZ2V0QTogQm9keSB8IEFuY2hvciwgdGFyZ2V0QjogQm9keSB8IEFuY2hvciwgc3RpZmZuZXNzOiBudW1iZXIgPSAxKSB7XHJcbiAgICBcclxuICAgICAgICBpZih0YXJnZXRBIGluc3RhbmNlb2YgQW5jaG9yICYmIHRhcmdldEIgaW5zdGFuY2VvZiBBbmNob3IpIHtcclxuICAgICAgICAgICAgaWYodGFyZ2V0QS5wb3NpdGlvbi54ID09PSB0YXJnZXRCLnBvc2l0aW9uLnggJiYgdGFyZ2V0QS5wb3NpdGlvbi55ID09PSB0YXJnZXRCLnBvc2l0aW9uLnkpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldEIuYm9keS5zZXRNYXNrKHRhcmdldEEuYW5jaG9yQm9keS5tYXNrKTtcclxuICAgICAgICAgICAgICAgIGxldCBqb2ludCA9IEpvaW50Q29uc3RyYWludC5jcmVhdGUodGFyZ2V0QS5hbmNob3JCb2R5LCB0YXJnZXRCLmJvZHksIDEpO1xyXG4gICAgICAgICAgICAgICAgam9pbnQuYW5jaG9ycy5wdXNoKHRhcmdldEEpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRCLnNldERpc2NhcmQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBqb2ludC5zZXROZWVkUmVuZGVyKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gam9pbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgam9pbnQgPSBKb2ludENvbnN0cmFpbnQuY3JlYXRlKHRhcmdldEEuYW5jaG9yQm9keSwgdGFyZ2V0Qi5hbmNob3JCb2R5LCBzdGlmZm5lc3MpO1xyXG4gICAgICAgICAgICAgICAgam9pbnQuYW5jaG9ycy5wdXNoKHRhcmdldEEsIHRhcmdldEIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpvaW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0YXJnZXRBIGluc3RhbmNlb2YgQW5jaG9yICYmIHRhcmdldEIgaW5zdGFuY2VvZiBCb2R5KSB7XHJcbiAgICAgICAgICAgIGxldCBqb2ludCA9IEpvaW50Q29uc3RyYWludC5jcmVhdGUodGFyZ2V0QS5hbmNob3JCb2R5LCB0YXJnZXRCLCBzdGlmZm5lc3MpO1xyXG5cclxuICAgICAgICAgICAgaWYodGFyZ2V0Qi5pc0NvbnRhaW5zKHRhcmdldEEucG9zaXRpb24ueCwgdGFyZ2V0QS5wb3NpdGlvbi55KSkge1xyXG4gICAgICAgICAgICAgICAgaWYodGFyZ2V0Qi5tYXNrICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QS5hbmNob3JCb2R5LnNldE1hc2sodGFyZ2V0Qi5tYXNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEIuc2V0TWFzayh0YXJnZXRBLmFuY2hvckJvZHkubWFzayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGpvaW50LnNldE5lZWRSZW5kZXIoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBqb2ludC5hbmNob3JzLnB1c2godGFyZ2V0QSk7XHJcbiAgICAgICAgICAgIHJldHVybiBqb2ludDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRhcmdldEEgaW5zdGFuY2VvZiBCb2R5ICYmIHRhcmdldEIgaW5zdGFuY2VvZiBBbmNob3IpIHtcclxuICAgICAgICAgICAgbGV0IGpvaW50ID0gSm9pbnRDb25zdHJhaW50LmNyZWF0ZSh0YXJnZXRBLCB0YXJnZXRCLmFuY2hvckJvZHksIHN0aWZmbmVzcyk7XHJcbiAgICAgICAgICAgIGpvaW50LmFuY2hvcnMucHVzaCh0YXJnZXRCKTtcclxuICAgICAgICAgICAgcmV0dXJuIGpvaW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGFyZ2V0QSBpbnN0YW5jZW9mIEJvZHkgJiYgdGFyZ2V0QiBpbnN0YW5jZW9mIEJvZHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEpvaW50Q29uc3RyYWludC5jcmVhdGUodGFyZ2V0QSwgdGFyZ2V0Qiwgc3RpZmZuZXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib6YCg6ZSa54K5XHJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb25cclxuICAgICAqIEBwYXJhbSBib2R5IFxyXG4gICAgICovXHJcbiAgICBhbmNob3IocG9zaXRpb246IFZlY3RvciwgYm9keTogQm9keSA9IG51bGwpOiBBbmNob3Ige1xyXG4gICAgICAgIGlmKGJvZHkpIHtcclxuICAgICAgICAgICAgcG9zaXRpb24ueCArPSBib2R5LnBvc2l0aW9uLng7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uLnkgKz0gYm9keS5wb3NpdGlvbi55O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBBbmNob3IocG9zaXRpb24sIGJvZHkpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///27\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nexports.Anchor = void 0;\r\nconst joint_1 = __webpack_require__(8);\r\nconst bodiesFactory_1 = __webpack_require__(12);\r\nclass Anchor {\r\n    constructor(position, body = null) {\r\n        this.anchorRadius = 3;\r\n        this.anchorMass = 5;\r\n        this.body = body;\r\n        this.joint = null;\r\n        this.discard = false;\r\n        this.anchorBody = bodiesFactory_1.BodiesFactory.Circle(position.x, position.y, this.anchorRadius, {\r\n            mass: this.anchorMass,\r\n            static: this.body ? false : true,\r\n            mask: parseFloat(Math.random().toFixed(3))\r\n        });\r\n        this.position = this.anchorBody.position;\r\n        if (this.body) {\r\n            this.joint = joint_1.JointConstraint.create(this.anchorBody, this.body, 1);\r\n            this.joint.needRender = false;\r\n            this.body.setMask(this.anchorBody.mask);\r\n        }\r\n    }\r\n    setDiscard(discard) {\r\n        this.discard = discard;\r\n    }\r\n    setRender(fn) {\r\n        this.anchorBody.setRender(fn);\r\n    }\r\n}\r\nexports.Anchor = Anchor;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvam9pbnQvYW5jaG9yLnRzPzkwMmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsdUNBQXNEO0FBQ3RELGdEQUFzRDtBQU10RCxNQUFhLE1BQU07SUFVZixZQUFZLFFBQWdCLEVBQUUsT0FBYSxJQUFJO1FBSHZDLGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLGVBQVUsR0FBRyxDQUFDLENBQUM7UUFHbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFFckIsSUFBSSxDQUFDLFVBQVUsR0FBRyw2QkFBYSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUM5RSxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDckIsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUMsQ0FBQyxLQUFLLEVBQUMsQ0FBQyxJQUFJO1lBQzlCLElBQUksRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM3QyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO1FBRXpDLElBQUcsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNWLElBQUksQ0FBQyxLQUFLLEdBQUcsdUJBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ25FLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzNDO0lBQ0wsQ0FBQztJQUVELFVBQVUsQ0FBQyxPQUFnQjtRQUN2QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUMzQixDQUFDO0lBRUQsU0FBUyxDQUFDLEVBQXVEO1FBQzdELElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Q0FDSjtBQXJDRCx3QkFxQ0MiLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb2R5IH0gZnJvbSBcIi4uL2JvZHkvYm9keVwiO1xyXG5pbXBvcnQgeyBKb2ludENvbnN0cmFpbnQgfSBmcm9tIFwiLi4vY29uc3RyYWludC9qb2ludFwiO1xyXG5pbXBvcnQgeyBCb2RpZXNGYWN0b3J5IH0gZnJvbSBcIi4uL2NvcmUvYm9kaWVzRmFjdG9yeVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vbWF0aC92ZWN0b3JcIjtcclxuaW1wb3J0IHsgSm9pbnQgfSBmcm9tIFwiLi9qb2ludFwiO1xyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQW5jaG9yIHtcclxuICAgIGJvZHk6IEJvZHk7XHJcbiAgICBhbmNob3JCb2R5OiBCb2R5O1xyXG4gICAgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIGpvaW50OiBKb2ludDtcclxuICAgIGRpc2NhcmQ6IGJvb2xlYW47XHJcblxyXG4gICAgcHJpdmF0ZSBhbmNob3JSYWRpdXMgPSAzO1xyXG4gICAgcHJpdmF0ZSBhbmNob3JNYXNzID0gNTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogVmVjdG9yLCBib2R5OiBCb2R5ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XHJcbiAgICAgICAgdGhpcy5qb2ludCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kaXNjYXJkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuYW5jaG9yQm9keSA9IEJvZGllc0ZhY3RvcnkuQ2lyY2xlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHRoaXMuYW5jaG9yUmFkaXVzLCB7IFxyXG4gICAgICAgICAgICBtYXNzOiB0aGlzLmFuY2hvck1hc3MsXHJcbiAgICAgICAgICAgIHN0YXRpYzogdGhpcy5ib2R5PyBmYWxzZTogdHJ1ZSxcclxuICAgICAgICAgICAgbWFzazogcGFyc2VGbG9hdChNYXRoLnJhbmRvbSgpLnRvRml4ZWQoMykpIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5hbmNob3JCb2R5LnBvc2l0aW9uO1xyXG5cclxuICAgICAgICBpZih0aGlzLmJvZHkpIHtcclxuICAgICAgICAgICAgdGhpcy5qb2ludCA9IEpvaW50Q29uc3RyYWludC5jcmVhdGUodGhpcy5hbmNob3JCb2R5LCB0aGlzLmJvZHksIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmpvaW50Lm5lZWRSZW5kZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5ib2R5LnNldE1hc2sodGhpcy5hbmNob3JCb2R5Lm1hc2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXREaXNjYXJkKGRpc2NhcmQ6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmRpc2NhcmQgPSBkaXNjYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbmRlcihmbjogKGJvZHk6IEJvZHksIGR0OiBudW1iZXIsIHRpbWVTdGFtcDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5hbmNob3JCb2R5LnNldFJlbmRlcihmbik7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///28\n')}])}));